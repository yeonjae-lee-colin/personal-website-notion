{"version":3,"file":"es.js","sources":["../src/lz-string.ts","../src/config.ts","../src/utils.ts","../src/autocapture-utils.ts","../src/extensions/rageclick.ts","../src/autocapture.ts","../src/storage.ts","../src/gdpr-utils.ts","../src/posthog-people.ts","../src/posthog-featureflags.ts","../src/posthog-persistence.ts","../src/extensions/sessionrecording-utils.ts","../src/extensions/sessionrecording.ts","../src/extensions/web-performance.ts","../src/decide.ts","../src/extensions/cloud.ts","../src/extensions/toolbar.ts","../src/base-request-queue.ts","../src/request-queue.ts","../src/capture-metrics.ts","../node_modules/fflate/esm/browser.js","../src/types.ts","../src/compression.ts","../src/send-request.ts","../src/retry-queue.ts","../src/sessionid.ts","../src/extensions/sentry-integration.ts","../src/extensions/segment-integration.ts","../src/page-view-id.ts","../src/posthog-core.ts","../src/loader-module.ts"],"sourcesContent":["// Copyright (c) 2013 Pieroxy <pieroxy@pieroxy.net>\n// This work is free. You can redistribute it and/or modify it\n// under the terms of the WTFPL, Version 2\n// For more information see LICENSE.txt or http://www.wtfpl.net/\n//\n// For more information, the home page:\n// http://pieroxy.net/blog/pages/lz-string/testing.html\n//\n// LZ-based compression algorithm, version 1.4.4\n\n// private property\nconst f = String.fromCharCode\nconst keyStrBase64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\nconst keyStrUriSafe = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$'\nconst baseReverseDic: Record<string, Record<string, number>> = {}\n\nfunction getBaseValue(alphabet: string, character: string) {\n    if (!baseReverseDic[alphabet]) {\n        baseReverseDic[alphabet] = {}\n        for (let i = 0; i < alphabet.length; i++) {\n            baseReverseDic[alphabet][alphabet.charAt(i)] = i\n        }\n    }\n    return baseReverseDic[alphabet][character]\n}\n\nexport const LZString = {\n    compressToBase64: function (input: null | string) {\n        if (input == null) return ''\n        const res = LZString._compress(input, 6, function (a) {\n            return keyStrBase64.charAt(a)\n        })\n        switch (\n            res.length % 4 // To produce valid Base64\n        ) {\n            default: // When could this happen ?\n            case 0:\n                return res\n            case 1:\n                return res + '==='\n            case 2:\n                return res + '=='\n            case 3:\n                return res + '='\n        }\n    },\n\n    decompressFromBase64: function (input: string | null): string | null {\n        if (input == null) return ''\n        if (input == '') return null\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrBase64, input.charAt(index))\n        })\n    },\n\n    compressToUTF16: function (input: string | null): string | null {\n        if (input == null) return ''\n        return (\n            LZString._compress(input, 15, function (a) {\n                return f(a + 32)\n            }) + ' '\n        )\n    },\n\n    decompressFromUTF16: function (compressed: string | null): string | null {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 16384, function (index) {\n            return compressed.charCodeAt(index) - 32\n        })\n    },\n\n    //compress into uint8array (UCS-2 big endian format)\n    compressToUint8Array: function (uncompressed: string | null): Uint8Array {\n        const compressed = LZString.compress(uncompressed)\n        const buf = new Uint8Array(compressed.length * 2) // 2 bytes per character\n\n        for (let i = 0, TotalLen = compressed.length; i < TotalLen; i++) {\n            const current_value = compressed.charCodeAt(i)\n            buf[i * 2] = current_value >>> 8\n            buf[i * 2 + 1] = current_value % 256\n        }\n        return buf\n    },\n\n    //decompress from uint8array (UCS-2 big endian format)\n    decompressFromUint8Array: function (compressed: Uint8Array): string | null {\n        if (compressed === null || compressed === undefined) {\n            return LZString.decompress(compressed)\n        } else {\n            const buf = new Array(compressed.length / 2) // 2 bytes per character\n            for (let i = 0, TotalLen = buf.length; i < TotalLen; i++) {\n                buf[i] = compressed[i * 2] * 256 + compressed[i * 2 + 1]\n            }\n\n            const result: string[] = []\n            buf.forEach(function (c) {\n                result.push(f(c))\n            })\n            return LZString.decompress(result.join(''))\n        }\n    },\n\n    //compress into a string that is already URI encoded\n    compressToEncodedURIComponent: function (input: string | null): string | null {\n        if (input == null) return ''\n        return LZString._compress(input, 6, function (a) {\n            return keyStrUriSafe.charAt(a)\n        })\n    },\n\n    //decompress from an output of compressToEncodedURIComponent\n    decompressFromEncodedURIComponent: function (input: string | null): string | null {\n        if (input == null) return ''\n        if (input == '') return null\n        input = input.replace(/ /g, '+')\n        return LZString._decompress(input.length, 32, function (index) {\n            return getBaseValue(keyStrUriSafe, (input as string).charAt(index))\n        })\n    },\n\n    compress: function (uncompressed: string | null): string {\n        return LZString._compress(uncompressed, 16, function (a) {\n            return f(a)\n        })\n    },\n    _compress: function (\n        uncompressed: string | null,\n        bitsPerChar: number,\n        getCharFromInt: (number: number) => string\n    ): string {\n        if (uncompressed == null) return ''\n        let i,\n            value,\n            context_c = '',\n            context_wc = '',\n            context_w = '',\n            context_enlargeIn = 2, // Compensate for the first entry which should not count\n            context_dictSize = 3,\n            context_numBits = 2,\n            context_data_val = 0,\n            context_data_position = 0,\n            ii\n        const context_dictionary: Record<string, number> = {},\n            context_dictionaryToCreate: Record<string, boolean> = {},\n            context_data = []\n\n        for (ii = 0; ii < uncompressed.length; ii += 1) {\n            context_c = uncompressed.charAt(ii)\n            if (!Object.prototype.hasOwnProperty.call(context_dictionary, context_c)) {\n                context_dictionary[context_c] = context_dictSize++\n                context_dictionaryToCreate[context_c] = true\n            }\n\n            context_wc = context_w + context_c\n            if (Object.prototype.hasOwnProperty.call(context_dictionary, context_wc)) {\n                context_w = context_wc\n            } else {\n                if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                    if (context_w.charCodeAt(0) < 256) {\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = context_data_val << 1\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 8; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    } else {\n                        value = 1\n                        for (i = 0; i < context_numBits; i++) {\n                            context_data_val = (context_data_val << 1) | value\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = 0\n                        }\n                        value = context_w.charCodeAt(0)\n                        for (i = 0; i < 16; i++) {\n                            context_data_val = (context_data_val << 1) | (value & 1)\n                            if (context_data_position == bitsPerChar - 1) {\n                                context_data_position = 0\n                                context_data.push(getCharFromInt(context_data_val))\n                                context_data_val = 0\n                            } else {\n                                context_data_position++\n                            }\n                            value = value >> 1\n                        }\n                    }\n                    context_enlargeIn--\n                    if (context_enlargeIn == 0) {\n                        context_enlargeIn = Math.pow(2, context_numBits)\n                        context_numBits++\n                    }\n                    delete context_dictionaryToCreate[context_w]\n                } else {\n                    value = context_dictionary[context_w]\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                // Add wc to the dictionary.\n                context_dictionary[context_wc] = context_dictSize++\n                context_w = String(context_c)\n            }\n        }\n\n        // Output the code for w.\n        if (context_w !== '') {\n            if (Object.prototype.hasOwnProperty.call(context_dictionaryToCreate, context_w)) {\n                if (context_w.charCodeAt(0) < 256) {\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = context_data_val << 1\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 8; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                } else {\n                    value = 1\n                    for (i = 0; i < context_numBits; i++) {\n                        context_data_val = (context_data_val << 1) | value\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = 0\n                    }\n                    value = context_w.charCodeAt(0)\n                    for (i = 0; i < 16; i++) {\n                        context_data_val = (context_data_val << 1) | (value & 1)\n                        if (context_data_position == bitsPerChar - 1) {\n                            context_data_position = 0\n                            context_data.push(getCharFromInt(context_data_val))\n                            context_data_val = 0\n                        } else {\n                            context_data_position++\n                        }\n                        value = value >> 1\n                    }\n                }\n                context_enlargeIn--\n                if (context_enlargeIn == 0) {\n                    context_enlargeIn = Math.pow(2, context_numBits)\n                    context_numBits++\n                }\n                delete context_dictionaryToCreate[context_w]\n            } else {\n                value = context_dictionary[context_w]\n                for (i = 0; i < context_numBits; i++) {\n                    context_data_val = (context_data_val << 1) | (value & 1)\n                    if (context_data_position == bitsPerChar - 1) {\n                        context_data_position = 0\n                        context_data.push(getCharFromInt(context_data_val))\n                        context_data_val = 0\n                    } else {\n                        context_data_position++\n                    }\n                    value = value >> 1\n                }\n            }\n            context_enlargeIn--\n            if (context_enlargeIn == 0) {\n                context_enlargeIn = Math.pow(2, context_numBits)\n                context_numBits++\n            }\n        }\n\n        // Mark the end of the stream\n        value = 2\n        for (i = 0; i < context_numBits; i++) {\n            context_data_val = (context_data_val << 1) | (value & 1)\n            if (context_data_position == bitsPerChar - 1) {\n                context_data_position = 0\n                context_data.push(getCharFromInt(context_data_val))\n                context_data_val = 0\n            } else {\n                context_data_position++\n            }\n            value = value >> 1\n        }\n\n        // Flush the last char\n        while (true) {\n            context_data_val = context_data_val << 1\n            if (context_data_position == bitsPerChar - 1) {\n                context_data.push(getCharFromInt(context_data_val))\n                break\n            } else context_data_position++\n        }\n        return context_data.join('')\n    },\n\n    decompress: function (compressed: string | null) {\n        if (compressed == null) return ''\n        if (compressed == '') return null\n        return LZString._decompress(compressed.length, 32768, function (index) {\n            return compressed.charCodeAt(index)\n        })\n    },\n\n    _decompress: function (length: number, resetValue: number, getNextValue: (index: number) => number) {\n        const dictionary: (string | number)[] = [],\n            result = [],\n            data = { val: getNextValue(0), position: resetValue, index: 1 }\n        let enlargeIn = 4,\n            dictSize = 4,\n            numBits = 3,\n            entry = '',\n            i: number,\n            w: string | number,\n            bits: number,\n            resb: number,\n            maxpower: number,\n            power: number,\n            c: string | number\n\n        for (i = 0; i < 3; i += 1) {\n            dictionary[i] = i\n        }\n\n        bits = 0\n        maxpower = Math.pow(2, 2)\n        power = 1\n        while (power != maxpower) {\n            resb = data.val & data.position\n            data.position >>= 1\n            if (data.position == 0) {\n                data.position = resetValue\n                data.val = getNextValue(data.index++)\n            }\n            bits |= (resb > 0 ? 1 : 0) * power\n            power <<= 1\n        }\n\n        switch (bits) {\n            case 0:\n                bits = 0\n                maxpower = Math.pow(2, 8)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 1:\n                bits = 0\n                maxpower = Math.pow(2, 16)\n                power = 1\n                while (power != maxpower) {\n                    resb = data.val & data.position\n                    data.position >>= 1\n                    if (data.position == 0) {\n                        data.position = resetValue\n                        data.val = getNextValue(data.index++)\n                    }\n                    bits |= (resb > 0 ? 1 : 0) * power\n                    power <<= 1\n                }\n                c = f(bits)\n                break\n            case 2:\n                return ''\n        }\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        dictionary[3] = c\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        w = c\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        result.push(c)\n        while (true) {\n            if (data.index > length) {\n                return ''\n            }\n\n            bits = 0\n            maxpower = Math.pow(2, numBits)\n            power = 1\n            while (power != maxpower) {\n                resb = data.val & data.position\n                data.position >>= 1\n                if (data.position == 0) {\n                    data.position = resetValue\n                    data.val = getNextValue(data.index++)\n                }\n                bits |= (resb > 0 ? 1 : 0) * power\n                power <<= 1\n            }\n\n            switch ((c = bits)) {\n                case 0:\n                    bits = 0\n                    maxpower = Math.pow(2, 8)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 1:\n                    bits = 0\n                    maxpower = Math.pow(2, 16)\n                    power = 1\n                    while (power != maxpower) {\n                        resb = data.val & data.position\n                        data.position >>= 1\n                        if (data.position == 0) {\n                            data.position = resetValue\n                            data.val = getNextValue(data.index++)\n                        }\n                        bits |= (resb > 0 ? 1 : 0) * power\n                        power <<= 1\n                    }\n                    dictionary[dictSize++] = f(bits)\n                    c = dictSize - 1\n                    enlargeIn--\n                    break\n                case 2:\n                    return result.join('')\n            }\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n\n            if (dictionary[c]) {\n                entry = dictionary[c] as string\n            } else {\n                if (c === dictSize) {\n                    entry = w + (w as string).charAt(0)\n                } else {\n                    return null\n                }\n            }\n            result.push(entry)\n\n            // Add w+entry[0] to the dictionary.\n            dictionary[dictSize++] = w + entry.charAt(0)\n            enlargeIn--\n\n            w = entry\n\n            if (enlargeIn == 0) {\n                enlargeIn = Math.pow(2, numBits)\n                numBits++\n            }\n        }\n    },\n}\n","import { version } from '../package.json'\n\n// overriden in posthog-core,\n// e.g.     Config.DEBUG = Config.DEBUG || instance.get_config('debug')\nconst Config = {\n    DEBUG: false,\n    LIB_VERSION: version,\n}\n\nexport default Config\n","import Config from './config'\nimport { Breaker, EventHandler, Properties } from './types'\n\n/*\n * Saved references to long variable names, so that closure compiler can\n * minimize file size.\n */\n\nconst ArrayProto = Array.prototype\nconst ObjProto = Object.prototype\nconst toString = ObjProto.toString\nconst hasOwnProperty = ObjProto.hasOwnProperty\nconst win: Window & typeof globalThis = typeof window !== 'undefined' ? window : ({} as typeof window)\nconst navigator = win.navigator || { userAgent: '' }\nconst document = win.document || {}\nconst userAgent = navigator.userAgent\n\nconst nativeForEach = ArrayProto.forEach,\n    nativeIndexOf = ArrayProto.indexOf,\n    nativeIsArray = Array.isArray,\n    breaker: Breaker = {}\n\n// Console override\nconst logger = {\n    /** @type {function(...*)} */\n    log: function (...args: any[]) {\n        if (Config.DEBUG && !_isUndefined(window.console) && window.console) {\n            // Don't log PostHog debug messages in rrweb\n            const log =\n                '__rrweb_original__' in window.console.log\n                    ? (window.console.log as any)['__rrweb_original__']\n                    : window.console.log\n\n            try {\n                log.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    log(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    error: function (..._args: any[]) {\n        if (Config.DEBUG && !_isUndefined(window.console) && window.console) {\n            const args = ['PostHog error:', ..._args]\n            // Don't log PostHog debug messages in rrweb\n            const error =\n                '__rrweb_original__' in window.console.error\n                    ? (window.console.error as any)['__rrweb_original__']\n                    : window.console.error\n            try {\n                error.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    error(arg)\n                })\n            }\n        }\n    },\n    /** @type {function(...*)} */\n    critical: function (..._args: any[]) {\n        if (!_isUndefined(window.console) && window.console) {\n            const args = ['PostHog error:', ..._args]\n            // Don't log PostHog debug messages in rrweb\n            const error =\n                '__rrweb_original__' in window.console.error\n                    ? (window.console.error as any)['__rrweb_original__']\n                    : window.console.error\n            try {\n                error.apply(window.console, args)\n            } catch (err) {\n                _eachArray(args, function (arg) {\n                    error(arg)\n                })\n            }\n        }\n    },\n}\n\n// UNDERSCORE\n// Embed part of the Underscore Library\nexport const _trim = function (str: string): string {\n    return str.replace(/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g, '')\n}\n\nexport const _bind_instance_methods = function (obj: Record<string, any>): void {\n    for (const func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = obj[func].bind(obj)\n        }\n    }\n}\n\n/**\n * @param {*=} obj\n * @param {function(...*)=} iterator\n * @param {Object=} thisArg\n */\nexport function _each(obj: any, iterator: (value: any, key: any) => void | Breaker, thisArg?: any): void {\n    if (obj === null || obj === undefined) {\n        return\n    }\n    if (nativeForEach && Array.isArray(obj) && obj.forEach === nativeForEach) {\n        obj.forEach(iterator, thisArg)\n    } else if ('length' in obj && obj.length === +obj.length) {\n        for (let i = 0, l = obj.length; i < l; i++) {\n            if (i in obj && iterator.call(thisArg, obj[i], i) === breaker) {\n                return\n            }\n        }\n    } else {\n        for (const key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                if (iterator.call(thisArg, obj[key], key) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\nexport function _eachArray<E = any>(\n    obj: E[] | null | undefined,\n    iterator: (value: E, key: number) => void | Breaker,\n    thisArg?: any\n): void {\n    if (Array.isArray(obj)) {\n        if (nativeForEach && obj.forEach === nativeForEach) {\n            obj.forEach(iterator, thisArg)\n        } else if ('length' in obj && obj.length === +obj.length) {\n            for (let i = 0, l = obj.length; i < l; i++) {\n                if (i in obj && iterator.call(thisArg, obj[i], i) === breaker) {\n                    return\n                }\n            }\n        }\n    }\n}\n\nexport const _extend = function (obj: Record<string, any>, ...args: Record<string, any>[]): Record<string, any> {\n    _eachArray(args, function (source) {\n        for (const prop in source) {\n            if (source[prop] !== void 0) {\n                obj[prop] = source[prop]\n            }\n        }\n    })\n    return obj\n}\n\nexport const _isArray =\n    nativeIsArray ||\n    function (obj: any): obj is any[] {\n        return toString.call(obj) === '[object Array]'\n    }\n\n// from a comment on http://dbj.org/dbj/?p=286\n// fails on only one very rare and deliberate custom object:\n// let bomb = { toString : undefined, valueOf: function(o) { return \"function BOMBA!\"; }};\nexport const _isFunction = function (f: any): f is (...args: any[]) => any {\n    try {\n        return /^\\s*\\bfunction\\b/.test(f)\n    } catch (x) {\n        return false\n    }\n}\n\nexport const _include = function (\n    obj: null | string | Array<any> | Record<string, any>,\n    target: any\n): boolean | Breaker {\n    let found = false\n    if (obj === null) {\n        return found\n    }\n    if (nativeIndexOf && obj.indexOf === nativeIndexOf) {\n        return obj.indexOf(target) != -1\n    }\n    _each(obj, function (value) {\n        if (found || (found = value === target)) {\n            return breaker\n        }\n        return\n    })\n    return found\n}\n\nexport function _includes<T = any>(str: T[] | string, needle: T): boolean {\n    return (str as any).indexOf(needle) !== -1\n}\n\n// Underscore Addons\nexport const _isObject = function (obj: any): obj is Record<string, any> {\n    return obj === Object(obj) && !_isArray(obj)\n}\n\nexport const _isEmptyObject = function (obj: any): obj is Record<string, any> {\n    if (_isObject(obj)) {\n        for (const key in obj) {\n            if (hasOwnProperty.call(obj, key)) {\n                return false\n            }\n        }\n        return true\n    }\n    return false\n}\n\nexport const _isUndefined = function (obj: any): obj is undefined {\n    return obj === void 0\n}\n\nexport const _isString = function (obj: any): obj is string {\n    return toString.call(obj) == '[object String]'\n}\n\nexport const _isDate = function (obj: any): obj is Date {\n    return toString.call(obj) == '[object Date]'\n}\n\nexport const _isNumber = function (obj: any): obj is number {\n    return toString.call(obj) == '[object Number]'\n}\n\nexport const _encodeDates = function (obj: Properties): Properties {\n    _each(obj, function (v, k) {\n        if (_isDate(v)) {\n            obj[k] = _formatDate(v)\n        } else if (_isObject(v)) {\n            obj[k] = _encodeDates(v) // recurse\n        }\n    })\n    return obj\n}\n\nexport const _timestamp = function (): number {\n    Date.now =\n        Date.now ||\n        function () {\n            return +new Date()\n        }\n    return Date.now()\n}\n\nexport const _formatDate = function (d: Date): string {\n    // YYYY-MM-DDTHH:MM:SS in UTC\n    function pad(n: number) {\n        return n < 10 ? '0' + n : n\n    }\n    return (\n        d.getUTCFullYear() +\n        '-' +\n        pad(d.getUTCMonth() + 1) +\n        '-' +\n        pad(d.getUTCDate()) +\n        'T' +\n        pad(d.getUTCHours()) +\n        ':' +\n        pad(d.getUTCMinutes()) +\n        ':' +\n        pad(d.getUTCSeconds())\n    )\n}\n\nexport const _safewrap = function <F extends (...args: any[]) => any = (...args: any[]) => any>(f: F): F {\n    return function (...args) {\n        try {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return f.apply(this, args)\n        } catch (e) {\n            logger.critical('Implementation error. Please turn on debug and contact support@posthog.com.')\n            if (Config.DEBUG) {\n                logger.critical(e)\n            }\n        }\n    } as F\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport const _safewrap_class = function (klass: Function, functions: string[]): void {\n    for (let i = 0; i < functions.length; i++) {\n        klass.prototype[functions[i]] = _safewrap(klass.prototype[functions[i]])\n    }\n}\n\nexport const _safewrap_instance_methods = function (obj: Record<string, any>): void {\n    for (const func in obj) {\n        if (typeof obj[func] === 'function') {\n            obj[func] = _safewrap(obj[func])\n        }\n    }\n}\n\nexport const _strip_empty_properties = function (p: Properties): Properties {\n    const ret: Properties = {}\n    _each(p, function (v, k) {\n        if (_isString(v) && v.length > 0) {\n            ret[k] = v\n        }\n    })\n    return ret\n}\n\n/**\n * Deep copies an object.\n * It handles cycles by replacing all references to them with `undefined`\n * Also supports customizing native values\n *\n * @param value\n * @param customizer\n * @returns {{}|undefined|*}\n */\nfunction deepCircularCopy<T extends Record<string, any> = Record<string, any>>(\n    value: T,\n    customizer?: <K extends keyof T = keyof T>(value: T[K], key?: K) => T[K]\n): T | undefined {\n    const COPY_IN_PROGRESS_SET = new Set()\n\n    function internalDeepCircularCopy(value: T, key?: string): T | undefined {\n        if (value !== Object(value)) return customizer ? customizer(value as any, key) : value // primitive value\n\n        if (COPY_IN_PROGRESS_SET.has(value)) return undefined\n        COPY_IN_PROGRESS_SET.add(value)\n        let result: T\n\n        if (_isArray(value)) {\n            result = [] as any as T\n            _eachArray(value, (it) => {\n                result.push(internalDeepCircularCopy(it))\n            })\n        } else {\n            result = {} as T\n            _each(value, (val, key) => {\n                if (!COPY_IN_PROGRESS_SET.has(val)) {\n                    ;(result as any)[key] = internalDeepCircularCopy(val, key)\n                }\n            })\n        }\n        return result\n    }\n    return internalDeepCircularCopy(value)\n}\n\nconst LONG_STRINGS_ALLOW_LIST = ['$performance_raw']\n\nexport function _copyAndTruncateStrings<T extends Record<string, any> = Record<string, any>>(\n    object: T,\n    maxStringLength: number | null\n): T {\n    return deepCircularCopy(object, (value: any, key) => {\n        if (key && LONG_STRINGS_ALLOW_LIST.indexOf(key as string) > -1) {\n            return value\n        }\n        if (typeof value === 'string' && maxStringLength !== null) {\n            return (value as string).slice(0, maxStringLength)\n        }\n        return value\n    }) as T\n}\n\nexport function _base64Encode(data: null): null\nexport function _base64Encode(data: undefined): undefined\nexport function _base64Encode(data: string): string\nexport function _base64Encode(data: string | null | undefined): string | null | undefined {\n    const b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/='\n    let o1,\n        o2,\n        o3,\n        h1,\n        h2,\n        h3,\n        h4,\n        bits,\n        i = 0,\n        ac = 0,\n        enc = ''\n    const tmp_arr: string[] = []\n\n    if (!data) {\n        return data\n    }\n\n    data = _utf8Encode(data)\n\n    do {\n        // pack three octets into four hexets\n        o1 = data.charCodeAt(i++)\n        o2 = data.charCodeAt(i++)\n        o3 = data.charCodeAt(i++)\n\n        bits = (o1 << 16) | (o2 << 8) | o3\n\n        h1 = (bits >> 18) & 0x3f\n        h2 = (bits >> 12) & 0x3f\n        h3 = (bits >> 6) & 0x3f\n        h4 = bits & 0x3f\n\n        // use hexets to index into b64, and append result to encoded string\n        tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4)\n    } while (i < data.length)\n\n    enc = tmp_arr.join('')\n\n    switch (data.length % 3) {\n        case 1:\n            enc = enc.slice(0, -2) + '=='\n            break\n        case 2:\n            enc = enc.slice(0, -1) + '='\n            break\n    }\n\n    return enc\n}\n\nexport const _utf8Encode = function (string: string): string {\n    string = (string + '').replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n')\n\n    let utftext = '',\n        start,\n        end\n    let stringl = 0,\n        n\n\n    start = end = 0\n    stringl = string.length\n\n    for (n = 0; n < stringl; n++) {\n        const c1 = string.charCodeAt(n)\n        let enc = null\n\n        if (c1 < 128) {\n            end++\n        } else if (c1 > 127 && c1 < 2048) {\n            enc = String.fromCharCode((c1 >> 6) | 192, (c1 & 63) | 128)\n        } else {\n            enc = String.fromCharCode((c1 >> 12) | 224, ((c1 >> 6) & 63) | 128, (c1 & 63) | 128)\n        }\n        if (enc !== null) {\n            if (end > start) {\n                utftext += string.substring(start, end)\n            }\n            utftext += enc\n            start = end = n + 1\n        }\n    }\n\n    if (end > start) {\n        utftext += string.substring(start, string.length)\n    }\n\n    return utftext\n}\n\nexport const _UUID = (function () {\n    // Time/ticks information\n    // 1*new Date() is a cross browser version of Date.now()\n    const T = function () {\n        const d = new Date().valueOf()\n        let i = 0\n\n        // this while loop figures how many browser ticks go by\n        // before 1*new Date() returns a new number, ie the amount\n        // of ticks that go by per millisecond\n        while (d == new Date().valueOf()) {\n            i++\n        }\n\n        return d.toString(16) + i.toString(16)\n    }\n\n    // Math.Random entropy\n    const R = function () {\n        return Math.random().toString(16).replace('.', '')\n    }\n\n    // User agent entropy\n    // This function takes the user agent string, and then xors\n    // together each sequence of 8 bytes.  This produces a final\n    // sequence of 8 bytes which it returns as hex.\n    const UA = function () {\n        const ua = userAgent\n        let i,\n            ch,\n            ret = 0,\n            buffer: number[] = []\n\n        function xor(result: number, byte_array: number[]) {\n            let j,\n                tmp = 0\n            for (j = 0; j < byte_array.length; j++) {\n                tmp |= buffer[j] << (j * 8)\n            }\n            return result ^ tmp\n        }\n\n        for (i = 0; i < ua.length; i++) {\n            ch = ua.charCodeAt(i)\n            buffer.unshift(ch & 0xff)\n            if (buffer.length >= 4) {\n                ret = xor(ret, buffer)\n                buffer = []\n            }\n        }\n\n        if (buffer.length > 0) {\n            ret = xor(ret, buffer)\n        }\n\n        return ret.toString(16)\n    }\n\n    return function () {\n        const se = (window.screen.height * window.screen.width).toString(16)\n        return T() + '-' + R() + '-' + UA() + '-' + se + '-' + T()\n    }\n})()\n\n// _.isBlockedUA()\n// This is to block various web spiders from executing our JS and\n// sending false capturing data\nexport const _isBlockedUA = function (ua: string): boolean {\n    if (\n        /(google web preview|baiduspider|yandexbot|bingbot|googlebot|yahoo! slurp|ahrefsbot|facebookexternalhit|facebookcatalog|applebot|semrushbot|duckduckbot|twitterbot|rogerbot|linkedinbot|mj12bot|sitebulb|bot.htm|bot.php)/i.test(\n            ua\n        )\n    ) {\n        return true\n    }\n    return false\n}\n\n/**\n * @param {Object=} formdata\n * @param {string=} arg_separator\n */\nexport const _HTTPBuildQuery = function (formdata: Record<string, any>, arg_separator = '&'): string {\n    let use_val: string\n    let use_key: string\n    const tph_arr: string[] = []\n\n    _each(formdata, function (val, key) {\n        use_val = encodeURIComponent(val.toString())\n        use_key = encodeURIComponent(key)\n        tph_arr[tph_arr.length] = use_key + '=' + use_val\n    })\n\n    return tph_arr.join(arg_separator)\n}\n\nexport const _getQueryParam = function (url: string, param: string): string {\n    // Expects a raw URL\n\n    const cleanParam = param.replace(/[[]/, '\\\\[').replace(/[\\]]/, '\\\\]')\n    const regexS = '[\\\\?&]' + cleanParam + '=([^&#]*)'\n    const regex = new RegExp(regexS)\n    const results = regex.exec(url)\n    if (results === null || (results && typeof results[1] !== 'string' && (results[1] as any).length)) {\n        return ''\n    } else {\n        let result = results[1]\n        try {\n            result = decodeURIComponent(result)\n        } catch (err) {\n            logger.error('Skipping decoding for malformed query param: ' + result)\n        }\n        return result.replace(/\\+/g, ' ')\n    }\n}\n\nexport const _getHashParam = function (hash: string, param: string): string | null {\n    const matches = hash.match(new RegExp(param + '=([^&]*)'))\n    return matches ? matches[1] : null\n}\n\nexport const _register_event = (function () {\n    // written by Dean Edwards, 2005\n    // with input from Tino Zijdel - crisp@xs4all.nl\n    // with input from Carl Sverre - mail@carlsverre.com\n    // with input from PostHog\n    // http://dean.edwards.name/weblog/2005/10/add-event/\n    // https://gist.github.com/1930440\n\n    /**\n     * @param {Object} element\n     * @param {string} type\n     * @param {function(...*)} handler\n     * @param {boolean=} oldSchool\n     * @param {boolean=} useCapture\n     */\n    const register_event = function (\n        element: Element | Window | Document | Node,\n        type: string,\n        handler: EventHandler,\n        oldSchool?: boolean,\n        useCapture?: boolean\n    ) {\n        if (!element) {\n            logger.error('No valid element provided to register_event')\n            return\n        }\n\n        if (element.addEventListener && !oldSchool) {\n            element.addEventListener(type, handler, !!useCapture)\n        } else {\n            const ontype = 'on' + type\n            const old_handler = (element as any)[ontype] // can be undefined\n            ;(element as any)[ontype] = makeHandler(element, handler, old_handler)\n        }\n    }\n\n    function makeHandler(\n        element: Element | Window | Document | Node,\n        new_handler: EventHandler,\n        old_handlers: EventHandler\n    ) {\n        return function (event: Event): boolean | void {\n            event = event || fixEvent(window.event)\n\n            // this basically happens in firefox whenever another script\n            // overwrites the onload callback and doesn't pass the event\n            // object to previously defined callbacks.  All the browsers\n            // that don't define window.event implement addEventListener\n            // so the dom_loaded handler will still be fired as usual.\n            if (!event) {\n                return undefined\n            }\n\n            let ret = true\n            let old_result: any\n\n            if (_isFunction(old_handlers)) {\n                old_result = old_handlers(event)\n            }\n            const new_result = new_handler.call(element, event)\n\n            if (false === old_result || false === new_result) {\n                ret = false\n            }\n\n            return ret\n        }\n    }\n\n    function fixEvent(event: Event | undefined): Event | undefined {\n        if (event) {\n            event.preventDefault = fixEvent.preventDefault\n            event.stopPropagation = fixEvent.stopPropagation\n        }\n        return event\n    }\n    fixEvent.preventDefault = function () {\n        ;(this as any as Event).returnValue = false\n    }\n    fixEvent.stopPropagation = function () {\n        ;(this as any as Event).cancelBubble = true\n    }\n\n    return register_event\n})()\n\nexport const _info = {\n    campaignParams: function (): Record<string, any> {\n        const campaign_keywords = 'utm_source utm_medium utm_campaign utm_content utm_term gclid fbclid msclkid'.split(\n            ' '\n        )\n        const params: Record<string, any> = {}\n        _each(campaign_keywords, function (kwkey) {\n            const kw = _getQueryParam(document.URL, kwkey)\n            if (kw.length) {\n                params[kwkey] = kw\n            }\n        })\n\n        return params\n    },\n\n    searchEngine: function (referrer: string): string | null {\n        if (referrer.search('https?://(.*)google.([^/?]*)') === 0) {\n            return 'google'\n        } else if (referrer.search('https?://(.*)bing.com') === 0) {\n            return 'bing'\n        } else if (referrer.search('https?://(.*)yahoo.com') === 0) {\n            return 'yahoo'\n        } else if (referrer.search('https?://(.*)duckduckgo.com') === 0) {\n            return 'duckduckgo'\n        } else {\n            return null\n        }\n    },\n\n    searchInfo: function (referrer: string): Record<string, any> {\n        const search = _info.searchEngine(referrer),\n            param = search != 'yahoo' ? 'q' : 'p',\n            ret: Record<string, any> = {}\n\n        if (search !== null) {\n            ret['$search_engine'] = search\n\n            const keyword = _getQueryParam(referrer, param)\n            if (keyword.length) {\n                ret['ph_keyword'] = keyword\n            }\n        }\n\n        return ret\n    },\n\n    /**\n     * This function detects which browser is running this script.\n     * The order of the checks are important since many user agents\n     * include key words used in later checks.\n     */\n    browser: function (user_agent: string, vendor: string, opera?: any): string {\n        vendor = vendor || '' // vendor is undefined for at least IE9\n        if (opera || _includes(user_agent, ' OPR/')) {\n            if (_includes(user_agent, 'Mini')) {\n                return 'Opera Mini'\n            }\n            return 'Opera'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (_includes(user_agent, 'IEMobile') || _includes(user_agent, 'WPDesktop')) {\n            return 'Internet Explorer Mobile'\n        } else if (_includes(user_agent, 'SamsungBrowser/')) {\n            // https://developer.samsung.com/internet/user-agent-string-format\n            return 'Samsung Internet'\n        } else if (_includes(user_agent, 'Edge') || _includes(user_agent, 'Edg/')) {\n            return 'Microsoft Edge'\n        } else if (_includes(user_agent, 'FBIOS')) {\n            return 'Facebook Mobile'\n        } else if (_includes(user_agent, 'Chrome')) {\n            return 'Chrome'\n        } else if (_includes(user_agent, 'CriOS')) {\n            return 'Chrome iOS'\n        } else if (_includes(user_agent, 'UCWEB') || _includes(user_agent, 'UCBrowser')) {\n            return 'UC Browser'\n        } else if (_includes(user_agent, 'FxiOS')) {\n            return 'Firefox iOS'\n        } else if (_includes(vendor, 'Apple')) {\n            if (_includes(user_agent, 'Mobile')) {\n                return 'Mobile Safari'\n            }\n            return 'Safari'\n        } else if (_includes(user_agent, 'Android')) {\n            return 'Android Mobile'\n        } else if (_includes(user_agent, 'Konqueror')) {\n            return 'Konqueror'\n        } else if (_includes(user_agent, 'Firefox')) {\n            return 'Firefox'\n        } else if (_includes(user_agent, 'MSIE') || _includes(user_agent, 'Trident/')) {\n            return 'Internet Explorer'\n        } else if (_includes(user_agent, 'Gecko')) {\n            return 'Mozilla'\n        } else {\n            return ''\n        }\n    },\n\n    /**\n     * This function detects which browser version is running this script,\n     * parsing major and minor version (e.g., 42.1). User agent strings from:\n     * http://www.useragentstring.com/pages/useragentstring.php\n     */\n    browserVersion: function (userAgent: string, vendor: string, opera: string): number | null {\n        const browser = _info.browser(userAgent, vendor, opera)\n        const versionRegexs = {\n            'Internet Explorer Mobile': /rv:(\\d+(\\.\\d+)?)/,\n            'Microsoft Edge': /Edge?\\/(\\d+(\\.\\d+)?)/,\n            Chrome: /Chrome\\/(\\d+(\\.\\d+)?)/,\n            'Chrome iOS': /CriOS\\/(\\d+(\\.\\d+)?)/,\n            'UC Browser': /(UCBrowser|UCWEB)\\/(\\d+(\\.\\d+)?)/,\n            Safari: /Version\\/(\\d+(\\.\\d+)?)/,\n            'Mobile Safari': /Version\\/(\\d+(\\.\\d+)?)/,\n            Opera: /(Opera|OPR)\\/(\\d+(\\.\\d+)?)/,\n            Firefox: /Firefox\\/(\\d+(\\.\\d+)?)/,\n            'Firefox iOS': /FxiOS\\/(\\d+(\\.\\d+)?)/,\n            Konqueror: /Konqueror:(\\d+(\\.\\d+)?)/,\n            BlackBerry: /BlackBerry (\\d+(\\.\\d+)?)/,\n            'Android Mobile': /android\\s(\\d+(\\.\\d+)?)/,\n            'Samsung Internet': /SamsungBrowser\\/(\\d+(\\.\\d+)?)/,\n            'Internet Explorer': /(rv:|MSIE )(\\d+(\\.\\d+)?)/,\n            Mozilla: /rv:(\\d+(\\.\\d+)?)/,\n        }\n        const regex: RegExp | undefined = versionRegexs[browser as keyof typeof versionRegexs]\n        if (regex === undefined) {\n            return null\n        }\n        const matches = userAgent.match(regex)\n        if (!matches) {\n            return null\n        }\n        return parseFloat(matches[matches.length - 2])\n    },\n\n    browserLanguage: function (): string {\n        return (\n            navigator.language || // Any modern browser\n            (navigator as Record<string, any>).userLanguage // IE11\n        )\n    },\n\n    os: function (): string {\n        const a = userAgent\n        if (/Windows/i.test(a)) {\n            if (/Phone/.test(a) || /WPDesktop/.test(a)) {\n                return 'Windows Phone'\n            }\n            return 'Windows'\n        } else if (/(iPhone|iPad|iPod)/.test(a)) {\n            return 'iOS'\n        } else if (/Android/.test(a)) {\n            return 'Android'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(a)) {\n            return 'BlackBerry'\n        } else if (/Mac/i.test(a)) {\n            return 'Mac OS X'\n        } else if (/Linux/.test(a)) {\n            return 'Linux'\n        } else if (/CrOS/.test(a)) {\n            return 'Chrome OS'\n        } else {\n            return ''\n        }\n    },\n\n    device: function (user_agent: string): string {\n        if (/Windows Phone/i.test(user_agent) || /WPDesktop/.test(user_agent)) {\n            return 'Windows Phone'\n        } else if (/iPad/.test(user_agent)) {\n            return 'iPad'\n        } else if (/iPod/.test(user_agent)) {\n            return 'iPod Touch'\n        } else if (/iPhone/.test(user_agent)) {\n            return 'iPhone'\n        } else if (/(BlackBerry|PlayBook|BB10)/i.test(user_agent)) {\n            return 'BlackBerry'\n        } else if (/Android/.test(user_agent) && !/Mobile/.test(user_agent)) {\n            return 'Android Tablet'\n        } else if (/Android/.test(user_agent)) {\n            return 'Android'\n        } else {\n            return ''\n        }\n    },\n\n    deviceType: function (user_agent: string): string {\n        const device = this.device(user_agent)\n        if (device === 'iPad' || device === 'Android Tablet') {\n            return 'Tablet'\n        } else if (device) {\n            return 'Mobile'\n        } else {\n            return 'Desktop'\n        }\n    },\n\n    referringDomain: function (referrer: string): string {\n        const split = referrer.split('/')\n        if (split.length >= 3) {\n            return split[2]\n        }\n        return ''\n    },\n\n    properties: function (): Properties {\n        return _extend(\n            _strip_empty_properties({\n                $os: _info.os(),\n                $browser: _info.browser(userAgent, navigator.vendor, (window as any).opera),\n                $device: _info.device(userAgent),\n                $device_type: _info.deviceType(userAgent),\n            }),\n            {\n                $current_url: window.location.href,\n                $host: window.location.host,\n                $pathname: window.location.pathname,\n                $browser_version: _info.browserVersion(userAgent, navigator.vendor, (window as any).opera),\n                $browser_language: _info.browserLanguage(),\n                $screen_height: window.screen.height,\n                $screen_width: window.screen.width,\n                $viewport_height: window.innerHeight,\n                $viewport_width: window.innerWidth,\n                $lib: 'web',\n                $lib_version: Config.LIB_VERSION,\n                $insert_id: Math.random().toString(36).substring(2, 10) + Math.random().toString(36).substring(2, 10),\n                $time: _timestamp() / 1000, // epoch time in seconds\n            }\n        )\n    },\n\n    people_properties: function (): Properties {\n        return _extend(\n            _strip_empty_properties({\n                $os: _info.os(),\n                $browser: _info.browser(userAgent, navigator.vendor, (window as any).opera),\n            }),\n            {\n                $browser_version: _info.browserVersion(userAgent, navigator.vendor, (window as any).opera),\n            }\n        )\n    },\n}\n\nexport { win as window, userAgent, logger, document }\n","/*\n * Get the className of an element, accounting for edge cases where element.className is an object\n * @param {Element} el - element to get the className of\n * @returns {string} the element's class\n */\nimport { AutocaptureConfig } from 'types'\nimport { _each, _includes, _isUndefined, _trim } from './utils'\n\nexport function getClassName(el: Element): string {\n    switch (typeof el.className) {\n        case 'string':\n            return el.className\n        // TODO: when is this ever used?\n        case 'object': // handle cases where className might be SVGAnimatedString or some other type\n            return ('baseVal' in el.className ? (el.className as any).baseVal : null) || el.getAttribute('class') || ''\n        default:\n            // future proof\n            return ''\n    }\n}\n\n/*\n * Get the direct text content of an element, protecting against sensitive data collection.\n * Concats textContent of each of the element's text node children; this avoids potential\n * collection of sensitive data that could happen if we used element.textContent and the\n * element had sensitive child elements, since element.textContent includes child content.\n * Scrubs values that look like they could be sensitive (i.e. cc or ssn number).\n * @param {Element} el - element to get the text of\n * @returns {string} the element's direct text content\n */\nexport function getSafeText(el: Element): string {\n    let elText = ''\n\n    if (shouldCaptureElement(el) && !isSensitiveElement(el) && el.childNodes && el.childNodes.length) {\n        _each(el.childNodes, function (child) {\n            if (isTextNode(child) && child.textContent) {\n                elText += _trim(child.textContent)\n                    // scrub potentially sensitive values\n                    .split(/(\\s+)/)\n                    .filter(shouldCaptureValue)\n                    .join('')\n                    // normalize whitespace\n                    .replace(/[\\r\\n]/g, ' ')\n                    .replace(/[ ]+/g, ' ')\n                    // truncate\n                    .substring(0, 255)\n            }\n        })\n    }\n\n    return _trim(elText)\n}\n\n/*\n * Check whether an element has nodeType Node.ELEMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isElementNode(el: Element | undefined | null): el is HTMLElement {\n    return !!el && el.nodeType === 1 // Node.ELEMENT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element is of a given tag type.\n * Due to potential reference discrepancies (such as the webcomponents.js polyfill),\n * we want to match tagNames instead of specific references because something like\n * element === document.body won't always work because element might not be a native\n * element.\n * @param {Element} el - element to check\n * @param {string} tag - tag name (e.g., \"div\")\n * @returns {boolean} whether el is of the given tag type\n */\nexport function isTag(el: Element | undefined | null, tag: string): el is HTMLElement {\n    return !!el && !!el.tagName && el.tagName.toLowerCase() === tag.toLowerCase()\n}\n\n/*\n * Check whether an element has nodeType Node.TEXT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isTextNode(el: Element | undefined | null): el is HTMLElement {\n    return !!el && el.nodeType === 3 // Node.TEXT_NODE - use integer constant for browser portability\n}\n\n/*\n * Check whether an element has nodeType Node.DOCUMENT_FRAGMENT_NODE\n * @param {Element} el - element to check\n * @returns {boolean} whether el is of the correct nodeType\n */\nexport function isDocumentFragment(el: Element | ParentNode | undefined | null): el is DocumentFragment {\n    return !!el && el.nodeType === 11 // Node.DOCUMENT_FRAGMENT_NODE - use integer constant for browser portability\n}\n\nexport const autocaptureCompatibleElements = ['a', 'button', 'form', 'input', 'select', 'textarea', 'label']\n/*\n * Check whether a DOM event should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @param {Event} event - event to check\n * @param {Object} autocaptureConfig - autocapture config\n * @returns {boolean} whether the event should be captured\n */\nexport function shouldCaptureDomEvent(\n    el: Element,\n    event: Event,\n    autocaptureConfig: AutocaptureConfig | undefined = undefined\n): boolean {\n    if (!el || isTag(el, 'html') || !isElementNode(el)) {\n        return false\n    }\n\n    if (autocaptureConfig?.url_allowlist) {\n        const url = window.location.href\n        const allowlist = autocaptureConfig.url_allowlist\n        if (allowlist && !allowlist.some((regex) => url.match(regex))) {\n            return false\n        }\n    }\n\n    if (autocaptureConfig?.dom_event_allowlist) {\n        const allowlist = autocaptureConfig.dom_event_allowlist\n        if (allowlist && !allowlist.some((eventType) => event.type === eventType)) {\n            return false\n        }\n    }\n\n    if (autocaptureConfig?.element_allowlist) {\n        const allowlist = autocaptureConfig.element_allowlist\n        if (allowlist && !allowlist.some((elementType) => el.tagName.toLowerCase() === elementType)) {\n            return false\n        }\n    }\n\n    if (autocaptureConfig?.css_selector_allowlist) {\n        const allowlist = autocaptureConfig.css_selector_allowlist\n        if (allowlist && !allowlist.some((selector) => el.matches(selector))) {\n            return false\n        }\n    }\n\n    let parentIsUsefulElement = false\n    const targetElementList: Element[] = [el] // TODO: remove this var, it's never queried\n    let parentNode: Element | boolean = true\n    let curEl: Element = el\n    while (curEl.parentNode && !isTag(curEl, 'body')) {\n        // If element is a shadow root, we skip it\n        if (isDocumentFragment(curEl.parentNode)) {\n            targetElementList.push((curEl.parentNode as any).host)\n            curEl = (curEl.parentNode as any).host\n            continue\n        }\n        parentNode = (curEl.parentNode as Element) || false\n        if (!parentNode) break\n        if (autocaptureCompatibleElements.indexOf(parentNode.tagName.toLowerCase()) > -1) {\n            parentIsUsefulElement = true\n        } else {\n            const compStyles = window.getComputedStyle(parentNode)\n            if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer') {\n                parentIsUsefulElement = true\n            }\n        }\n\n        targetElementList.push(parentNode)\n        curEl = parentNode\n    }\n\n    const compStyles = window.getComputedStyle(el)\n    if (compStyles && compStyles.getPropertyValue('cursor') === 'pointer' && event.type === 'click') {\n        return true\n    }\n\n    const tag = el.tagName.toLowerCase()\n    switch (tag) {\n        case 'html':\n            return false\n        case 'form':\n            return event.type === 'submit'\n        case 'input':\n            return event.type === 'change' || event.type === 'click'\n        case 'select':\n        case 'textarea':\n            return event.type === 'change' || event.type === 'click'\n        default:\n            if (parentIsUsefulElement) return event.type === 'click'\n            return (\n                event.type === 'click' &&\n                (autocaptureCompatibleElements.indexOf(tag) > -1 || el.getAttribute('contenteditable') === 'true')\n            )\n    }\n}\n\n/*\n * Check whether a DOM element should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureElement(el: Element): boolean {\n    for (let curEl = el; curEl.parentNode && !isTag(curEl, 'body'); curEl = curEl.parentNode as Element) {\n        const classes = getClassName(curEl).split(' ')\n        if (_includes(classes, 'ph-sensitive') || _includes(classes, 'ph-no-capture')) {\n            return false\n        }\n    }\n\n    if (_includes(getClassName(el).split(' '), 'ph-include')) {\n        return true\n    }\n\n    // don't include hidden or password fields\n    const type = (el as HTMLInputElement).type || ''\n    if (typeof type === 'string') {\n        // it's possible for el.type to be a DOM element if el is a form with a child input[name=\"type\"]\n        switch (type.toLowerCase()) {\n            case 'hidden':\n                return false\n            case 'password':\n                return false\n        }\n    }\n\n    // filter out data from fields that look like sensitive fields\n    const name = (el as HTMLInputElement).name || el.id || ''\n    // See https://github.com/posthog/posthog-js/issues/165\n    // Under specific circumstances a bug caused .replace to be called on a DOM element\n    // instead of a string, removing the element from the page. Ensure this issue is mitigated.\n    if (typeof name === 'string') {\n        // it's possible for el.name or el.id to be a DOM element if el is a form with a child input[name=\"name\"]\n        const sensitiveNameRegex =\n            /^cc|cardnum|ccnum|creditcard|csc|cvc|cvv|exp|pass|pwd|routing|seccode|securitycode|securitynum|socialsec|socsec|ssn/i\n        if (sensitiveNameRegex.test(name.replace(/[^a-zA-Z0-9]/g, ''))) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether a DOM element is 'sensitive' and we should only capture limited data\n * @param {Element} el - element to check\n * @returns {boolean} whether the element should be captured\n */\nexport function isSensitiveElement(el: Element): boolean {\n    // don't send data from inputs or similar elements since there will always be\n    // a risk of clientside javascript placing sensitive data in attributes\n    const allowedInputTypes = ['button', 'checkbox', 'submit', 'reset']\n    if (\n        (isTag(el, 'input') && !allowedInputTypes.includes((el as HTMLInputElement).type)) ||\n        isTag(el, 'select') ||\n        isTag(el, 'textarea') ||\n        el.getAttribute('contenteditable') === 'true'\n    ) {\n        return true\n    }\n    return false\n}\n\n/*\n * Check whether a string value should be \"captured\" or if it may contain sentitive data\n * using a variety of heuristics.\n * @param {string} value - string value to check\n * @returns {boolean} whether the element should be captured\n */\nexport function shouldCaptureValue(value: string): boolean {\n    if (value === null || _isUndefined(value)) {\n        return false\n    }\n\n    if (typeof value === 'string') {\n        value = _trim(value)\n\n        // check to see if input value looks like a credit card number\n        // see: https://www.safaribooksonline.com/library/view/regular-expressions-cookbook/9781449327453/ch04s20.html\n        const ccRegex =\n            /^(?:(4[0-9]{12}(?:[0-9]{3})?)|(5[1-5][0-9]{14})|(6(?:011|5[0-9]{2})[0-9]{12})|(3[47][0-9]{13})|(3(?:0[0-5]|[68][0-9])[0-9]{11})|((?:2131|1800|35[0-9]{3})[0-9]{11}))$/\n        if (ccRegex.test((value || '').replace(/[- ]/g, ''))) {\n            return false\n        }\n\n        // check to see if input value looks like a social security number\n        const ssnRegex = /(^\\d{3}-?\\d{2}-?\\d{4}$)/\n        if (ssnRegex.test(value)) {\n            return false\n        }\n    }\n\n    return true\n}\n\n/*\n * Check whether an attribute name is an Angular style attr (either _ngcontent or _nghost)\n * These update on each build and lead to noise in the element chain\n * More details on the attributes here: https://angular.io/guide/view-encapsulation\n * @param {string} attributeName - string value to check\n * @returns {boolean} whether the element is an angular tag\n */\nexport function isAngularStyleAttr(attributeName: string): boolean {\n    if (typeof attributeName === 'string') {\n        return attributeName.substring(0, 10) === '_ngcontent' || attributeName.substring(0, 7) === '_nghost'\n    }\n    return false\n}\n\nexport function loadScript(scriptUrlToLoad: string, callback: (event: Event) => void): void {\n    const scriptTag = document.createElement('script')\n    scriptTag.type = 'text/javascript'\n    scriptTag.src = scriptUrlToLoad\n    scriptTag.onload = callback\n\n    const scripts = document.getElementsByTagName('script')\n    if (scripts.length > 0) {\n        scripts[0].parentNode?.insertBefore(scriptTag, scripts[0])\n    } else {\n        document.body.appendChild(scriptTag)\n    }\n}\n","// Naive rage click implementation: If mouse has not moved than RAGE_CLICK_THRESHOLD_PX\n// over RAGE_CLICK_CLICK_COUNT clicks with max RAGE_CLICK_TIMEOUT_MS between clicks, it's\n// counted as a rage click\nimport { PostHog } from '../posthog-core'\n\nconst RAGE_CLICK_THRESHOLD_PX = 30\nconst RAGE_CLICK_TIMEOUT_MS = 1000\nconst RAGE_CLICK_CLICK_COUNT = 3\n\nexport default class RageClick {\n    instance: PostHog\n    clicks: { x: number; y: number; timestamp: number }[]\n    enabled: boolean\n\n    constructor(instance: PostHog, enabled = instance.get_config('rageclick')) {\n        this.clicks = []\n        this.instance = instance\n        this.enabled = enabled\n    }\n\n    click(x: number, y: number, timestamp: number) {\n        if (!this.enabled) {\n            return\n        }\n\n        const lastClick = this.clicks[this.clicks.length - 1]\n        if (\n            lastClick &&\n            Math.abs(x - lastClick.x) + Math.abs(y - lastClick.y) < RAGE_CLICK_THRESHOLD_PX &&\n            timestamp - lastClick.timestamp < RAGE_CLICK_TIMEOUT_MS\n        ) {\n            this.clicks.push({ x, y, timestamp })\n\n            if (this.clicks.length === RAGE_CLICK_CLICK_COUNT) {\n                this.instance.capture('$rageclick')\n            }\n        } else {\n            this.clicks = [{ x, y, timestamp }]\n        }\n    }\n}\n","import {\n    _bind_instance_methods,\n    _each,\n    _extend,\n    _includes,\n    _isFunction,\n    _isUndefined,\n    _register_event,\n    _safewrap_instance_methods,\n    logger,\n} from './utils'\nimport {\n    getClassName,\n    getSafeText,\n    isElementNode,\n    isSensitiveElement,\n    isTag,\n    isTextNode,\n    shouldCaptureDomEvent,\n    shouldCaptureElement,\n    shouldCaptureValue,\n    autocaptureCompatibleElements,\n    isAngularStyleAttr,\n    isDocumentFragment,\n} from './autocapture-utils'\nimport RageClick from './extensions/rageclick'\nimport { AutocaptureConfig, AutoCaptureCustomProperty, DecideResponse, Properties } from './types'\nimport { PostHog } from './posthog-core'\n\nconst autocapture = {\n    _initializedTokens: [] as string[],\n\n    _previousElementSibling: function (el: Element): Element | null {\n        if (el.previousElementSibling) {\n            return el.previousElementSibling\n        } else {\n            let _el: Element | null = el\n            do {\n                _el = _el.previousSibling as Element | null // resolves to ChildNode->Node, which is Element's parent class\n            } while (_el && !isElementNode(_el))\n            return _el\n        }\n    },\n\n    _getPropertiesFromElement: function (elem: Element, maskInputs: boolean, maskText: boolean): Properties {\n        const tag_name = elem.tagName.toLowerCase()\n        const props: Properties = {\n            tag_name: tag_name,\n        }\n        if (autocaptureCompatibleElements.indexOf(tag_name) > -1 && !maskText) {\n            props['$el_text'] = getSafeText(elem)\n        }\n\n        const classes = getClassName(elem)\n        if (classes.length > 0)\n            props['classes'] = classes.split(' ').filter(function (c) {\n                return c !== ''\n            })\n\n        _each(elem.attributes, function (attr: Attr) {\n            // Only capture attributes we know are safe\n            if (isSensitiveElement(elem) && ['name', 'id', 'class'].indexOf(attr.name) === -1) return\n\n            if (!maskInputs && shouldCaptureValue(attr.value) && !isAngularStyleAttr(attr.name)) {\n                props['attr__' + attr.name] = attr.value\n            }\n        })\n\n        let nthChild = 1\n        let nthOfType = 1\n        let currentElem: Element | null = elem\n        while ((currentElem = this._previousElementSibling(currentElem))) {\n            // eslint-disable-line no-cond-assign\n            nthChild++\n            if (currentElem.tagName === elem.tagName) {\n                nthOfType++\n            }\n        }\n        props['nth_child'] = nthChild\n        props['nth_of_type'] = nthOfType\n\n        return props\n    },\n\n    _getDefaultProperties: function (eventType: string): Properties {\n        return {\n            $event_type: eventType,\n            $ce_version: 1,\n        }\n    },\n\n    _extractCustomPropertyValue: function (customProperty: AutoCaptureCustomProperty): string {\n        const propValues: string[] = []\n        _each(document.querySelectorAll(customProperty['css_selector']), function (matchedElem) {\n            let value\n\n            if (['input', 'select'].indexOf(matchedElem.tagName.toLowerCase()) > -1) {\n                value = matchedElem['value']\n            } else if (matchedElem['textContent']) {\n                value = matchedElem['textContent']\n            }\n\n            if (shouldCaptureValue(value)) {\n                propValues.push(value)\n            }\n        })\n        return propValues.join(', ')\n    },\n\n    // TODO: delete custom_properties after changeless typescript refactor\n    _getCustomProperties: function (targetElementList: Element[]): Properties {\n        const props: Properties = {} // will be deleted\n        _each(this._customProperties, (customProperty) => {\n            _each(customProperty['event_selectors'], (eventSelector) => {\n                const eventElements = document.querySelectorAll(eventSelector)\n                _each(eventElements, (eventElement) => {\n                    if (_includes(targetElementList, eventElement) && shouldCaptureElement(eventElement)) {\n                        props[customProperty['name']] = this._extractCustomPropertyValue(customProperty)\n                    }\n                })\n            })\n        })\n        return props\n    },\n\n    _getEventTarget: function (e: Event): Element | null {\n        // https://developer.mozilla.org/en-US/docs/Web/API/Event/target#Compatibility_notes\n        if (typeof e.target === 'undefined') {\n            return (e.srcElement as Element) || null\n        } else {\n            if ((e.target as HTMLElement)?.shadowRoot) {\n                return (e.composedPath()[0] as Element) || null\n            }\n            return (e.target as Element) || null\n        }\n    },\n\n    _captureEvent: function (e: Event, instance: PostHog): boolean | void {\n        /*** Don't mess with this code without running IE8 tests on it ***/\n        let target = this._getEventTarget(e)\n        if (isTextNode(target)) {\n            // defeat Safari bug (see: http://www.quirksmode.org/js/events_properties.html)\n            target = (target.parentNode || null) as Element | null\n        }\n\n        if (e.type === 'click' && e instanceof MouseEvent) {\n            this.rageclicks?.click(e.clientX, e.clientY, new Date().getTime())\n        }\n\n        if (target && shouldCaptureDomEvent(target, e, this.config)) {\n            const targetElementList = [target]\n            let curEl = target\n            while (curEl.parentNode && !isTag(curEl, 'body')) {\n                if (isDocumentFragment(curEl.parentNode)) {\n                    targetElementList.push((curEl.parentNode as any).host)\n                    curEl = (curEl.parentNode as any).host\n                    continue\n                }\n                targetElementList.push(curEl.parentNode as Element)\n                curEl = curEl.parentNode as Element\n            }\n\n            const elementsJson: Properties[] = []\n            let href,\n                explicitNoCapture = false\n            _each(targetElementList, (el) => {\n                const shouldCaptureEl = shouldCaptureElement(el)\n\n                // if the element or a parent element is an anchor tag\n                // include the href as a property\n                if (el.tagName.toLowerCase() === 'a') {\n                    href = el.getAttribute('href')\n                    href = shouldCaptureEl && shouldCaptureValue(href) && href\n                }\n\n                // allow users to programmatically prevent capturing of elements by adding class 'ph-no-capture'\n                const classes = getClassName(el).split(' ')\n                if (_includes(classes, 'ph-no-capture')) {\n                    explicitNoCapture = true\n                }\n\n                elementsJson.push(\n                    this._getPropertiesFromElement(\n                        el,\n                        instance.get_config('mask_all_element_attributes'),\n                        instance.get_config('mask_all_text')\n                    )\n                )\n            })\n\n            if (!instance.get_config('mask_all_text')) {\n                elementsJson[0]['$el_text'] = getSafeText(target)\n            }\n\n            if (href) {\n                elementsJson[0]['attr__href'] = href\n            }\n\n            if (explicitNoCapture) {\n                return false\n            }\n\n            const props = _extend(\n                this._getDefaultProperties(e.type),\n                {\n                    $elements: elementsJson,\n                },\n                this._getCustomProperties(targetElementList)\n            )\n\n            instance.capture('$autocapture', props)\n            return true\n        }\n    },\n\n    // only reason is to stub for unit tests\n    // since you can't override window.location props\n    _navigate: function (href: string): void {\n        window.location.href = href\n    },\n\n    _addDomEventHandlers: function (instance: PostHog): void {\n        const handler = (e: Event) => {\n            e = e || window.event\n            this._captureEvent(e, instance)\n        }\n        _register_event(document, 'submit', handler, false, true)\n        _register_event(document, 'change', handler, false, true)\n        _register_event(document, 'click', handler, false, true)\n    },\n\n    _customProperties: [] as AutoCaptureCustomProperty[],\n    rageclicks: null as RageClick | null,\n    config: undefined as AutocaptureConfig | undefined,\n\n    init: function (instance: PostHog): void {\n        if (typeof instance.__autocapture !== 'boolean') {\n            this.config = instance.__autocapture\n        }\n\n        // precompile the regex\n        if (this.config?.url_allowlist) {\n            this.config.url_allowlist = this.config.url_allowlist.map((url) => new RegExp(url))\n        }\n\n        this.rageclicks = new RageClick(instance)\n    },\n\n    afterDecideResponse: function (response: DecideResponse, instance: PostHog): void {\n        const token = instance.get_config('token')\n        if (this._initializedTokens.indexOf(token) > -1) {\n            logger.log('autocapture already initialized for token \"' + token + '\"')\n            return\n        }\n\n        this._initializedTokens.push(token)\n\n        if (\n            response &&\n            response['config'] &&\n            response['config']['enable_collect_everything'] &&\n            instance.get_config('autocapture')\n        ) {\n            // TODO: delete custom_properties after changeless typescript refactor\n            if (response['custom_properties']) {\n                this._customProperties = response['custom_properties']\n            }\n            this._addDomEventHandlers(instance)\n        } else {\n            instance['__autocapture'] = false\n        }\n    },\n\n    // this is a mechanism to ramp up CE with no server-side interaction.\n    // when CE is active, every page load results in a decide request. we\n    // need to gently ramp this up so we don't overload decide. this decides\n    // deterministically if CE is enabled for this project by modding the char\n    // value of the project token.\n    enabledForProject: function (\n        token: string | null | undefined,\n        numBuckets: number,\n        numEnabledBuckets: number\n    ): boolean {\n        if (!token) {\n            return true\n        }\n        numBuckets = !_isUndefined(numBuckets) ? numBuckets : 10\n        numEnabledBuckets = !_isUndefined(numEnabledBuckets) ? numEnabledBuckets : 10\n        let charCodeSum = 0\n        for (let i = 0; i < token.length; i++) {\n            charCodeSum += token.charCodeAt(i)\n        }\n        return charCodeSum % numBuckets < numEnabledBuckets\n    },\n\n    isBrowserSupported: function (): boolean {\n        return _isFunction(document.querySelectorAll)\n    },\n}\n\n_bind_instance_methods(autocapture)\n_safewrap_instance_methods(autocapture)\n\nexport { autocapture }\n","import { _extend, logger } from './utils'\nimport { PersistentStore, Properties } from './types'\nimport Config from './config'\n\nconst DOMAIN_MATCH_REGEX = /[a-z0-9][a-z0-9-]+\\.[a-z.]{2,6}$/i\n\n// Methods partially borrowed from quirksmode.org/js/cookies.html\nexport const cookieStore: PersistentStore = {\n    is_supported: () => true,\n\n    error: function (msg) {\n        logger.error('cookieStore error: ' + msg)\n    },\n\n    get: function (name) {\n        try {\n            const nameEQ = name + '='\n            const ca = document.cookie.split(';')\n            for (let i = 0; i < ca.length; i++) {\n                let c = ca[i]\n                while (c.charAt(0) == ' ') {\n                    c = c.substring(1, c.length)\n                }\n                if (c.indexOf(nameEQ) === 0) {\n                    return decodeURIComponent(c.substring(nameEQ.length, c.length))\n                }\n            }\n        } catch (err) {}\n        return null\n    },\n\n    parse: function (name) {\n        let cookie\n        try {\n            cookie = JSON.parse(cookieStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return cookie\n    },\n\n    set: function (name, value, days, cross_subdomain, is_secure) {\n        try {\n            let cdomain = '',\n                expires = '',\n                secure = ''\n\n            if (cross_subdomain) {\n                const matches = document.location.hostname.match(DOMAIN_MATCH_REGEX),\n                    domain = matches ? matches[0] : ''\n\n                cdomain = domain ? '; domain=.' + domain : ''\n            }\n\n            if (days) {\n                const date = new Date()\n                date.setTime(date.getTime() + days * 24 * 60 * 60 * 1000)\n                expires = '; expires=' + date.toUTCString()\n            }\n\n            if (is_secure) {\n                secure = '; secure'\n            }\n\n            const new_cookie_val =\n                name + '=' + encodeURIComponent(JSON.stringify(value)) + expires + '; path=/' + cdomain + secure\n            document.cookie = new_cookie_val\n            return new_cookie_val\n        } catch (err) {\n            return\n        }\n    },\n\n    remove: function (name, cross_subdomain) {\n        try {\n            cookieStore.set(name, '', -1, cross_subdomain)\n        } catch (err) {\n            return\n        }\n    },\n}\n\nlet _localStorage_supported: boolean | null = null\n\nexport const localStore: PersistentStore = {\n    is_supported: function () {\n        if (_localStorage_supported !== null) {\n            return _localStorage_supported\n        }\n\n        let supported = true\n        if (window) {\n            try {\n                const key = '__mplssupport__',\n                    val = 'xyz'\n                localStore.set(key, val)\n                if (localStore.get(key) !== '\"xyz\"') {\n                    supported = false\n                }\n                localStore.remove(key)\n            } catch (err) {\n                supported = false\n            }\n        } else {\n            supported = false\n        }\n        if (!supported) {\n            logger.error('localStorage unsupported; falling back to cookie store')\n        }\n\n        _localStorage_supported = supported\n        return supported\n    },\n\n    error: function (msg) {\n        logger.error('localStorage error: ' + msg)\n    },\n\n    get: function (name) {\n        try {\n            return window.localStorage.getItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n        return null\n    },\n\n    parse: function (name) {\n        try {\n            return JSON.parse(localStore.get(name)) || {}\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value) {\n        try {\n            window.localStorage.setItem(name, JSON.stringify(value))\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n\n    remove: function (name) {\n        try {\n            window.localStorage.removeItem(name)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n}\n\n// Use localstorage for most data but still use cookie for distinct_id\n// This solves issues with cookies having too much data in them causing headers too large\n// Also makes sure we don't have to send a ton of data to the server\nexport const localPlusCookieStore: PersistentStore = {\n    ...localStore,\n    parse: function (name) {\n        try {\n            let extend: Properties = {}\n            try {\n                // See if there's a cookie stored with data.\n                extend = cookieStore.parse(name) || {}\n                if (extend['distinct_id']) {\n                    cookieStore.set(name, { distinct_id: extend['distinct_id'] })\n                }\n            } catch (err) {}\n            const value = _extend(extend, JSON.parse(localStore.get(name) || '{}'))\n            localStore.set(name, value)\n            return value\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value, days, cross_subdomain, is_secure) {\n        try {\n            localStore.set(name, value)\n            if (value.distinct_id) {\n                cookieStore.set(name, { distinct_id: value.distinct_id }, days, cross_subdomain, is_secure)\n            }\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n\n    remove: function (name, cross_subdomain) {\n        try {\n            window.localStorage.removeItem(name)\n            cookieStore.remove(name, cross_subdomain)\n        } catch (err) {\n            localStore.error(err)\n        }\n    },\n}\n\nconst memoryStorage: Properties = {}\n\n// Storage that only lasts the length of the pageview if we don't want to use cookies\nexport const memoryStore: PersistentStore = {\n    is_supported: function () {\n        return true\n    },\n\n    error: function (msg) {\n        logger.error('memoryStorage error: ' + msg)\n    },\n\n    get: function (name) {\n        return memoryStorage[name] || null\n    },\n\n    parse: function (name) {\n        return memoryStorage[name] || null\n    },\n\n    set: function (name, value) {\n        memoryStorage[name] = value\n    },\n\n    remove: function (name) {\n        delete memoryStorage[name]\n    },\n}\n\nlet sessionStorageSupported: boolean | null = null\nexport const resetSessionStorageSupported = () => {\n    sessionStorageSupported = null\n}\n// Storage that only lasts the length of a tab/window. Survives page refreshes\nexport const sessionStore: PersistentStore = {\n    is_supported: function () {\n        if (sessionStorageSupported !== null) {\n            return sessionStorageSupported\n        }\n        sessionStorageSupported = true\n        if (window) {\n            try {\n                const key = '__support__',\n                    val = 'xyz'\n                sessionStore.set(key, val)\n                if (sessionStore.get(key) !== '\"xyz\"') {\n                    sessionStorageSupported = false\n                }\n                sessionStore.remove(key)\n            } catch (err) {\n                sessionStorageSupported = false\n            }\n        } else {\n            sessionStorageSupported = false\n        }\n        return sessionStorageSupported\n    },\n\n    error: function (msg) {\n        if (Config.DEBUG) {\n            logger.error('sessionStorage error: ', msg)\n        }\n    },\n\n    get: function (name) {\n        try {\n            return window.sessionStorage.getItem(name)\n        } catch (err) {\n            sessionStore.error(err)\n        }\n        return null\n    },\n\n    parse: function (name) {\n        try {\n            return JSON.parse(sessionStore.get(name)) || null\n        } catch (err) {\n            // noop\n        }\n        return null\n    },\n\n    set: function (name, value) {\n        try {\n            window.sessionStorage.setItem(name, JSON.stringify(value))\n        } catch (err) {\n            sessionStore.error(err)\n        }\n    },\n\n    remove: function (name) {\n        try {\n            window.sessionStorage.removeItem(name)\n        } catch (err) {\n            sessionStore.error(err)\n        }\n    },\n}\n","/**\n * GDPR utils\n *\n * The General Data Protection Regulation (GDPR) is a regulation in EU law on data protection\n * and privacy for all individuals within the European Union. It addresses the export of personal\n * data outside the EU. The GDPR aims primarily to give control back to citizens and residents\n * over their personal data and to simplify the regulatory environment for international business\n * by unifying the regulation within the EU.\n *\n * This set of utilities is intended to enable opt in/out functionality in the PostHog JS SDK.\n * These functions are used internally by the SDK and are not intended to be publicly exposed.\n */\n\nimport { _each, _includes, _isNumber, _isString, window } from './utils'\nimport { cookieStore, localStore, localPlusCookieStore } from './storage'\nimport { GDPROptions, PersistentStore } from './types'\nimport { PostHog } from './posthog-core'\n\n/**\n * A function used to capture a PostHog event (e.g. PostHogLib.capture)\n * @callback captureFunction\n * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n * @param {Function} [callback] If provided, the callback function will be called after capturing the event.\n */\n\n/** Public **/\n\nconst GDPR_DEFAULT_PERSISTENCE_PREFIX = '__ph_opt_in_out_'\n\n/**\n * Opt the user in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function optIn(token: string, options: GDPROptions): void {\n    _optInOut(true, token, options)\n}\n\n/**\n * Opt the user out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-out cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-out cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-out cookie is set as secure or not\n */\nexport function optOut(token: string, options: GDPROptions): void {\n    _optInOut(false, token, options)\n}\n\n/**\n * Check whether the user has opted in to data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {boolean} whether the user has opted in to the given opt type\n */\nexport function hasOptedIn(token: string, options: GDPROptions): boolean {\n    return _getStorageValue(token, options) === '1'\n}\n\n/**\n * Check whether the user has opted out of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the user has opted out of the given opt type\n */\nexport function hasOptedOut(token: string, options: Partial<GDPROptions>): boolean {\n    if (_hasDoNotTrackFlagOn(options)) {\n        return true\n    }\n    return _getStorageValue(token, options) === '0'\n}\n\n/**\n * Clear the user's opt in/out status of data capturing and cookies/localstorage for the given token\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistenceType] Persistence mechanism used - cookie or localStorage\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nexport function clearOptInOut(token: string, options: GDPROptions) {\n    options = options || {}\n    _getStorage(options).remove(_getStorageKey(token, options), !!options.crossSubdomainCookie)\n}\n\n/** Private **/\n\n/**\n * Get storage util\n * @param {Object} [options]\n * @param {string} [options.persistenceType]\n * @returns {object} either cookieStore or localStore\n */\nfunction _getStorage(options: GDPROptions): PersistentStore {\n    options = options || {}\n    if (options.persistenceType === 'localStorage') {\n        return localStore\n    }\n    if (options.persistenceType === 'localStorage+cookie') {\n        return localPlusCookieStore\n    }\n    return cookieStore\n}\n\n/**\n * Get the name of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the name of the cookie for the given opt type\n */\nfunction _getStorageKey(token: string, options: GDPROptions) {\n    options = options || {}\n    return (options.persistencePrefix || GDPR_DEFAULT_PERSISTENCE_PREFIX) + token\n}\n\n/**\n * Get the value of the cookie that is used for the given opt type (capturing, cookie, etc.)\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @returns {string} the value of the cookie for the given opt type\n */\nfunction _getStorageValue(token: string, options: GDPROptions) {\n    return _getStorage(options).get(_getStorageKey(token, options))\n}\n\n/**\n * Check whether the user has set the DNT/doNotTrack setting to true in their browser\n * @param {Object} [options]\n * @param {string} [options.window] - alternate window object to check; used to force various DNT settings in browser tests\n * @param {boolean} [options.respectDnt] - flag to take browser DNT setting into account\n * @returns {boolean} whether the DNT setting is true\n */\nfunction _hasDoNotTrackFlagOn(options: GDPROptions) {\n    if (options && options.respectDnt) {\n        const win = (options && options.window) || window\n        const nav = win['navigator'] || {}\n        let hasDntOn = false\n        _each(\n            [\n                nav['doNotTrack'], // standard\n                (nav as any)['msDoNotTrack'],\n                (win as any)['doNotTrack'],\n            ],\n            function (dntValue) {\n                if (_includes([true, 1, '1', 'yes'], dntValue)) {\n                    hasDntOn = true\n                }\n            }\n        )\n        return hasDntOn\n    }\n    return false\n}\n\n/**\n * Set cookie/localstorage for the user indicating that they are opted in or out for the given opt type\n * @param {boolean} optValue - whether to opt the user in or out for the given opt type\n * @param {string} token - PostHog project capturing token\n * @param {Object} [options]\n * @param {captureFunction} [options.capture] - function used for capturing a PostHog event to record the opt-in action\n * @param {string} [options.captureEventName] - event name to be used for capturing the opt-in action\n * @param {Object} [options.captureProperties] - set of properties to be captured along with the opt-in action\n * @param {string} [options.persistencePrefix=__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name\n * @param {Number} [options.cookieExpiration] - number of days until the opt-in cookie expires\n * @param {boolean} [options.crossSubdomainCookie] - whether the opt-in cookie is set as cross-subdomain or not\n * @param {boolean} [options.secureCookie] - whether the opt-in cookie is set as secure or not\n */\nfunction _optInOut(optValue: boolean, token: string, options: GDPROptions) {\n    if (!_isString(token) || !token.length) {\n        console.error('gdpr.' + (optValue ? 'optIn' : 'optOut') + ' called with an invalid token')\n        return\n    }\n\n    options = options || {}\n\n    _getStorage(options).set(\n        _getStorageKey(token, options),\n        optValue ? 1 : 0,\n        _isNumber(options.cookieExpiration) ? options.cookieExpiration : null,\n        options.crossSubdomainCookie,\n        options.secureCookie\n    )\n\n    if (options.capture && optValue) {\n        // only capture event if opting in (optValue=true)\n        options.capture(options.captureEventName || '$opt_in', options.captureProperties || {}, {\n            send_instantly: true,\n        })\n    }\n}\n\nexport function userOptedOut(posthog: PostHog, silenceErrors: boolean | undefined) {\n    let optedOut = false\n\n    try {\n        const token = posthog.get_config('token')\n        const respectDnt = posthog.get_config('respect_dnt')\n        const persistenceType = posthog.get_config('opt_out_capturing_persistence_type')\n        const persistencePrefix = posthog.get_config('opt_out_capturing_cookie_prefix') || undefined\n        const win = posthog.get_config('window' as any) as Window | undefined // used to override window during browser tests\n\n        if (token) {\n            // if there was an issue getting the token, continue method execution as normal\n            optedOut = hasOptedOut(token, {\n                respectDnt,\n                persistenceType,\n                persistencePrefix,\n                window: win,\n            })\n        }\n    } catch (err) {\n        if (!silenceErrors) {\n            console.error('Unexpected error when checking capturing opt-out status: ' + err)\n        }\n    }\n    return optedOut\n}\n\n/**\n * Wrap a method with a check for whether the user is opted out of data capturing and cookies/localstorage for the given token\n * If the user has opted out, return early instead of executing the method.\n * If a callback argument was provided, execute it passing the 0 error code.\n * @param {PostHog} posthog - the posthog instance\n * @param {function} method - wrapped method to be executed if the user has not opted out\n * @param silenceErrors\n * @returns {*} the result of executing method OR undefined if the user has opted out\n */\nexport function addOptOutCheck<M extends (...args: any[]) => any = (...args: any[]) => any>(\n    posthog: PostHog,\n    method: M,\n    silenceErrors?: boolean\n): M {\n    return function (...args) {\n        const optedOut = userOptedOut(posthog, silenceErrors)\n\n        if (!optedOut) {\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return method.apply(this, args)\n        }\n\n        const callback = args[args.length - 1]\n        if (typeof callback === 'function') {\n            callback(0)\n        }\n\n        return\n    } as M\n}\n","/* eslint camelcase: \"off\" */\nimport { addOptOutCheck } from './gdpr-utils'\nimport { _base64Encode, _copyAndTruncateStrings, _each, _encodeDates, _extend, _info, _isObject } from './utils'\nimport { PostHogConfig, Properties, RequestCallback } from './types'\nimport { PostHog } from './posthog-core'\n\nconst SET_ACTION = '$set'\nconst SET_ONCE_ACTION = '$set_once'\n\n/**\n * PostHog People Object\n * @constructor\n */\nclass PostHogPeople {\n    _posthog: PostHog\n\n    set: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n    set_once: (prop: string | Properties, to?: string, callback?: RequestCallback) => void\n\n    constructor(posthog: PostHog) {\n        this._posthog = posthog\n\n        /*\n         * Set properties on a user record.\n         *\n         * ### Usage:\n         *\n         *     posthog.people.set('gender', 'm');\n         *\n         *     // or set multiple properties at once\n         *     posthog.people.set({\n         *         'Company': 'Acme',\n         *         'Plan': 'Premium',\n         *         'Upgrade date': new Date()\n         *     });\n         *     // properties can be strings, integers, dates, or lists\n         *\n         * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n         * @param {*} [to] A value to set on the given property name\n         * @param {Function} [callback] If provided, the callback will be called after capturing the event.\n         */\n        this.set = addOptOutCheck(posthog, (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n            const data = this.set_action(prop, to)\n            if (_isObject(prop)) {\n                callback = to as any\n            }\n            // make sure that the referrer info has been updated and saved\n            if (this._get_config('save_referrer')) {\n                this._posthog.persistence.update_referrer_info(document.referrer)\n            }\n\n            // update $set object with default people properties\n            data[SET_ACTION] = _extend(\n                {},\n                _info.people_properties(),\n                this._posthog.persistence.get_referrer_info(),\n                data[SET_ACTION]\n            )\n            return this._send_request(data, callback)\n        })\n\n        /*\n         * Set properties on a user record, only if they do not yet exist.\n         * This will not overwrite previous people property values, unlike\n         * people.set().\n         *\n         * ### Usage:\n         *\n         *     posthog.people.set_once('First Login Date', new Date());\n         *\n         *     // or set multiple properties at once\n         *     posthog.people.set_once({\n         *         'First Login Date': new Date(),\n         *         'Starting Plan': 'Premium'\n         *     });\n         *\n         *     // properties can be strings, integers or dates\n         *\n         * @param {Object|String} prop If a string, this is the name of the property. If an object, this is an associative array of names and values.\n         * @param {*} [to] A value to set on the given property name\n         * @param {Function} [callback] If provided, the callback will be called after capturing the event.\n         */\n        this.set_once = addOptOutCheck(\n            posthog,\n            (prop: string | Properties, to?: string, callback?: RequestCallback) => {\n                const data = this.set_once_action(prop, to)\n                if (_isObject(prop)) {\n                    callback = to as any\n                }\n                return this._send_request(data, callback)\n            }\n        )\n    }\n\n    toString(): string {\n        return this._posthog.toString() + '.people'\n    }\n\n    _send_request(data: Properties, callback?: RequestCallback): Properties {\n        data['$token'] = this._get_config('token')\n        data['$distinct_id'] = this._posthog.get_distinct_id()\n        const device_id = this._posthog.get_property('$device_id')\n        const user_id = this._posthog.get_property('$user_id')\n        const had_persisted_distinct_id = this._posthog.get_property('$had_persisted_distinct_id')\n        if (device_id) {\n            data['$device_id'] = device_id\n        }\n        if (user_id) {\n            data['$user_id'] = user_id\n        }\n        if (had_persisted_distinct_id) {\n            data['$had_persisted_distinct_id'] = had_persisted_distinct_id\n        }\n\n        const date_encoded_data = _encodeDates(data)\n        const truncated_data = _copyAndTruncateStrings(\n            date_encoded_data,\n            this._get_config('properties_string_max_length')\n        )\n        const json_data = JSON.stringify(date_encoded_data)\n        const encoded_data = _base64Encode(json_data)\n\n        this._posthog._send_request(\n            this._get_config('api_host') + '/engage/',\n            { data: encoded_data },\n            {},\n            this._posthog._prepare_callback(callback, truncated_data) as RequestCallback\n        )\n\n        return truncated_data\n    }\n\n    _get_config<K extends keyof PostHogConfig>(conf_var: K): PostHogConfig[K] {\n        return this._posthog.get_config(conf_var)\n    }\n\n    _is_reserved_property(prop: string): boolean {\n        return (\n            prop === '$distinct_id' ||\n            prop === '$token' ||\n            prop === '$device_id' ||\n            prop === '$user_id' ||\n            prop === '$had_persisted_distinct_id'\n        )\n    }\n\n    // Internal methods for posthog.people API.\n    // These methods shouldn't involve network I/O.\n    private set_action(prop: string | Properties, to?: string): Properties {\n        return this.apiActionParser(SET_ACTION, prop, to)\n    }\n\n    private set_once_action(prop: string | Properties, to?: string): Properties {\n        return this.apiActionParser(SET_ONCE_ACTION, prop, to)\n    }\n\n    private apiActionParser(actionType: '$set' | '$set_once', prop: string | Properties, to?: string): Properties {\n        const data: Properties = {}\n        const props: Properties = {}\n\n        if (_isObject(prop)) {\n            _each(prop, (v, k: string) => {\n                if (!(this as any)._is_reserved_property(k)) {\n                    props[k] = v\n                }\n            })\n        } else {\n            props[prop] = to\n        }\n\n        data[actionType] = props\n        return data\n    }\n}\n\nexport { PostHogPeople }\n","import { _base64Encode, _extend } from './utils'\nimport { PostHog } from './posthog-core'\nimport { DecideResponse, FeatureFlagsCallback, RequestCallback } from './types'\nimport { PostHogPersistence } from './posthog-persistence'\n\nexport const parseFeatureFlagDecideResponse = (response: Partial<DecideResponse>, persistence: PostHogPersistence) => {\n    const flags = response['featureFlags']\n    if (flags) {\n        // using the v1 api\n        if (Array.isArray(flags)) {\n            const $enabled_feature_flags: Record<string, boolean> = {}\n            if (flags) {\n                for (let i = 0; i < flags.length; i++) {\n                    $enabled_feature_flags[flags[i]] = true\n                }\n            }\n            persistence &&\n                persistence.register({\n                    $active_feature_flags: flags,\n                    $enabled_feature_flags,\n                })\n        } else {\n            // using the v2 api\n            persistence &&\n                persistence.register({\n                    $active_feature_flags: Object.keys(flags || {}),\n                    $enabled_feature_flags: flags || {},\n                })\n        }\n    } else {\n        if (persistence) {\n            persistence.unregister('$active_feature_flags')\n            persistence.unregister('$enabled_feature_flags')\n        }\n    }\n}\n\nexport class PostHogFeatureFlags {\n    instance: PostHog\n    _override_warning: boolean\n    flagCallReported: Record<string, boolean>\n    featureFlagEventHandlers: FeatureFlagsCallback[]\n    reloadFeatureFlagsQueued: boolean\n    reloadFeatureFlagsInAction: boolean\n    $anon_distinct_id: string | undefined\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        this._override_warning = false\n        this.flagCallReported = {}\n        this.featureFlagEventHandlers = []\n\n        this.reloadFeatureFlagsQueued = false\n        this.reloadFeatureFlagsInAction = false\n    }\n\n    getFlags(): string[] {\n        return Object.keys(this.getFlagVariants())\n    }\n\n    getFlagVariants(): Record<string, string | boolean> {\n        const enabledFlags = this.instance.get_property('$enabled_feature_flags')\n        const overriddenFlags = this.instance.get_property('$override_feature_flags')\n        if (!overriddenFlags) {\n            return enabledFlags || {}\n        }\n\n        const finalFlags = _extend({}, enabledFlags)\n        const overriddenKeys = Object.keys(overriddenFlags)\n        for (let i = 0; i < overriddenKeys.length; i++) {\n            if (overriddenFlags[overriddenKeys[i]] === false) {\n                delete finalFlags[overriddenKeys[i]]\n            } else {\n                finalFlags[overriddenKeys[i]] = overriddenFlags[overriddenKeys[i]]\n            }\n        }\n        if (!this._override_warning) {\n            console.warn('[PostHog] Overriding feature flags!', {\n                enabledFlags,\n                overriddenFlags,\n                finalFlags,\n            })\n            this._override_warning = true\n        }\n        return finalFlags\n    }\n\n    /**\n     * Reloads feature flags asynchronously.\n     *\n     * Constraints:\n     *\n     * 1. Avoid parallel requests\n     * 2. Delay a few milliseconds after each reloadFeatureFlags call to batch subsequent changes together\n     * 3. Don't call this during initial load (as /decide will be called instead), see posthog-core.js\n     */\n    reloadFeatureFlags(): void {\n        if (!this.reloadFeatureFlagsQueued) {\n            this.reloadFeatureFlagsQueued = true\n            this._startReloadTimer()\n        }\n    }\n\n    setAnonymousDistinctId(anon_distinct_id: string): void {\n        this.$anon_distinct_id = anon_distinct_id\n    }\n\n    setReloadingPaused(isPaused: boolean): void {\n        this.reloadFeatureFlagsInAction = isPaused\n    }\n\n    resetRequestQueue(): void {\n        this.reloadFeatureFlagsQueued = false\n    }\n\n    _startReloadTimer(): void {\n        if (this.reloadFeatureFlagsQueued && !this.reloadFeatureFlagsInAction) {\n            setTimeout(() => {\n                if (!this.reloadFeatureFlagsInAction && this.reloadFeatureFlagsQueued) {\n                    this.reloadFeatureFlagsQueued = false\n                    this._reloadFeatureFlagsRequest()\n                }\n            }, 5)\n        }\n    }\n\n    _reloadFeatureFlagsRequest(): void {\n        this.setReloadingPaused(true)\n        const token = this.instance.get_config('token')\n        const json_data = JSON.stringify({\n            token: token,\n            distinct_id: this.instance.get_distinct_id(),\n            groups: this.instance.getGroups(),\n            $anon_distinct_id: this.$anon_distinct_id,\n        })\n\n        const encoded_data = _base64Encode(json_data)\n        this.instance._send_request(\n            this.instance.get_config('api_host') + '/decide/?v=2',\n            { data: encoded_data },\n            { method: 'POST' },\n            this.instance._prepare_callback((response) => {\n                // reset anon_distinct_id after at least a single request with it\n                // makes it through\n                this.$anon_distinct_id = undefined\n\n                this.receivedFeatureFlags(response as DecideResponse)\n\n                // :TRICKY: Reload - start another request if queued!\n                this.setReloadingPaused(false)\n                this._startReloadTimer()\n            }) as RequestCallback\n        )\n    }\n\n    /*\n     * Get feature flag's value for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.getFeatureFlag('my-flag') === 'some-variant') { // do something }\n     *\n     * @param {Object|String} key Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    getFeatureFlag(key: string, options: { send_event?: boolean } = {}): boolean | string {\n        if (!this.getFlags()) {\n            console.warn('getFeatureFlag for key \"' + key + '\" failed. Feature flags didn\\'t load in time.')\n            return false\n        }\n        const flagValue = this.getFlagVariants()[key]\n        if ((options.send_event || !('send_event' in options)) && !this.flagCallReported[key]) {\n            this.flagCallReported[key] = true\n            this.instance.capture('$feature_flag_called', { $feature_flag: key, $feature_flag_response: flagValue })\n        }\n        return flagValue\n    }\n\n    /*\n     * See if feature flag is enabled for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n     *\n     * @param {Object|String} key Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key: string, options: { send_event?: boolean } = {}): boolean {\n        if (!this.getFlags()) {\n            console.warn('isFeatureEnabled for key \"' + key + '\" failed. Feature flags didn\\'t load in time.')\n            return false\n        }\n        return !!this.getFeatureFlag(key, options)\n    }\n\n    addFeatureFlagsHandler(handler: FeatureFlagsCallback): void {\n        this.featureFlagEventHandlers.push(handler)\n    }\n\n    receivedFeatureFlags(response: Partial<DecideResponse>): void {\n        this.instance.decideEndpointWasHit = true\n        parseFeatureFlagDecideResponse(response, this.instance.persistence)\n        const flags = this.getFlags()\n        const variants = this.getFlagVariants()\n        this.featureFlagEventHandlers.forEach((handler) => handler(flags, variants))\n    }\n\n    /*\n     * Override feature flags for debugging.\n     *\n     * ### Usage:\n     *\n     *     - posthog.feature_flags.override(false)\n     *     - posthog.feature_flags.override(['beta-feature'])\n     *     - posthog.feature_flags.override({'beta-feature': 'variant', 'other-feature': True})\n     *\n     * @param {Object|Array|String} flags Flags to override with.\n     */\n    override(flags: boolean | string[] | Record<string, string | boolean>): void {\n        this._override_warning = false\n\n        if (flags === false) {\n            this.instance.persistence.unregister('$override_feature_flags')\n        } else if (Array.isArray(flags)) {\n            const flagsObj: Record<string, string | boolean> = {}\n            for (let i = 0; i < flags.length; i++) {\n                flagsObj[flags[i]] = true\n            }\n            this.instance.persistence.register({ $override_feature_flags: flagsObj })\n        } else {\n            this.instance.persistence.register({ $override_feature_flags: flags })\n        }\n    }\n    /*\n     * Register an event listener that runs when feature flags become available or when they change.\n     * If there are flags, the listener is called immediately in addition to being called on future changes.\n     *\n     * ### Usage:\n     *\n     *     posthog.onFeatureFlags(function(featureFlags) { // do something })\n     *\n     * @param {Function} [callback] The callback function will be called once the feature flags are ready or when they are updated.\n     *                              It'll return a list of feature flags enabled for the user.\n     */\n    onFeatureFlags(callback: FeatureFlagsCallback): void {\n        this.addFeatureFlagsHandler(callback)\n        if (this.instance.decideEndpointWasHit) {\n            const flags = this.getFlags()\n            const flagVariants = this.getFlagVariants()\n            callback(flags, flagVariants)\n        }\n    }\n}\n","/* eslint camelcase: \"off\" */\n\nimport { _each, _extend, _include, _info, _isObject, _isUndefined, _strip_empty_properties, logger } from './utils'\nimport { cookieStore, localStore, localPlusCookieStore, memoryStore } from './storage'\nimport { PersistentStore, PostHogConfig, Properties } from './types'\n\n/*\n * Constants\n */\nexport const SET_QUEUE_KEY = '__mps'\nexport const SET_ONCE_QUEUE_KEY = '__mpso'\nexport const UNSET_QUEUE_KEY = '__mpus'\nexport const ADD_QUEUE_KEY = '__mpa'\nexport const APPEND_QUEUE_KEY = '__mpap'\nexport const REMOVE_QUEUE_KEY = '__mpr'\nexport const UNION_QUEUE_KEY = '__mpu'\n// This key is deprecated, but we want to check for it to see whether aliasing is allowed.\nexport const PEOPLE_DISTINCT_ID_KEY = '$people_distinct_id'\nexport const ALIAS_ID_KEY = '__alias'\nexport const CAMPAIGN_IDS_KEY = '__cmpns'\nexport const EVENT_TIMERS_KEY = '__timers'\nexport const SESSION_RECORDING_ENABLED_SERVER_SIDE = '$session_recording_enabled_server_side'\nexport const CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE = '$console_log_recording_enabled_server_side'\nexport const SESSION_ID = '$sesid'\nexport const ENABLED_FEATURE_FLAGS = '$enabled_feature_flags'\nexport const RESERVED_PROPERTIES = [\n    SET_QUEUE_KEY,\n    SET_ONCE_QUEUE_KEY,\n    UNSET_QUEUE_KEY,\n    ADD_QUEUE_KEY,\n    APPEND_QUEUE_KEY,\n    REMOVE_QUEUE_KEY,\n    UNION_QUEUE_KEY,\n    PEOPLE_DISTINCT_ID_KEY,\n    ALIAS_ID_KEY,\n    CAMPAIGN_IDS_KEY,\n    EVENT_TIMERS_KEY,\n    SESSION_RECORDING_ENABLED_SERVER_SIDE,\n    SESSION_ID,\n    ENABLED_FEATURE_FLAGS,\n]\n\n/**\n * PostHog Persistence Object\n * @constructor\n */\nexport class PostHogPersistence {\n    props: Properties\n    storage: PersistentStore\n    campaign_params_saved: boolean\n    name: string\n    disabled: boolean | undefined\n    secure: boolean | undefined\n    expire_days: number | undefined\n    default_expiry: number | undefined\n    cross_subdomain: boolean | undefined\n\n    constructor(config: PostHogConfig) {\n        // clean chars that aren't accepted by the http spec for cookie values\n        // https://datatracker.ietf.org/doc/html/rfc2616#section-2.2\n        let token = ''\n\n        if (config['token']) {\n            token = config['token'].replace(/\\+/g, 'PL').replace(/\\//g, 'SL').replace(/=/g, 'EQ')\n        }\n\n        this.props = {}\n        this.campaign_params_saved = false\n\n        if (config['persistence_name']) {\n            this.name = 'ph_' + config['persistence_name']\n        } else {\n            this.name = 'ph_' + token + '_posthog'\n        }\n\n        let storage_type = config['persistence'].toLowerCase()\n        if (storage_type !== 'cookie' && storage_type.indexOf('localstorage') === -1 && storage_type !== 'memory') {\n            logger.critical('Unknown persistence type ' + storage_type + '; falling back to cookie')\n            storage_type = config['persistence'] = 'cookie'\n        }\n        if (storage_type === 'localstorage' && localStore.is_supported()) {\n            this.storage = localStore\n        } else if (storage_type === 'localstorage+cookie' && localPlusCookieStore.is_supported()) {\n            this.storage = localPlusCookieStore\n        } else if (storage_type === 'memory') {\n            this.storage = memoryStore\n        } else {\n            this.storage = cookieStore\n        }\n\n        this.load()\n        this.update_config(config)\n        this.save()\n    }\n\n    properties(): Properties {\n        const p: Properties = {}\n        // Filter out reserved properties\n        _each(this.props, function (v, k) {\n            if (k === ENABLED_FEATURE_FLAGS && typeof v === 'object') {\n                const keys = Object.keys(v)\n                for (let i = 0; i < keys.length; i++) {\n                    p[`$feature/${keys[i]}`] = v[keys[i]]\n                }\n            } else if (!_include(RESERVED_PROPERTIES, k)) {\n                p[k] = v\n            }\n        })\n        return p\n    }\n\n    load(): void {\n        if (this.disabled) {\n            return\n        }\n\n        const entry = this.storage.parse(this.name)\n\n        if (entry) {\n            this.props = _extend({}, entry)\n        }\n    }\n\n    /**\n     * NOTE: Saving frequently causes issues with Recordings and Consent Management Platform (CMP) tools which\n     * observe cookie changes, and modify their UI, often causing infinite loops.\n     * As such callers of this should ideally check that the data has changed beforehand\n     */\n    save(): void {\n        if (this.disabled) {\n            return\n        }\n        this.storage.set(this.name, this.props, this.expire_days, this.cross_subdomain, this.secure)\n    }\n\n    remove(): void {\n        // remove both domain and subdomain cookies\n        this.storage.remove(this.name, false)\n        this.storage.remove(this.name, true)\n    }\n\n    // removes the storage entry and deletes all loaded data\n    // forced name for tests\n\n    clear(): void {\n        this.remove()\n        this.props = {}\n    }\n\n    /**\n     * @param {Object} props\n     * @param {*=} default_value\n     * @param {number=} days\n     */\n\n    register_once(props: Properties, default_value: any, days?: number): boolean {\n        if (_isObject(props)) {\n            if (typeof default_value === 'undefined') {\n                default_value = 'None'\n            }\n            this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n\n            let hasChanges = false\n\n            _each(props, (val, prop) => {\n                if (!this.props.hasOwnProperty(prop) || this.props[prop] === default_value) {\n                    this.props[prop] = val\n                    hasChanges = true\n                }\n            })\n\n            if (hasChanges) {\n                this.save()\n                return true\n            }\n        }\n        return false\n    }\n\n    /**\n     * @param {Object} props\n     * @param {number=} days\n     */\n\n    register(props: Properties, days?: number): boolean {\n        if (_isObject(props)) {\n            this.expire_days = typeof days === 'undefined' ? this.default_expiry : days\n\n            let hasChanges = false\n\n            _each(props, (val, prop) => {\n                if (props.hasOwnProperty(prop) && this.props[prop] !== val) {\n                    this.props[prop] = val\n                    hasChanges = true\n                }\n            })\n\n            if (hasChanges) {\n                this.save()\n                return true\n            }\n        }\n        return false\n    }\n\n    unregister(prop: string): void {\n        if (prop in this.props) {\n            delete this.props[prop]\n            this.save()\n        }\n    }\n\n    update_campaign_params(): void {\n        if (!this.campaign_params_saved) {\n            this.register(_info.campaignParams())\n            this.campaign_params_saved = true\n        }\n    }\n\n    update_search_keyword(referrer: string): void {\n        this.register(_info.searchInfo(referrer))\n    }\n\n    // EXPORTED METHOD, we test this directly.\n\n    update_referrer_info(referrer: string): void {\n        this.register({\n            $referrer: referrer || this.props['$referrer'] || '$direct',\n            $referring_domain: _info.referringDomain(referrer) || this.props['$referring_domain'] || '$direct',\n        })\n    }\n\n    get_referrer_info(): Properties {\n        return _strip_empty_properties({\n            $referrer: this['props']['$referrer'],\n            $referring_domain: this['props']['$referring_domain'],\n        })\n    }\n\n    // safely fills the passed in object with stored properties,\n    // does not override any properties defined in both\n    // returns the passed in object\n\n    safe_merge(props: Properties): Properties {\n        _each(this.props, function (val, prop) {\n            if (!(prop in props)) {\n                props[prop] = val\n            }\n        })\n\n        return props\n    }\n\n    update_config(config: PostHogConfig): void {\n        this.default_expiry = this.expire_days = config['cookie_expiration']\n        this.set_disabled(config['disable_persistence'])\n        this.set_cross_subdomain(config['cross_subdomain_cookie'])\n        this.set_secure(config['secure_cookie'])\n    }\n\n    set_disabled(disabled: boolean): void {\n        this.disabled = disabled\n        if (this.disabled) {\n            this.remove()\n        } else {\n            this.save()\n        }\n    }\n\n    set_cross_subdomain(cross_subdomain: boolean): void {\n        if (cross_subdomain !== this.cross_subdomain) {\n            this.cross_subdomain = cross_subdomain\n            this.remove()\n            this.save()\n        }\n    }\n\n    get_cross_subdomain(): boolean {\n        return !!this.cross_subdomain\n    }\n\n    set_secure(secure: boolean): void {\n        if (secure !== this.secure) {\n            this.secure = secure\n            this.remove()\n            this.save()\n        }\n    }\n\n    set_event_timer(event_name: string, timestamp: number): void {\n        const timers = this.props[EVENT_TIMERS_KEY] || {}\n        timers[event_name] = timestamp\n        this.props[EVENT_TIMERS_KEY] = timers\n        this.save()\n    }\n\n    remove_event_timer(event_name: string): number {\n        const timers = this.props[EVENT_TIMERS_KEY] || {}\n        const timestamp = timers[event_name]\n        if (!_isUndefined(timestamp)) {\n            delete this.props[EVENT_TIMERS_KEY][event_name]\n            this.save()\n        }\n        return timestamp\n    }\n}\n","import { PLUGIN_EVENT_TYPE } from './sessionrecording'\nimport { pluginEvent } from 'rrweb/typings/types'\n\nexport const replacementImageURI =\n    'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTYiIGhlaWdodD0iMTYiIHZpZXdCb3g9IjAgMCAxNiAxNiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjE2IiBoZWlnaHQ9IjE2IiBmaWxsPSJibGFjayIvPgo8cGF0aCBkPSJNOCAwSDE2TDAgMTZWOEw4IDBaIiBmaWxsPSIjMkQyRDJEIi8+CjxwYXRoIGQ9Ik0xNiA4VjE2SDhMMTYgOFoiIGZpbGw9IiMyRDJEMkQiLz4KPC9zdmc+Cg=='\n\n/*\n * Check whether a data payload is nearing 5mb. If it is, it checks the data for\n * data URIs (the likely culprit for large payloads). If it finds data URIs, it either replaces\n * it with a generic image (if it's an image) or removes it.\n * @data {object} the rr-web data object\n * @returns {object} the rr-web data object with data uris filtered out\n */\nexport function filterDataURLsFromLargeDataObjects(data: Record<string, any>): Record<string, any> {\n    if (data && typeof data === 'object') {\n        let stringifiedData = JSON.stringify(data)\n        // String length of 5000000 is an approximation of 5mb\n        // Note: with compression, this limit may be able to be increased\n        // but we're assuming most of the size is from a data uri which\n        // is unlikely to be compressed further\n        if (stringifiedData.length > 5000000) {\n            // Regex that matches the pattern for a dataURI with the shape 'data:{mime type};{encoding},{data}'. It:\n            // 1) Checks if the pattern starts with 'data:' (potentially, not at the start of the string)\n            // 2) Extracts the mime type of the data uri in the first group\n            // 3) Determines when the data URI ends.Depending on if it's used in the src tag or css, it can end with a ) or \"\n            const dataURIRegex = /data:([\\w\\/\\-\\.]+);(\\w+),([^)\"]*)/gim\n            const matches = stringifiedData.matchAll(dataURIRegex)\n            for (const match of matches) {\n                if (match[1].toLocaleLowerCase().slice(0, 6) === 'image/') {\n                    stringifiedData = stringifiedData.replace(match[0], replacementImageURI)\n                } else {\n                    stringifiedData = stringifiedData.replace(match[0], '')\n                }\n            }\n        }\n        return JSON.parse(stringifiedData)\n    }\n    return data\n}\n\nexport const CONSOLE_LOG_PLUGIN_NAME = 'rrweb/console@1' // The name of the rr-web plugin that emits console logs\n\n// Console logs can be really large. This function truncates large logs\n// It's a simple function that just truncates long strings.\n// TODO: Ideally this function would have better handling of objects + lists,\n// so they could still be rendered in a pretty way after truncation.\nexport function truncateLargeConsoleLogs(event: pluginEvent<{ payload: string[] }>) {\n    const MAX_STRING_SIZE = 2000 // Maximum number of characters allowed in a string\n    const MAX_STRINGS_PER_LOG = 10 // A log can consist of multiple strings (e.g. consol.log('string1', 'string2'))\n\n    if (\n        event &&\n        typeof event === 'object' &&\n        event.type === PLUGIN_EVENT_TYPE &&\n        typeof event.data === 'object' &&\n        event.data.plugin === CONSOLE_LOG_PLUGIN_NAME\n    ) {\n        // Note: event.data.payload.payload comes from rr-web, and is an array of strings\n        if (event.data.payload.payload.length > MAX_STRINGS_PER_LOG) {\n            event.data.payload.payload = event.data.payload.payload.slice(0, MAX_STRINGS_PER_LOG)\n            event.data.payload.payload.push('...[truncated]')\n        }\n        const updatedPayload = []\n        for (let i = 0; i < event.data.payload.payload.length; i++) {\n            if (\n                event.data.payload.payload[i] && // Value can be null\n                event.data.payload.payload[i].length > MAX_STRING_SIZE\n            ) {\n                updatedPayload.push(event.data.payload.payload[i].slice(0, MAX_STRING_SIZE) + '...[truncated]')\n            } else {\n                updatedPayload.push(event.data.payload.payload[i])\n            }\n        }\n        event.data.payload.payload = updatedPayload\n        return event\n    }\n    return event\n}\n","import { loadScript } from '../autocapture-utils'\nimport {\n    CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE,\n    SESSION_RECORDING_ENABLED_SERVER_SIDE,\n} from '../posthog-persistence'\nimport Config from '../config'\nimport { filterDataURLsFromLargeDataObjects, truncateLargeConsoleLogs } from './sessionrecording-utils'\nimport { PostHog } from '../posthog-core'\nimport { DecideResponse, Properties } from '../types'\nimport type { record } from 'rrweb/typings'\nimport type { eventWithTime, listenerHandler, pluginEvent, recordOptions } from 'rrweb/typings/types'\n\nconst BASE_ENDPOINT = '/e/'\n\nexport const FULL_SNAPSHOT_EVENT_TYPE = 2\nexport const META_EVENT_TYPE = 4\nexport const INCREMENTAL_SNAPSHOT_EVENT_TYPE = 3\nexport const PLUGIN_EVENT_TYPE = 6\nexport const MUTATION_SOURCE_TYPE = 0\n\nexport class SessionRecording {\n    instance: PostHog\n    captureStarted: boolean\n    snapshots: any[]\n    emit: boolean\n    endpoint: string\n    stopRrweb: listenerHandler | undefined\n    windowId: string | null\n    sessionId: string | null\n    receivedDecide: boolean\n    rrwebRecord: typeof record | undefined\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        this.captureStarted = false\n        this.snapshots = []\n        this.emit = false // Controls whether data is sent to the server or not\n        this.endpoint = BASE_ENDPOINT\n        this.stopRrweb = undefined\n        this.windowId = null\n        this.sessionId = null\n        this.receivedDecide = false\n    }\n\n    startRecordingIfEnabled() {\n        if (this.isRecordingEnabled()) {\n            this.startCaptureAndTrySendingQueuedSnapshots()\n        } else {\n            this.stopRecording()\n        }\n    }\n\n    started() {\n        return this.captureStarted\n    }\n\n    stopRecording() {\n        if (this.captureStarted && this.stopRrweb) {\n            this.stopRrweb()\n            this.stopRrweb = undefined\n            this.captureStarted = false\n        }\n    }\n\n    isRecordingEnabled() {\n        const enabled_server_side = !!this.instance.get_property(SESSION_RECORDING_ENABLED_SERVER_SIDE)\n        const enabled_client_side = !this.instance.get_config('disable_session_recording')\n        return enabled_server_side && enabled_client_side\n    }\n\n    isConsoleLogCaptureEnabled() {\n        const enabled_server_side = !!this.instance.get_property(CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE)\n        const enabled_client_side = this.instance.get_config('enable_recording_console_log')\n        return enabled_client_side ?? enabled_server_side\n    }\n\n    afterDecideResponse(response: DecideResponse) {\n        this.receivedDecide = true\n        if (this.instance.persistence) {\n            this.instance.persistence.register({\n                [SESSION_RECORDING_ENABLED_SERVER_SIDE]: !!response['sessionRecording'],\n                [CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE]: response.sessionRecording?.consoleLogRecordingEnabled,\n            })\n        }\n        if (response.sessionRecording?.endpoint) {\n            this.endpoint = response.sessionRecording?.endpoint\n        }\n        this.startRecordingIfEnabled()\n    }\n\n    startCaptureAndTrySendingQueuedSnapshots() {\n        // Only submit data after we've received a decide response to account for\n        // changing endpoints and the feature being disabled on the server side.\n        if (this.receivedDecide) {\n            this.emit = true\n            this.snapshots.forEach((properties) => this._captureSnapshot(properties))\n        }\n        this._startCapture()\n    }\n\n    _startCapture() {\n        // According to the rrweb docs, rrweb is not supported on IE11 and below:\n        // \"rrweb does not support IE11 and below because it uses the MutationObserver API which was supported by these browsers.\"\n        // https://github.com/rrweb-io/rrweb/blob/master/guide.md#compatibility-note\n        //\n        // However, MutationObserver does exist on IE11, it just doesn't work well and does not detect all changes.\n        // Instead, when we load \"recorder.js\", the first JS error is about \"Object.assign\" being undefined.\n        // Thus instead of MutationObserver, we look for this function and block recording if it's undefined.\n        if (typeof Object.assign === 'undefined') {\n            return\n        }\n        if (!this.captureStarted && !this.instance.get_config('disable_session_recording')) {\n            this.captureStarted = true\n            loadScript(\n                this.instance.get_config('api_host') + '/static/recorder.js?v=' + Config.LIB_VERSION,\n                this._onScriptLoaded.bind(this)\n            )\n        }\n    }\n\n    _updateWindowAndSessionIds(event: eventWithTime) {\n        // Some recording events are triggered by non-user events (e.g. \"X minutes ago\" text updating on the screen).\n        // We don't want to extend the session or trigger a new session in these cases. These events are designated by event\n        // type -> incremental update, and source -> mutation.\n        const isNotUserInteraction =\n            event.type === INCREMENTAL_SNAPSHOT_EVENT_TYPE && event.data?.source === MUTATION_SOURCE_TYPE\n\n        const { windowId, sessionId } = this.instance.sessionManager.checkAndGetSessionAndWindowId(\n            isNotUserInteraction,\n            event.timestamp\n        )\n\n        // Event types FullSnapshot and Meta mean we're already in the process of sending a full snapshot\n        if (\n            (this.windowId !== windowId || this.sessionId !== sessionId) &&\n            [FULL_SNAPSHOT_EVENT_TYPE, META_EVENT_TYPE].indexOf(event.type) === -1\n        ) {\n            this.rrwebRecord?.takeFullSnapshot()\n        }\n        this.windowId = windowId\n        this.sessionId = sessionId\n    }\n\n    _onScriptLoaded() {\n        // rrweb config info: https://github.com/rrweb-io/rrweb/blob/7d5d0033258d6c29599fb08412202d9a2c7b9413/src/record/index.ts#L28\n        const sessionRecordingOptions: recordOptions<eventWithTime> = {\n            // select set of rrweb config options we expose to our users\n            // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n            blockClass: 'ph-no-capture',\n            blockSelector: undefined,\n            ignoreClass: 'ph-ignore-input',\n            maskAllInputs: true,\n            maskInputOptions: {},\n            maskInputFn: undefined,\n            slimDOMOptions: {},\n            collectFonts: false,\n            inlineStylesheet: true,\n        }\n        // We switched from loading all of rrweb to just the record part, but\n        // keep backwards compatibility if someone hasn't upgraded PostHog\n        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n        // @ts-ignore\n        this.rrwebRecord = window.rrweb ? window.rrweb.record : window.rrwebRecord\n\n        // only allows user to set our 'whitelisted' options\n        const userSessionRecordingOptions = this.instance.get_config('session_recording')\n        for (const [key, value] of Object.entries(userSessionRecordingOptions || {})) {\n            if (key in sessionRecordingOptions) {\n                // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                // @ts-ignore\n                sessionRecordingOptions[key] = value\n            }\n        }\n\n        this.stopRrweb = this.rrwebRecord?.({\n            emit: (event) => {\n                event = truncateLargeConsoleLogs(\n                    filterDataURLsFromLargeDataObjects(event) as pluginEvent<{ payload: string[] }>\n                ) as eventWithTime\n\n                this._updateWindowAndSessionIds(event)\n\n                const properties = {\n                    $snapshot_data: event,\n                    $session_id: this.sessionId,\n                    $window_id: this.windowId,\n                }\n\n                this.instance._captureMetrics.incr('rrweb-record')\n                this.instance._captureMetrics.incr(`rrweb-record-${event.type}`)\n\n                if (this.emit) {\n                    this._captureSnapshot(properties)\n                } else {\n                    this.snapshots.push(properties)\n                }\n            },\n            plugins:\n                (window as any).rrwebConsoleRecord && this.isConsoleLogCaptureEnabled()\n                    ? [(window as any).rrwebConsoleRecord.getRecordConsolePlugin()]\n                    : [],\n            ...sessionRecordingOptions,\n        })\n\n        // :TRICKY: rrweb does not capture navigation within SPA-s, so hook into our $pageview events to get access to all events.\n        //   Dropping the initial event is fine (it's always captured by rrweb).\n        this.instance._addCaptureHook((eventName) => {\n            if (eventName === '$pageview') {\n                this.rrwebRecord?.addCustomEvent('$pageview', { href: window.location.href })\n            }\n        })\n    }\n\n    _captureSnapshot(properties: Properties) {\n        // :TRICKY: Make sure we batch these requests, use a custom endpoint and don't truncate the strings.\n        this.instance.capture('$snapshot', properties, {\n            transport: 'XHR',\n            method: 'POST',\n            endpoint: this.endpoint,\n            _noTruncate: true,\n            _batchKey: 'sessionRecording',\n            _metrics: {\n                rrweb_full_snapshot: properties.$snapshot_data.type === FULL_SNAPSHOT_EVENT_TYPE,\n            },\n        })\n    }\n}\n","import { PostHog } from '../posthog-core'\nimport { DecideResponse } from '../types'\n\nconst PERFORMANCE_EVENTS_MAPPING: { [key: string]: number } = {\n    // BASE_PERFORMANCE_EVENT_COLUMNS\n    entryType: 0,\n    timeOrigin: 1,\n    name: 2,\n\n    // RESOURCE_EVENT_COLUMNS\n    startTime: 3,\n    redirectStart: 4,\n    redirectEnd: 5,\n    workerStart: 6,\n    fetchStart: 7,\n    domainLookupStart: 8,\n    domainLookupEnd: 9,\n    connectStart: 10,\n    secureConnectionStart: 11,\n    connectEnd: 12,\n    requestStart: 13,\n    responseStart: 14,\n    responseEnd: 15,\n    decodedBodySize: 16,\n    encodedBodySize: 17,\n    initiatorType: 18,\n    nextHopProtocol: 19,\n    renderBlockingStatus: 20,\n    responseStatus: 21,\n    transferSize: 22,\n\n    // LARGEST_CONTENTFUL_PAINT_EVENT_COLUMNS\n    element: 23,\n    renderTime: 24,\n    loadTime: 25,\n    size: 26,\n    id: 27,\n    url: 28,\n\n    // NAVIGATION_EVENT_COLUMNS\n    domComplete: 29,\n    domContentLoadedEvent: 30,\n    domInteractive: 31,\n    loadEventEnd: 32,\n    loadEventStart: 33,\n    redirectCount: 34,\n    navigationType: 35,\n    unloadEventEnd: 36,\n    unloadEventStart: 37,\n\n    // Added after v1\n    duration: 39,\n    timestamp: 40,\n\n    // NOTE: CURRENTLY UNSUPPORTED\n    // EVENT_TIMING_EVENT_COLUMNS\n    // processingStart: null,\n    // processingEnd: null,\n\n    // MARK_AND_MEASURE_EVENT_COLUMNS\n    // detail: null,\n}\n\nconst ENTRY_TYPES_TO_OBSERVE = [\n    // 'event', // This is too noisy as it covers all browser events\n    'first-input',\n    // 'mark', // Mark is used too liberally. We would need to filter for specific marks\n    // 'measure', // Measure is used too liberally. We would need to filter for specific measures\n    'navigation',\n    'paint',\n    'resource',\n]\n\nconst PERFORMANCE_INGESTION_ENDPOINT = '/e/'\n// Don't monitor posthog paths because then events cause performance events which are events and the snake eats its tail \nconst POSTHOG_PATHS_TO_IGNORE = ['/s/', PERFORMANCE_INGESTION_ENDPOINT]\n\nexport class WebPerformanceObserver {\n    instance: PostHog\n    remoteEnabled: boolean | undefined\n    observer: PerformanceObserver | undefined\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n    }\n\n    startObservingIfEnabled() {\n        if (this.isEnabled()) {\n            this.startObserving()\n        } else {\n            this.stopObserving()\n        }\n    }\n\n    startObserving() {\n        if (this.observer) {\n            return\n        }\n        try {\n            this.observer = new PerformanceObserver((list) => {\n                list.getEntries().forEach((entry) => {\n                    this._capturePerformanceEvent(entry)\n                })\n            })\n\n            const entryTypes = PerformanceObserver.supportedEntryTypes.filter((x) => ENTRY_TYPES_TO_OBSERVE.includes(x))\n\n            entryTypes.forEach((entryType) => {\n                this.observer?.observe({ type: entryType, buffered: true })\n            })\n        } catch (e) {\n            console.error('PostHog failed to start performance observer', e)\n            this.stopObserving()\n        }\n    }\n\n    stopObserving() {\n        if (this.observer) {\n            this.observer.disconnect()\n            this.observer = undefined\n        }\n    }\n\n    isObserving() {\n        return !!this.observer\n    }\n\n    isEnabled() {\n        return this.instance.get_config('capture_performance') ?? this.remoteEnabled ?? false\n    }\n\n    afterDecideResponse(response: DecideResponse) {\n        this.remoteEnabled = response.capturePerformance || false\n        if (this.isEnabled()) {\n            this.startObserving()\n        }\n    }\n\n    _capturePerformanceEvent(event: PerformanceEntry) {\n        // NOTE: We don't want to capture our own request events.\n\n        if (event.name.startsWith(this.instance.get_config('api_host'))) {\n            const path = event.name.replace(this.instance.get_config('api_host'), '')\n\n            if (POSTHOG_PATHS_TO_IGNORE.find((x) => path.startsWith(x))) {\n                return\n            }\n        }\n\n        const eventJson = event.toJSON()\n        const properties: { [key: number]: any } = {}\n        // kudos to sentry javascript sdk for excellent background on why to use Date.now() here\n        // https://github.com/getsentry/sentry-javascript/blob/e856e40b6e71a73252e788cd42b5260f81c9c88e/packages/utils/src/time.ts#L70\n        const timeOrigin = Math.floor(Date.now() - performance.now())\n        properties[PERFORMANCE_EVENTS_MAPPING['timeOrigin']] = timeOrigin\n        // clickhouse can't ingest timestamps that are floats\n        // (in this case representing fractions of a millisecond we don't care about anyway)\n        properties[PERFORMANCE_EVENTS_MAPPING['timestamp']] = Math.floor(timeOrigin + event.startTime)\n        for (const key in PERFORMANCE_EVENTS_MAPPING) {\n            if (eventJson[key] !== undefined) {\n                properties[PERFORMANCE_EVENTS_MAPPING[key]] = eventJson[key]\n            }\n        }\n\n        this.capturePerformanceEvent(properties)\n\n        if (exposesServerTiming(event)) {\n            for (const timing of event.serverTiming) {\n                this.capturePerformanceEvent({\n                    [PERFORMANCE_EVENTS_MAPPING['timeOrigin']]: timeOrigin,\n                    [PERFORMANCE_EVENTS_MAPPING['timestamp']]: Math.floor(timeOrigin + event.startTime),\n                    [PERFORMANCE_EVENTS_MAPPING['name']]: timing.name,\n                    [PERFORMANCE_EVENTS_MAPPING['duration']]: timing.duration,\n                    // the spec has a closed list of possible types\n                    // https://developer.mozilla.org/en-US/docs/Web/API/PerformanceEntry/entryType\n                    // but we need to know this was a server timing so that we know to\n                    // match it to the appropriate navigation or resource timing\n                    // that matching will have to be on timestamp and $current_url\n                    [PERFORMANCE_EVENTS_MAPPING['entryType']]: 'serverTiming',\n                })\n            }\n        }\n    }\n\n    /**\n     * :TRICKY: Make sure we batch these requests, and don't truncate the strings.\n     */\n    private capturePerformanceEvent(properties: { [key: number]: any }) {\n        this.instance.capture('$performance_event', properties, {\n            transport: 'XHR',\n            method: 'POST',\n            endpoint: PERFORMANCE_INGESTION_ENDPOINT,\n            _noTruncate: true,\n            _batchKey: 'performanceEvent',\n        })\n    }\n}\n\n/**\n *  Check if this PerformanceEntry is either a PerformanceResourceTiming or a PerformanceNavigationTiming\n *  NB PerformanceNavigationTiming extends PerformanceResourceTiming\n *  Here we don't care which interface it implements as both expose `serverTimings`\n */\nconst exposesServerTiming = (event: PerformanceEntry): event is PerformanceResourceTiming =>\n    event.entryType === 'navigation' || event.entryType === 'resource'\n","import { autocapture } from './autocapture'\nimport { _base64Encode } from './utils'\nimport { PostHog } from './posthog-core'\nimport { Compression, DecideResponse } from './types'\n\nexport class Decide {\n    instance: PostHog\n\n    constructor(instance: PostHog) {\n        this.instance = instance\n        // don't need to wait for `decide` to return if flags were provided on initialisation\n        this.instance.decideEndpointWasHit = this.instance._hasBootstrappedFeatureFlags()\n    }\n\n    call(): void {\n        /*\n        Calls /decide endpoint to fetch options for autocapture, session recording, feature flags & compression.\n        */\n        const json_data = JSON.stringify({\n            token: this.instance.get_config('token'),\n            distinct_id: this.instance.get_distinct_id(),\n            groups: this.instance.getGroups(),\n        })\n\n        const encoded_data = _base64Encode(json_data)\n        this.instance._send_request(\n            `${this.instance.get_config('api_host')}/decide/?v=2`,\n            { data: encoded_data, verbose: true },\n            { method: 'POST' },\n            (response) => this.parseDecideResponse(response as DecideResponse)\n        )\n    }\n\n    parseDecideResponse(response: DecideResponse): void {\n        if (response?.status === 0) {\n            console.error('Failed to fetch feature flags from PostHog.')\n            return\n        }\n        this.instance.decideEndpointWasHit = true\n        if (!(document && document.body)) {\n            console.log('document not ready yet, trying again in 500 milliseconds...')\n            setTimeout(() => {\n                this.parseDecideResponse(response)\n            }, 500)\n            return\n        }\n\n        this.instance.toolbar.afterDecideResponse(response)\n        this.instance.sessionRecording?.afterDecideResponse(response)\n        autocapture.afterDecideResponse(response, this.instance)\n        this.instance.webPerformance?.afterDecideResponse(response)\n\n        this.instance.featureFlags.receivedFeatureFlags(response)\n\n        this.instance['compression'] = {}\n        if (response['supportedCompression'] && !this.instance.get_config('disable_compression')) {\n            const compression: Partial<Record<Compression, boolean>> = {}\n            for (const method of response['supportedCompression']) {\n                compression[method] = true\n            }\n            this.instance['compression'] = compression\n        }\n\n        if (response['siteApps']) {\n            if (this.instance.get_config('opt_in_site_apps')) {\n                const apiHost = this.instance.get_config('api_host')\n                for (const { id, url } of response['siteApps']) {\n                    const script = document.createElement('script')\n                    script.src = [\n                        apiHost,\n                        apiHost[apiHost.length - 1] === '/' && url[0] === '/' ? url.substring(1) : url,\n                    ].join('')\n                    script.onerror = (e) => {\n                        console.error(`Error while initializing PostHog app with config id ${id}`, e)\n                    }\n                    ;(window as any)[`__$$ph_site_app_${id}`] = this.instance\n                    document.body.appendChild(script)\n                }\n            } else if (response['siteApps'].length > 0) {\n                console.error('PostHog site apps are disabled. Enable the \"opt_in_site_apps\" config to proceed.')\n            }\n        }\n    }\n}\n","export const POSTHOG_MANAGED_HOSTS = ['https://app.posthog.com', 'https://eu.posthog.com']\n","import { loadScript } from '../autocapture-utils'\nimport { _getHashParam, _register_event } from '../utils'\nimport { PostHog } from '../posthog-core'\nimport { DecideResponse, ToolbarParams } from '../types'\nimport { POSTHOG_MANAGED_HOSTS } from './cloud'\n\nexport class Toolbar {\n    instance: PostHog\n    constructor(instance: PostHog) {\n        this.instance = instance\n    }\n\n    afterDecideResponse(response: DecideResponse) {\n        const toolbarParams: ToolbarParams =\n            response['toolbarParams'] ||\n            response['editorParams'] ||\n            (response['toolbarVersion'] ? { toolbarVersion: response['toolbarVersion'] } : {})\n        if (\n            response['isAuthenticated'] &&\n            toolbarParams['toolbarVersion'] &&\n            toolbarParams['toolbarVersion'].indexOf('toolbar') === 0\n        ) {\n            this.loadToolbar({\n                ...toolbarParams,\n                apiURL: this.instance.get_config('api_host'),\n            })\n        }\n    }\n\n    /**\n     * To load the toolbar, we need an access token and other state. That state comes from one of three places:\n     * 1. In the URL hash params\n     * 2. From session storage under the key `toolbarParams` if the toolbar was initialized on a previous page\n     */\n    maybeLoadToolbar(\n        location = window.location,\n        localStorage: Storage | undefined = undefined,\n        history = window.history\n    ): boolean {\n        try {\n            // Before running the code we check if we can access localStorage, if not we opt-out\n            if (!localStorage) {\n                try {\n                    window.localStorage.setItem('test', 'test')\n                    window.localStorage.removeItem('test')\n                } catch (error) {\n                    return false\n                }\n\n                // If localStorage was undefined, and localStorage is supported we set the default value\n                localStorage = window.localStorage\n            }\n\n            const stateHash = _getHashParam(location.hash, '__posthog') || _getHashParam(location.hash, 'state')\n            const state = stateHash ? JSON.parse(decodeURIComponent(stateHash)) : null\n            const parseFromUrl = state && state['action'] === 'ph_authorize'\n            let toolbarParams: ToolbarParams\n\n            if (parseFromUrl) {\n                // happens if they are initializing the toolbar using an old snippet\n                toolbarParams = state\n                toolbarParams.source = 'url'\n\n                if (toolbarParams && Object.keys(toolbarParams).length > 0) {\n                    if (state['desiredHash']) {\n                        // hash that was in the url before the redirect\n                        location.hash = state['desiredHash']\n                    } else if (history) {\n                        history.replaceState('', document.title, location.pathname + location.search) // completely remove hash\n                    } else {\n                        location.hash = '' // clear hash (but leaves # unfortunately)\n                    }\n                }\n            } else {\n                // get credentials from localStorage from a previous initialzation\n                toolbarParams = JSON.parse(localStorage.getItem('_postHogToolbarParams') || '{}')\n                toolbarParams.source = 'localstorage'\n\n                // delete \"add-action\" or other intent from toolbarParams, otherwise we'll have the same intent\n                // every time we open the page (e.g. you just visiting your own site an hour later)\n                delete toolbarParams.userIntent\n            }\n\n            if (!toolbarParams.apiURL) {\n                toolbarParams.apiURL = this.instance.get_config('api_host')\n            }\n\n            if (toolbarParams['token'] && this.instance.get_config('token') === toolbarParams['token']) {\n                this.loadToolbar(toolbarParams)\n                return true\n            } else {\n                return false\n            }\n        } catch (e) {\n            return false\n        }\n    }\n\n    loadToolbar(params?: ToolbarParams): boolean {\n        if ((window as any)['_postHogToolbarLoaded']) {\n            return false\n        }\n        // only load the toolbar once, even if there are multiple instances of PostHogLib\n        ;(window as any)['_postHogToolbarLoaded'] = true\n\n        const host = params?.['jsURL'] || params?.['apiURL'] || this.instance.get_config('api_host')\n        const toolbarUrl = `${host}${host.endsWith('/') ? '' : '/'}static/toolbar.js?_ts=${new Date().getTime()}`\n        const disableToolbarMetrics =\n            !POSTHOG_MANAGED_HOSTS.includes(this.instance.get_config('api_host')) &&\n            this.instance.get_config('advanced_disable_toolbar_metrics')\n\n        const toolbarParams = {\n            apiURL: host, // defaults to api_host from the instance config if nothing else set\n            jsURL: host, // defaults to api_host from the instance config if nothing else set\n            token: this.instance.get_config('token'),\n            ...params,\n            ...(disableToolbarMetrics ? { instrument: false } : {}),\n        }\n\n        const { source: _discard, ...paramsToPersist } = toolbarParams // eslint-disable-line\n        window.localStorage.setItem('_postHogToolbarParams', JSON.stringify(paramsToPersist))\n\n        loadScript(toolbarUrl, () => {\n            ;((window as any)['ph_load_toolbar'] || (window as any)['ph_load_editor'])(toolbarParams, this.instance)\n        })\n        // Turbolinks doesn't fire an onload event but does replace the entire page, including the toolbar\n        _register_event(window, 'turbolinks:load', () => {\n            ;(window as any)['_postHogToolbarLoaded'] = false\n            this.loadToolbar(toolbarParams)\n        })\n        return true\n    }\n\n    /** @deprecated Use \"loadToolbar\" instead. */\n    _loadEditor(params: ToolbarParams): boolean {\n        return this.loadToolbar(params)\n    }\n\n    /** @deprecated Use \"maybeLoadToolbar\" instead. */\n    maybeLoadEditor(\n        location = window.location,\n        localStorage: Storage | undefined = undefined,\n        history = window.history\n    ): boolean {\n        return this.maybeLoadToolbar(location, localStorage, history)\n    }\n}\n","export class RequestQueueScaffold {\n    isPolling: boolean // flag to continue to recursively poll or not\n    _event_queue: any[]\n    _empty_queue_count: number // to track empty polls\n    _poller: number | undefined // to become interval for reference to clear later\n    _pollInterval: number\n\n    constructor(pollInterval = 3000) {\n        this.isPolling = true // flag to continue to recursively poll or not\n        this._event_queue = []\n        this._empty_queue_count = 0 // to track empty polls\n        this._poller = undefined // to become interval for reference to clear later\n        this._pollInterval = pollInterval\n    }\n\n    setPollInterval(interval: number): void {\n        this._pollInterval = interval\n        // Reset interval if running already\n        if (this.isPolling) {\n            this.poll()\n        }\n    }\n\n    // // eslint-disable-next-line no-unused-vars\n    // enqueue(_requestData: Record<string, any>): void {\n    //     return\n    // }\n\n    poll(): void {\n        return\n    }\n\n    unload(): void {\n        return\n    }\n\n    getTime(): number {\n        return new Date().getTime()\n    }\n}\n","import { RequestQueueScaffold } from './base-request-queue'\nimport { _each } from './utils'\nimport { CaptureMetrics } from './capture-metrics'\nimport { Properties, QueuedRequestData, XHROptions } from './types'\n\nexport class RequestQueue extends RequestQueueScaffold {\n    captureMetrics: CaptureMetrics\n    handlePollRequest: (url: string, data: Properties, options?: XHROptions) => void\n\n    constructor(\n        captureMetrics: CaptureMetrics,\n        handlePollRequest: (url: string, data: Properties, options?: XHROptions) => void,\n        pollInterval = 3000\n    ) {\n        super(pollInterval)\n        this.handlePollRequest = handlePollRequest\n        this.captureMetrics = captureMetrics\n    }\n\n    enqueue(url: string, data: Properties, options: XHROptions): void {\n        this.captureMetrics.incr('batch-enqueue')\n\n        this._event_queue.push({ url, data, options })\n\n        if (!this.isPolling) {\n            this.isPolling = true\n            this.poll()\n        }\n    }\n\n    poll(): void {\n        clearTimeout(this._poller)\n        this._poller = setTimeout(() => {\n            if (this._event_queue.length > 0) {\n                const requests = this.formatQueue()\n                for (const key in requests) {\n                    const { url, data, options } = requests[key]\n                    _each(data, (_, dataKey) => {\n                        data[dataKey]['offset'] = Math.abs(data[dataKey]['timestamp'] - this.getTime())\n                        delete data[dataKey]['timestamp']\n                    })\n                    this.handlePollRequest(url, data, options)\n\n                    this.captureMetrics.incr('batch-requests')\n                    this.captureMetrics.incr(`batch-requests-${url.slice(url.length - 2)}`)\n                    this.captureMetrics.incr('batch-handle', data.length)\n                    this.captureMetrics.incr(`batch-handle-${url.slice(url.length - 2)}`, data.length)\n                }\n                this._event_queue.length = 0 // flush the _event_queue\n                this._empty_queue_count = 0\n            } else {\n                this._empty_queue_count++\n            }\n\n            /**\n             * _empty_queue_count will increment each time the queue is polled\n             *  and it is empty. To avoid empty polling (user went idle, stepped away from comp)\n             *  we can turn it off with the isPolling flag.\n             *\n             * Polling will be re enabled when the next time PostHogLib.capture is called with\n             *  an event that should be added to the event queue.\n             */\n            if (this._empty_queue_count > 4) {\n                this.isPolling = false\n                this._empty_queue_count = 0\n            }\n            if (this.isPolling) {\n                this.poll()\n            }\n        }, this._pollInterval) as any as number\n    }\n\n    updateUnloadMetrics(): void {\n        const requests = this.formatQueue()\n        for (const key in requests) {\n            const { url, data } = requests[key]\n\n            this.captureMetrics.incr('batch-unload-requests')\n            this.captureMetrics.incr(`batch-unload-requests-${url.slice(url.length - 2)}`)\n            this.captureMetrics.incr('batch-unload', data.length)\n            this.captureMetrics.incr(`batch-unload-${url.slice(url.length - 2)}`, data.length)\n        }\n    }\n\n    unload(): void {\n        clearTimeout(this._poller)\n        const requests = this._event_queue.length > 0 ? this.formatQueue() : {}\n        this._event_queue.length = 0\n        const requestValues = Object.values(requests)\n\n        // Always force events to be sent before recordings, as events are more important, and recordings are bigger and thus less likely to arrive\n        const sortedRequests = [\n            ...requestValues.filter((r) => r.url.indexOf('/e') === 0),\n            ...requestValues.filter((r) => r.url.indexOf('/e') !== 0),\n        ]\n        sortedRequests.map(({ url, data, options }) => {\n            this.handlePollRequest(url, data, { ...options, transport: 'sendBeacon' })\n        })\n    }\n\n    formatQueue(): Record<string, QueuedRequestData> {\n        const requests: Record<string, QueuedRequestData> = {}\n        _each(this._event_queue, (request) => {\n            const { url, data, options } = request\n            const key = (options ? options._batchKey : null) || url\n            if (requests[key] === undefined) {\n                requests[key] = { data: [], url, options }\n            }\n\n            // :TRICKY: Metrics-only code\n            if (\n                options &&\n                requests[key].options &&\n                requests[key].options._metrics &&\n                !(requests[key].options._metrics as any)['rrweb_full_snapshot']\n            ) {\n                ;(requests[key].options._metrics as any)['rrweb_full_snapshot'] =\n                    options._metrics['rrweb_full_snapshot']\n            }\n            requests[key].data.push(data)\n        })\n        return requests\n    }\n}\n","export class CaptureMetrics {\n    enabled: boolean\n    metrics: Record<string, number>\n\n    constructor(enabled: boolean) {\n        this.enabled = enabled\n        this.metrics = {}\n    }\n\n    incr(key: string, by = 1): void {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) + by\n        }\n    }\n\n    decr(key: string): void {\n        if (this.enabled) {\n            key = `phjs-${key}`\n            this.metrics[key] = (this.metrics[key] || 0) - 1\n        }\n    }\n}\n","// DEFLATE is a complex format; to read this code, you should probably check the RFC first:\n// https://tools.ietf.org/html/rfc1951\n// You may also wish to take a look at the guide I made about this program:\n// https://gist.github.com/101arrowz/253f31eb5abc3d9275ab943003ffecad\n// Much of the following code is similar to that of UZIP.js:\n// https://github.com/photopea/UZIP.js\n// Many optimizations have been made, so the bundle size is ultimately smaller but performance is similar.\n// Sometimes 0 will appear where -1 would be more appropriate. This is because using a uint\n// is better for memory in most engines (I *think*).\nvar ch2 = {};\nvar wk = (function (c, id, msg, transfer, cb) {\n    var u = ch2[id] || (ch2[id] = URL.createObjectURL(new Blob([c], { type: 'text/javascript' })));\n    var w = new Worker(u);\n    w.onerror = function (e) { return cb(e.error, null); };\n    w.onmessage = function (e) { return cb(null, e.data); };\n    w.postMessage(msg, transfer);\n    return w;\n});\n\n// aliases for shorter compressed code (most minifers don't do this)\nvar u8 = Uint8Array, u16 = Uint16Array, u32 = Uint32Array;\n// fixed length extra bits\nvar fleb = new u8([0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2, 3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, /* unused */ 0, 0, /* impossible */ 0]);\n// fixed distance extra bits\n// see fleb note\nvar fdeb = new u8([0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9, 9, 10, 10, 11, 11, 12, 12, 13, 13, /* unused */ 0, 0]);\n// code length index map\nvar clim = new u8([16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15]);\n// get base, reverse index map from extra bits\nvar freb = function (eb, start) {\n    var b = new u16(31);\n    for (var i = 0; i < 31; ++i) {\n        b[i] = start += 1 << eb[i - 1];\n    }\n    // numbers here are at max 18 bits\n    var r = new u32(b[30]);\n    for (var i = 1; i < 30; ++i) {\n        for (var j = b[i]; j < b[i + 1]; ++j) {\n            r[j] = ((j - b[i]) << 5) | i;\n        }\n    }\n    return [b, r];\n};\nvar _a = freb(fleb, 2), fl = _a[0], revfl = _a[1];\n// we can ignore the fact that the other numbers are wrong; they never happen anyway\nfl[28] = 258, revfl[258] = 28;\nvar _b = freb(fdeb, 0), fd = _b[0], revfd = _b[1];\n// map of value to reverse (assuming 16 bits)\nvar rev = new u16(32768);\nfor (var i = 0; i < 32768; ++i) {\n    // reverse table algorithm from SO\n    var x = ((i & 0xAAAA) >>> 1) | ((i & 0x5555) << 1);\n    x = ((x & 0xCCCC) >>> 2) | ((x & 0x3333) << 2);\n    x = ((x & 0xF0F0) >>> 4) | ((x & 0x0F0F) << 4);\n    rev[i] = (((x & 0xFF00) >>> 8) | ((x & 0x00FF) << 8)) >>> 1;\n}\n// create huffman tree from u8 \"map\": index -> code length for code index\n// mb (max bits) must be at most 15\n// TODO: optimize/split up?\nvar hMap = (function (cd, mb, r) {\n    var s = cd.length;\n    // index\n    var i = 0;\n    // u16 \"map\": index -> # of codes with bit length = index\n    var l = new u16(mb);\n    // length of cd must be 288 (total # of codes)\n    for (; i < s; ++i)\n        ++l[cd[i] - 1];\n    // u16 \"map\": index -> minimum code for bit length = index\n    var le = new u16(mb);\n    for (i = 0; i < mb; ++i) {\n        le[i] = (le[i - 1] + l[i - 1]) << 1;\n    }\n    var co;\n    if (r) {\n        // u16 \"map\": index -> number of actual bits, symbol for code\n        co = new u16(1 << mb);\n        // bits to remove for reverser\n        var rvb = 15 - mb;\n        for (i = 0; i < s; ++i) {\n            // ignore 0 lengths\n            if (cd[i]) {\n                // num encoding both symbol and bits read\n                var sv = (i << 4) | cd[i];\n                // free bits\n                var r_1 = mb - cd[i];\n                // start value\n                var v = le[cd[i] - 1]++ << r_1;\n                // m is end value\n                for (var m = v | ((1 << r_1) - 1); v <= m; ++v) {\n                    // every 16 bit value starting with the code yields the same result\n                    co[rev[v] >>> rvb] = sv;\n                }\n            }\n        }\n    }\n    else {\n        co = new u16(s);\n        for (i = 0; i < s; ++i)\n            co[i] = rev[le[cd[i] - 1]++] >>> (15 - cd[i]);\n    }\n    return co;\n});\n// fixed length tree\nvar flt = new u8(288);\nfor (var i = 0; i < 144; ++i)\n    flt[i] = 8;\nfor (var i = 144; i < 256; ++i)\n    flt[i] = 9;\nfor (var i = 256; i < 280; ++i)\n    flt[i] = 7;\nfor (var i = 280; i < 288; ++i)\n    flt[i] = 8;\n// fixed distance tree\nvar fdt = new u8(32);\nfor (var i = 0; i < 32; ++i)\n    fdt[i] = 5;\n// fixed length map\nvar flm = /*#__PURE__*/ hMap(flt, 9, 0), flrm = /*#__PURE__*/ hMap(flt, 9, 1);\n// fixed distance map\nvar fdm = /*#__PURE__*/ hMap(fdt, 5, 0), fdrm = /*#__PURE__*/ hMap(fdt, 5, 1);\n// find max of array\nvar max = function (a) {\n    var m = a[0];\n    for (var i = 1; i < a.length; ++i) {\n        if (a[i] > m)\n            m = a[i];\n    }\n    return m;\n};\n// read d, starting at bit p and mask with m\nvar bits = function (d, p, m) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8)) >>> (p & 7)) & m;\n};\n// read d, starting at bit p continuing for at least 16 bits\nvar bits16 = function (d, p) {\n    var o = (p / 8) >> 0;\n    return ((d[o] | (d[o + 1] << 8) | (d[o + 2] << 16)) >>> (p & 7));\n};\n// get end of byte\nvar shft = function (p) { return ((p / 8) >> 0) + (p & 7 && 1); };\n// typed array slice - allows garbage collector to free original reference,\n// while being more compatible than .slice\nvar slc = function (v, s, e) {\n    if (s == null || s < 0)\n        s = 0;\n    if (e == null || e > v.length)\n        e = v.length;\n    // can't use .constructor in case user-supplied\n    var n = new (v instanceof u16 ? u16 : v instanceof u32 ? u32 : u8)(e - s);\n    n.set(v.subarray(s, e));\n    return n;\n};\n// expands raw DEFLATE data\nvar inflt = function (dat, buf, st) {\n    // source length\n    var sl = dat.length;\n    // have to estimate size\n    var noBuf = !buf || st;\n    // no state\n    var noSt = !st || st.i;\n    if (!st)\n        st = {};\n    // Assumes roughly 33% compression ratio average\n    if (!buf)\n        buf = new u8(sl * 3);\n    // ensure buffer can fit at least l elements\n    var cbuf = function (l) {\n        var bl = buf.length;\n        // need to increase size to fit\n        if (l > bl) {\n            // Double or set to necessary, whichever is greater\n            var nbuf = new u8(Math.max(bl * 2, l));\n            nbuf.set(buf);\n            buf = nbuf;\n        }\n    };\n    //  last chunk         bitpos           bytes\n    var final = st.f || 0, pos = st.p || 0, bt = st.b || 0, lm = st.l, dm = st.d, lbt = st.m, dbt = st.n;\n    // total bits\n    var tbts = sl * 8;\n    do {\n        if (!lm) {\n            // BFINAL - this is only 1 when last chunk is next\n            st.f = final = bits(dat, pos, 1);\n            // type: 0 = no compression, 1 = fixed huffman, 2 = dynamic huffman\n            var type = bits(dat, pos + 1, 3);\n            pos += 3;\n            if (!type) {\n                // go to end of byte boundary\n                var s = shft(pos) + 4, l = dat[s - 4] | (dat[s - 3] << 8), t = s + l;\n                if (t > sl) {\n                    if (noSt)\n                        throw 'unexpected EOF';\n                    break;\n                }\n                // ensure size\n                if (noBuf)\n                    cbuf(bt + l);\n                // Copy over uncompressed data\n                buf.set(dat.subarray(s, t), bt);\n                // Get new bitpos, update byte count\n                st.b = bt += l, st.p = pos = t * 8;\n                continue;\n            }\n            else if (type == 1)\n                lm = flrm, dm = fdrm, lbt = 9, dbt = 5;\n            else if (type == 2) {\n                //  literal                            lengths\n                var hLit = bits(dat, pos, 31) + 257, hcLen = bits(dat, pos + 10, 15) + 4;\n                var tl = hLit + bits(dat, pos + 5, 31) + 1;\n                pos += 14;\n                // length+distance tree\n                var ldt = new u8(tl);\n                // code length tree\n                var clt = new u8(19);\n                for (var i = 0; i < hcLen; ++i) {\n                    // use index map to get real code\n                    clt[clim[i]] = bits(dat, pos + i * 3, 7);\n                }\n                pos += hcLen * 3;\n                // code lengths bits\n                var clb = max(clt), clbmsk = (1 << clb) - 1;\n                if (!noSt && pos + tl * (clb + 7) > tbts)\n                    break;\n                // code lengths map\n                var clm = hMap(clt, clb, 1);\n                for (var i = 0; i < tl;) {\n                    var r = clm[bits(dat, pos, clbmsk)];\n                    // bits read\n                    pos += r & 15;\n                    // symbol\n                    var s = r >>> 4;\n                    // code length to copy\n                    if (s < 16) {\n                        ldt[i++] = s;\n                    }\n                    else {\n                        //  copy   count\n                        var c = 0, n = 0;\n                        if (s == 16)\n                            n = 3 + bits(dat, pos, 3), pos += 2, c = ldt[i - 1];\n                        else if (s == 17)\n                            n = 3 + bits(dat, pos, 7), pos += 3;\n                        else if (s == 18)\n                            n = 11 + bits(dat, pos, 127), pos += 7;\n                        while (n--)\n                            ldt[i++] = c;\n                    }\n                }\n                //    length tree                 distance tree\n                var lt = ldt.subarray(0, hLit), dt = ldt.subarray(hLit);\n                // max length bits\n                lbt = max(lt);\n                // max dist bits\n                dbt = max(dt);\n                lm = hMap(lt, lbt, 1);\n                dm = hMap(dt, dbt, 1);\n            }\n            else\n                throw 'invalid block type';\n            if (pos > tbts)\n                throw 'unexpected EOF';\n        }\n        // Make sure the buffer can hold this + the largest possible addition\n        // Maximum chunk size (practically, theoretically infinite) is 2^17;\n        if (noBuf)\n            cbuf(bt + 131072);\n        var lms = (1 << lbt) - 1, dms = (1 << dbt) - 1;\n        var mxa = lbt + dbt + 18;\n        while (noSt || pos + mxa < tbts) {\n            // bits read, code\n            var c = lm[bits16(dat, pos) & lms], sym = c >>> 4;\n            pos += c & 15;\n            if (pos > tbts)\n                throw 'unexpected EOF';\n            if (!c)\n                throw 'invalid length/literal';\n            if (sym < 256)\n                buf[bt++] = sym;\n            else if (sym == 256) {\n                lm = null;\n                break;\n            }\n            else {\n                var add = sym - 254;\n                // no extra bits needed if less\n                if (sym > 264) {\n                    // index\n                    var i = sym - 257, b = fleb[i];\n                    add = bits(dat, pos, (1 << b) - 1) + fl[i];\n                    pos += b;\n                }\n                // dist\n                var d = dm[bits16(dat, pos) & dms], dsym = d >>> 4;\n                if (!d)\n                    throw 'invalid distance';\n                pos += d & 15;\n                var dt = fd[dsym];\n                if (dsym > 3) {\n                    var b = fdeb[dsym];\n                    dt += bits16(dat, pos) & ((1 << b) - 1), pos += b;\n                }\n                if (pos > tbts)\n                    throw 'unexpected EOF';\n                if (noBuf)\n                    cbuf(bt + 131072);\n                var end = bt + add;\n                for (; bt < end; bt += 4) {\n                    buf[bt] = buf[bt - dt];\n                    buf[bt + 1] = buf[bt + 1 - dt];\n                    buf[bt + 2] = buf[bt + 2 - dt];\n                    buf[bt + 3] = buf[bt + 3 - dt];\n                }\n                bt = end;\n            }\n        }\n        st.l = lm, st.p = pos, st.b = bt;\n        if (lm)\n            final = 1, st.m = lbt, st.d = dm, st.n = dbt;\n    } while (!final);\n    return bt == buf.length ? buf : slc(buf, 0, bt);\n};\n// starting at p, write the minimum number of bits that can hold v to d\nvar wbits = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n};\n// starting at p, write the minimum number of bits (>8) that can hold v to d\nvar wbits16 = function (d, p, v) {\n    v <<= p & 7;\n    var o = (p / 8) >> 0;\n    d[o] |= v;\n    d[o + 1] |= v >>> 8;\n    d[o + 2] |= v >>> 16;\n};\n// creates code lengths from a frequency table\nvar hTree = function (d, mb) {\n    // Need extra info to make a tree\n    var t = [];\n    for (var i = 0; i < d.length; ++i) {\n        if (d[i])\n            t.push({ s: i, f: d[i] });\n    }\n    var s = t.length;\n    var t2 = t.slice();\n    if (!s)\n        return [new u8(0), 0];\n    if (s == 1) {\n        var v = new u8(t[0].s + 1);\n        v[t[0].s] = 1;\n        return [v, 1];\n    }\n    t.sort(function (a, b) { return a.f - b.f; });\n    // after i2 reaches last ind, will be stopped\n    // freq must be greater than largest possible number of symbols\n    t.push({ s: -1, f: 25001 });\n    var l = t[0], r = t[1], i0 = 0, i1 = 1, i2 = 2;\n    t[0] = { s: -1, f: l.f + r.f, l: l, r: r };\n    // efficient algorithm from UZIP.js\n    // i0 is lookbehind, i2 is lookahead - after processing two low-freq\n    // symbols that combined have high freq, will start processing i2 (high-freq,\n    // non-composite) symbols instead\n    // see https://reddit.com/r/photopea/comments/ikekht/uzipjs_questions/\n    while (i1 != s - 1) {\n        l = t[t[i0].f < t[i2].f ? i0++ : i2++];\n        r = t[i0 != i1 && t[i0].f < t[i2].f ? i0++ : i2++];\n        t[i1++] = { s: -1, f: l.f + r.f, l: l, r: r };\n    }\n    var maxSym = t2[0].s;\n    for (var i = 1; i < s; ++i) {\n        if (t2[i].s > maxSym)\n            maxSym = t2[i].s;\n    }\n    // code lengths\n    var tr = new u16(maxSym + 1);\n    // max bits in tree\n    var mbt = ln(t[i1 - 1], tr, 0);\n    if (mbt > mb) {\n        // more algorithms from UZIP.js\n        // TODO: find out how this code works (debt)\n        //  ind    debt\n        var i = 0, dt = 0;\n        //    left            cost\n        var lft = mbt - mb, cst = 1 << lft;\n        t2.sort(function (a, b) { return tr[b.s] - tr[a.s] || a.f - b.f; });\n        for (; i < s; ++i) {\n            var i2_1 = t2[i].s;\n            if (tr[i2_1] > mb) {\n                dt += cst - (1 << (mbt - tr[i2_1]));\n                tr[i2_1] = mb;\n            }\n            else\n                break;\n        }\n        dt >>>= lft;\n        while (dt > 0) {\n            var i2_2 = t2[i].s;\n            if (tr[i2_2] < mb)\n                dt -= 1 << (mb - tr[i2_2]++ - 1);\n            else\n                ++i;\n        }\n        for (; i >= 0 && dt; --i) {\n            var i2_3 = t2[i].s;\n            if (tr[i2_3] == mb) {\n                --tr[i2_3];\n                ++dt;\n            }\n        }\n        mbt = mb;\n    }\n    return [new u8(tr), mbt];\n};\n// get the max length and assign length codes\nvar ln = function (n, l, d) {\n    return n.s == -1\n        ? Math.max(ln(n.l, l, d + 1), ln(n.r, l, d + 1))\n        : (l[n.s] = d);\n};\n// length codes generation\nvar lc = function (c) {\n    var s = c.length;\n    // Note that the semicolon was intentional\n    while (s && !c[--s])\n        ;\n    var cl = new u16(++s);\n    //  ind      num         streak\n    var cli = 0, cln = c[0], cls = 1;\n    var w = function (v) { cl[cli++] = v; };\n    for (var i = 1; i <= s; ++i) {\n        if (c[i] == cln && i != s)\n            ++cls;\n        else {\n            if (!cln && cls > 2) {\n                for (; cls > 138; cls -= 138)\n                    w(32754);\n                if (cls > 2) {\n                    w(cls > 10 ? ((cls - 11) << 5) | 28690 : ((cls - 3) << 5) | 12305);\n                    cls = 0;\n                }\n            }\n            else if (cls > 3) {\n                w(cln), --cls;\n                for (; cls > 6; cls -= 6)\n                    w(8304);\n                if (cls > 2)\n                    w(((cls - 3) << 5) | 8208), cls = 0;\n            }\n            while (cls--)\n                w(cln);\n            cls = 1;\n            cln = c[i];\n        }\n    }\n    return [cl.subarray(0, cli), s];\n};\n// calculate the length of output from tree, code lengths\nvar clen = function (cf, cl) {\n    var l = 0;\n    for (var i = 0; i < cl.length; ++i)\n        l += cf[i] * cl[i];\n    return l;\n};\n// writes a fixed block\n// returns the new bit pos\nvar wfblk = function (out, pos, dat) {\n    // no need to write 00 as type: TypedArray defaults to 0\n    var s = dat.length;\n    var o = shft(pos + 2);\n    out[o] = s & 255;\n    out[o + 1] = s >>> 8;\n    out[o + 2] = out[o] ^ 255;\n    out[o + 3] = out[o + 1] ^ 255;\n    for (var i = 0; i < s; ++i)\n        out[o + i + 4] = dat[i];\n    return (o + 4 + s) * 8;\n};\n// writes a block\nvar wblk = function (dat, out, final, syms, lf, df, eb, li, bs, bl, p) {\n    wbits(out, p++, final);\n    ++lf[256];\n    var _a = hTree(lf, 15), dlt = _a[0], mlb = _a[1];\n    var _b = hTree(df, 15), ddt = _b[0], mdb = _b[1];\n    var _c = lc(dlt), lclt = _c[0], nlc = _c[1];\n    var _d = lc(ddt), lcdt = _d[0], ndc = _d[1];\n    var lcfreq = new u16(19);\n    for (var i = 0; i < lclt.length; ++i)\n        lcfreq[lclt[i] & 31]++;\n    for (var i = 0; i < lcdt.length; ++i)\n        lcfreq[lcdt[i] & 31]++;\n    var _e = hTree(lcfreq, 7), lct = _e[0], mlcb = _e[1];\n    var nlcc = 19;\n    for (; nlcc > 4 && !lct[clim[nlcc - 1]]; --nlcc)\n        ;\n    var flen = (bl + 5) << 3;\n    var ftlen = clen(lf, flt) + clen(df, fdt) + eb;\n    var dtlen = clen(lf, dlt) + clen(df, ddt) + eb + 14 + 3 * nlcc + clen(lcfreq, lct) + (2 * lcfreq[16] + 3 * lcfreq[17] + 7 * lcfreq[18]);\n    if (flen <= ftlen && flen <= dtlen)\n        return wfblk(out, p, dat.subarray(bs, bs + bl));\n    var lm, ll, dm, dl;\n    wbits(out, p, 1 + (dtlen < ftlen)), p += 2;\n    if (dtlen < ftlen) {\n        lm = hMap(dlt, mlb, 0), ll = dlt, dm = hMap(ddt, mdb, 0), dl = ddt;\n        var llm = hMap(lct, mlcb, 0);\n        wbits(out, p, nlc - 257);\n        wbits(out, p + 5, ndc - 1);\n        wbits(out, p + 10, nlcc - 4);\n        p += 14;\n        for (var i = 0; i < nlcc; ++i)\n            wbits(out, p + 3 * i, lct[clim[i]]);\n        p += 3 * nlcc;\n        var lcts = [lclt, lcdt];\n        for (var it = 0; it < 2; ++it) {\n            var clct = lcts[it];\n            for (var i = 0; i < clct.length; ++i) {\n                var len = clct[i] & 31;\n                wbits(out, p, llm[len]), p += lct[len];\n                if (len > 15)\n                    wbits(out, p, (clct[i] >>> 5) & 127), p += clct[i] >>> 12;\n            }\n        }\n    }\n    else {\n        lm = flm, ll = flt, dm = fdm, dl = fdt;\n    }\n    for (var i = 0; i < li; ++i) {\n        if (syms[i] > 255) {\n            var len = (syms[i] >>> 18) & 31;\n            wbits16(out, p, lm[len + 257]), p += ll[len + 257];\n            if (len > 7)\n                wbits(out, p, (syms[i] >>> 23) & 31), p += fleb[len];\n            var dst = syms[i] & 31;\n            wbits16(out, p, dm[dst]), p += dl[dst];\n            if (dst > 3)\n                wbits16(out, p, (syms[i] >>> 5) & 8191), p += fdeb[dst];\n        }\n        else {\n            wbits16(out, p, lm[syms[i]]), p += ll[syms[i]];\n        }\n    }\n    wbits16(out, p, lm[256]);\n    return p + ll[256];\n};\n// deflate options (nice << 13) | chain\nvar deo = /*#__PURE__*/ new u32([65540, 131080, 131088, 131104, 262176, 1048704, 1048832, 2114560, 2117632]);\n// empty\nvar et = /*#__PURE__*/ new u8(0);\n// compresses data into a raw DEFLATE buffer\nvar dflt = function (dat, lvl, plvl, pre, post, lst) {\n    var s = dat.length;\n    var o = new u8(pre + s + 5 * (1 + Math.floor(s / 7000)) + post);\n    // writing to this writes to the output buffer\n    var w = o.subarray(pre, o.length - post);\n    var pos = 0;\n    if (!lvl || s < 8) {\n        for (var i = 0; i <= s; i += 65535) {\n            // end\n            var e = i + 65535;\n            if (e < s) {\n                // write full block\n                pos = wfblk(w, pos, dat.subarray(i, e));\n            }\n            else {\n                // write final block\n                w[i] = lst;\n                pos = wfblk(w, pos, dat.subarray(i, s));\n            }\n        }\n    }\n    else {\n        var opt = deo[lvl - 1];\n        var n = opt >>> 13, c = opt & 8191;\n        var msk_1 = (1 << plvl) - 1;\n        //    prev 2-byte val map    curr 2-byte val map\n        var prev = new u16(32768), head = new u16(msk_1 + 1);\n        var bs1_1 = Math.ceil(plvl / 3), bs2_1 = 2 * bs1_1;\n        var hsh = function (i) { return (dat[i] ^ (dat[i + 1] << bs1_1) ^ (dat[i + 2] << bs2_1)) & msk_1; };\n        // 24576 is an arbitrary number of maximum symbols per block\n        // 424 buffer for last block\n        var syms = new u32(25000);\n        // length/literal freq   distance freq\n        var lf = new u16(288), df = new u16(32);\n        //  l/lcnt  exbits  index  l/lind  waitdx  bitpos\n        var lc_1 = 0, eb = 0, i = 0, li = 0, wi = 0, bs = 0;\n        for (; i < s; ++i) {\n            // hash value\n            var hv = hsh(i);\n            // index mod 32768\n            var imod = i & 32767;\n            // previous index with this value\n            var pimod = head[hv];\n            prev[imod] = pimod;\n            head[hv] = imod;\n            // We always should modify head and prev, but only add symbols if\n            // this data is not yet processed (\"wait\" for wait index)\n            if (wi <= i) {\n                // bytes remaining\n                var rem = s - i;\n                if ((lc_1 > 7000 || li > 24576) && rem > 423) {\n                    pos = wblk(dat, w, 0, syms, lf, df, eb, li, bs, i - bs, pos);\n                    li = lc_1 = eb = 0, bs = i;\n                    for (var j = 0; j < 286; ++j)\n                        lf[j] = 0;\n                    for (var j = 0; j < 30; ++j)\n                        df[j] = 0;\n                }\n                //  len    dist   chain\n                var l = 2, d = 0, ch_1 = c, dif = (imod - pimod) & 32767;\n                if (rem > 2 && hv == hsh(i - dif)) {\n                    var maxn = Math.min(n, rem) - 1;\n                    var maxd = Math.min(32767, i);\n                    // max possible length\n                    // not capped at dif because decompressors implement \"rolling\" index population\n                    var ml = Math.min(258, rem);\n                    while (dif <= maxd && --ch_1 && imod != pimod) {\n                        if (dat[i + l] == dat[i + l - dif]) {\n                            var nl = 0;\n                            for (; nl < ml && dat[i + nl] == dat[i + nl - dif]; ++nl)\n                                ;\n                            if (nl > l) {\n                                l = nl, d = dif;\n                                // break out early when we reach \"nice\" (we are satisfied enough)\n                                if (nl > maxn)\n                                    break;\n                                // now, find the rarest 2-byte sequence within this\n                                // length of literals and search for that instead.\n                                // Much faster than just using the start\n                                var mmd = Math.min(dif, nl - 2);\n                                var md = 0;\n                                for (var j = 0; j < mmd; ++j) {\n                                    var ti = (i - dif + j + 32768) & 32767;\n                                    var pti = prev[ti];\n                                    var cd = (ti - pti + 32768) & 32767;\n                                    if (cd > md)\n                                        md = cd, pimod = ti;\n                                }\n                            }\n                        }\n                        // check the previous match\n                        imod = pimod, pimod = prev[imod];\n                        dif += (imod - pimod + 32768) & 32767;\n                    }\n                }\n                // d will be nonzero only when a match was found\n                if (d) {\n                    // store both dist and len data in one Uint32\n                    // Make sure this is recognized as a len/dist with 28th bit (2^28)\n                    syms[li++] = 268435456 | (revfl[l] << 18) | revfd[d];\n                    var lin = revfl[l] & 31, din = revfd[d] & 31;\n                    eb += fleb[lin] + fdeb[din];\n                    ++lf[257 + lin];\n                    ++df[din];\n                    wi = i + l;\n                    ++lc_1;\n                }\n                else {\n                    syms[li++] = dat[i];\n                    ++lf[dat[i]];\n                }\n            }\n        }\n        pos = wblk(dat, w, lst, syms, lf, df, eb, li, bs, i - bs, pos);\n        // this is the easiest way to avoid needing to maintain state\n        if (!lst)\n            pos = wfblk(w, pos, et);\n    }\n    return slc(o, 0, pre + shft(pos) + post);\n};\n// CRC32 table\nvar crct = /*#__PURE__*/ (function () {\n    var t = new u32(256);\n    for (var i = 0; i < 256; ++i) {\n        var c = i, k = 9;\n        while (--k)\n            c = ((c & 1) && 0xEDB88320) ^ (c >>> 1);\n        t[i] = c;\n    }\n    return t;\n})();\n// CRC32\nvar crc = function () {\n    var c = 0xFFFFFFFF;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var cr = c;\n            for (var i = 0; i < d.length; ++i)\n                cr = crct[(cr & 255) ^ d[i]] ^ (cr >>> 8);\n            c = cr;\n        },\n        d: function () { return c ^ 0xFFFFFFFF; }\n    };\n};\n// Alder32\nvar adler = function () {\n    var a = 1, b = 0;\n    return {\n        p: function (d) {\n            // closures have awful performance\n            var n = a, m = b;\n            var l = d.length;\n            for (var i = 0; i != l;) {\n                var e = Math.min(i + 5552, l);\n                for (; i < e; ++i)\n                    n += d[i], m += n;\n                n %= 65521, m %= 65521;\n            }\n            a = n, b = m;\n        },\n        d: function () { return ((a >>> 8) << 16 | (b & 255) << 8 | (b >>> 8)) + ((a & 255) << 23) * 2; }\n    };\n};\n;\n// deflate with opts\nvar dopt = function (dat, opt, pre, post, st) {\n    return dflt(dat, opt.level == null ? 6 : opt.level, opt.mem == null ? Math.ceil(Math.max(8, Math.min(13, Math.log(dat.length))) * 1.5) : (12 + opt.mem), pre, post, !st);\n};\n// Walmart object spread\nvar mrg = function (a, b) {\n    var o = {};\n    for (var k in a)\n        o[k] = a[k];\n    for (var k in b)\n        o[k] = b[k];\n    return o;\n};\n// worker clone\n// This is possibly the craziest part of the entire codebase, despite how simple it may seem.\n// The only parameter to this function is a closure that returns an array of variables outside of the function scope.\n// We're going to try to figure out the variable names used in the closure as strings because that is crucial for workerization.\n// We will return an object mapping of true variable name to value (basically, the current scope as a JS object).\n// The reason we can't just use the original variable names is minifiers mangling the toplevel scope.\n// This took me three weeks to figure out how to do.\nvar wcln = function (fn, fnStr, td) {\n    var dt = fn();\n    var st = fn.toString();\n    var ks = st.slice(st.indexOf('[') + 1, st.lastIndexOf(']')).replace(/ /g, '').split(',');\n    for (var i = 0; i < dt.length; ++i) {\n        var v = dt[i], k = ks[i];\n        if (typeof v == 'function') {\n            fnStr += ';' + k + '=';\n            var st_1 = v.toString();\n            if (v.prototype) {\n                // for global objects\n                if (st_1.indexOf('[native code]') != -1) {\n                    var spInd = st_1.indexOf(' ', 8) + 1;\n                    fnStr += st_1.slice(spInd, st_1.indexOf('(', spInd));\n                }\n                else {\n                    fnStr += st_1;\n                    for (var t in v.prototype)\n                        fnStr += ';' + k + '.prototype.' + t + '=' + v.prototype[t].toString();\n                }\n            }\n            else\n                fnStr += st_1;\n        }\n        else\n            td[k] = v;\n    }\n    return [fnStr, td];\n};\nvar ch = [];\n// clone bufs\nvar cbfs = function (v) {\n    var tl = [];\n    for (var k in v) {\n        if (v[k] instanceof u8 || v[k] instanceof u16 || v[k] instanceof u32)\n            tl.push((v[k] = new v[k].constructor(v[k])).buffer);\n    }\n    return tl;\n};\n// use a worker to execute code\nvar wrkr = function (fns, init, id, cb) {\n    var _a;\n    if (!ch[id]) {\n        var fnStr = '', td_1 = {}, m = fns.length - 1;\n        for (var i = 0; i < m; ++i)\n            _a = wcln(fns[i], fnStr, td_1), fnStr = _a[0], td_1 = _a[1];\n        ch[id] = wcln(fns[m], fnStr, td_1);\n    }\n    var td = mrg({}, ch[id][1]);\n    return wk(ch[id][0] + ';onmessage=function(e){for(var k in e.data)self[k]=e.data[k];onmessage=' + init.toString() + '}', id, td, cbfs(td), cb);\n};\n// base async inflate fn\nvar bInflt = function () { return [u8, u16, u32, fleb, fdeb, clim, fl, fd, flrm, fdrm, rev, hMap, max, bits, bits16, shft, slc, inflt, inflateSync, pbf, gu8]; };\nvar bDflt = function () { return [u8, u16, u32, fleb, fdeb, clim, revfl, revfd, flm, flt, fdm, fdt, rev, deo, et, hMap, wbits, wbits16, hTree, ln, lc, clen, wfblk, wblk, shft, slc, dflt, dopt, deflateSync, pbf]; };\n// gzip extra\nvar gze = function () { return [gzh, gzhl, wbytes, crc, crct]; };\n// gunzip extra\nvar guze = function () { return [gzs, gzl]; };\n// zlib extra\nvar zle = function () { return [zlh, wbytes, adler]; };\n// unzlib extra\nvar zule = function () { return [zlv]; };\n// post buf\nvar pbf = function (msg) { return postMessage(msg, [msg.buffer]); };\n// get u8\nvar gu8 = function (o) { return o && o.size && new u8(o.size); };\n// async helper\nvar cbify = function (dat, opts, fns, init, id, cb) {\n    var w = wrkr(fns, init, id, function (err, dat) {\n        w.terminate();\n        cb(err, dat);\n    });\n    if (!opts.consume)\n        dat = new u8(dat);\n    w.postMessage([dat, opts], [dat.buffer]);\n    return function () { w.terminate(); };\n};\n// auto stream\nvar astrm = function (strm) {\n    strm.ondata = function (dat, final) { return postMessage([dat, final], [dat.buffer]); };\n    return function (ev) { return strm.push(ev.data[0], ev.data[1]); };\n};\n// async stream attach\nvar astrmify = function (fns, strm, opts, init, id) {\n    var t;\n    var w = wrkr(fns, init, id, function (err, dat) {\n        if (err)\n            w.terminate(), strm.ondata.call(strm, err);\n        else {\n            if (dat[1])\n                w.terminate();\n            strm.ondata.call(strm, err, dat[0], dat[1]);\n        }\n    });\n    w.postMessage(opts);\n    strm.push = function (d, f) {\n        if (t)\n            throw 'stream finished';\n        if (!strm.ondata)\n            throw 'no stream handler';\n        w.postMessage([d, t = f], [d.buffer]);\n    };\n    strm.terminate = function () { w.terminate(); };\n};\n// read 2 bytes\nvar b2 = function (d, b) { return d[b] | (d[b + 1] << 8); };\n// read 4 bytes\nvar b4 = function (d, b) { return (d[b] | (d[b + 1] << 8) | (d[b + 2] << 16)) + (d[b + 3] << 23) * 2; };\n// write bytes\nvar wbytes = function (d, b, v) {\n    for (; v; ++b)\n        d[b] = v, v >>>= 8;\n};\n// gzip header\nvar gzh = function (c, o) {\n    var fn = o.filename;\n    c[0] = 31, c[1] = 139, c[2] = 8, c[8] = o.level < 2 ? 4 : o.level == 9 ? 2 : 0, c[9] = 3; // assume Unix\n    if (o.mtime != 0)\n        wbytes(c, 4, Math.floor(new Date(o.mtime || Date.now()) / 1000));\n    if (fn) {\n        c[3] = 8;\n        for (var i = 0; i <= fn.length; ++i)\n            c[i + 10] = fn.charCodeAt(i);\n    }\n};\n// gzip footer: -8 to -4 = CRC, -4 to -0 is length\n// gzip start\nvar gzs = function (d) {\n    if (d[0] != 31 || d[1] != 139 || d[2] != 8)\n        throw 'invalid gzip data';\n    var flg = d[3];\n    var st = 10;\n    if (flg & 4)\n        st += d[10] | (d[11] << 8) + 2;\n    for (var zs = (flg >> 3 & 1) + (flg >> 4 & 1); zs > 0; zs -= !d[st++])\n        ;\n    return st + (flg & 2);\n};\n// gzip length\nvar gzl = function (d) {\n    var l = d.length;\n    return (d[l - 4] | d[l - 3] << 8 | d[l - 2] << 16) + (2 * (d[l - 1] << 23));\n};\n// gzip header length\nvar gzhl = function (o) { return 10 + ((o.filename && (o.filename.length + 1)) || 0); };\n// zlib header\nvar zlh = function (c, o) {\n    var lv = o.level, fl = lv == 0 ? 0 : lv < 6 ? 1 : lv == 9 ? 3 : 2;\n    c[0] = 120, c[1] = (fl << 6) | (fl ? (32 - 2 * fl) : 1);\n};\n// zlib valid\nvar zlv = function (d) {\n    if ((d[0] & 15) != 8 || (d[0] >>> 4) > 7 || ((d[0] << 8 | d[1]) % 31))\n        throw 'invalid zlib data';\n    if (d[1] & 32)\n        throw 'invalid zlib data: preset dictionaries not supported';\n};\nfunction AsyncCmpStrm(opts, cb) {\n    if (!cb && typeof opts == 'function')\n        cb = opts, opts = {};\n    this.ondata = cb;\n    return opts;\n}\n// zlib footer: -4 to -0 is Adler32\n/**\n * Streaming DEFLATE compression\n */\nvar Deflate = /*#__PURE__*/ (function () {\n    function Deflate(opts, cb) {\n        if (!cb && typeof opts == 'function')\n            cb = opts, opts = {};\n        this.ondata = cb;\n        this.o = opts || {};\n    }\n    Deflate.prototype.p = function (c, f) {\n        this.ondata(dopt(c, this.o, 0, 0, !f), f);\n    };\n    /**\n     * Pushes a chunk to be deflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Deflate.prototype.push = function (chunk, final) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        this.d = final;\n        this.p(chunk, final || false);\n    };\n    return Deflate;\n}());\nexport { Deflate };\n/**\n * Asynchronous streaming DEFLATE compression\n */\nvar AsyncDeflate = /*#__PURE__*/ (function () {\n    function AsyncDeflate(opts, cb) {\n        astrmify([\n            bDflt,\n            function () { return [astrm, Deflate]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Deflate(ev.data);\n            onmessage = astrm(strm);\n        }, 6);\n    }\n    return AsyncDeflate;\n}());\nexport { AsyncDeflate };\nexport function deflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n    ], function (ev) { return pbf(deflateSync(ev.data[0], ev.data[1])); }, 0, cb);\n}\n/**\n * Compresses data with DEFLATE without any wrapper\n * @param data The data to compress\n * @param opts The compression options\n * @returns The deflated version of the data\n */\nexport function deflateSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    return dopt(data, opts, 0, 0);\n}\n/**\n * Streaming DEFLATE decompression\n */\nvar Inflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an inflation stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Inflate(cb) {\n        this.s = {};\n        this.p = new u8(0);\n        this.ondata = cb;\n    }\n    Inflate.prototype.e = function (c) {\n        if (this.d)\n            throw 'stream finished';\n        if (!this.ondata)\n            throw 'no stream handler';\n        var l = this.p.length;\n        var n = new u8(l + c.length);\n        n.set(this.p), n.set(c, l), this.p = n;\n    };\n    Inflate.prototype.c = function (final) {\n        this.d = this.s.i = final || false;\n        var bts = this.s.b;\n        var dt = inflt(this.p, this.o, this.s);\n        this.ondata(slc(dt, bts, this.s.b), this.d);\n        this.o = slc(dt, this.s.b - 32768), this.s.b = this.o.length;\n        this.p = slc(this.p, (this.s.p / 8) >> 0), this.s.p &= 7;\n    };\n    /**\n     * Pushes a chunk to be inflated\n     * @param chunk The chunk to push\n     * @param final Whether this is the final chunk\n     */\n    Inflate.prototype.push = function (chunk, final) {\n        this.e(chunk), this.c(final);\n    };\n    return Inflate;\n}());\nexport { Inflate };\n/**\n * Asynchronous streaming DEFLATE decompression\n */\nvar AsyncInflate = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous inflation stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncInflate(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            function () { return [astrm, Inflate]; }\n        ], this, 0, function () {\n            var strm = new Inflate();\n            onmessage = astrm(strm);\n        }, 7);\n    }\n    return AsyncInflate;\n}());\nexport { AsyncInflate };\nexport function inflate(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt\n    ], function (ev) { return pbf(inflateSync(ev.data[0], gu8(ev.data[1]))); }, 1, cb);\n}\n/**\n * Expands DEFLATE data with no wrapper\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function inflateSync(data, out) {\n    return inflt(data, out);\n}\n// before you yell at me for not just using extends, my reason is that TS inheritance is hard to workerize.\n/**\n * Streaming GZIP compression\n */\nvar Gzip = /*#__PURE__*/ (function () {\n    function Gzip(opts, cb) {\n        this.c = crc();\n        this.l = 0;\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be GZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gzip.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Gzip.prototype.p = function (c, f) {\n        this.c.p(c);\n        this.l += c.length;\n        var raw = dopt(c, this.o, this.v && gzhl(this.o), f && 8, !f);\n        if (this.v)\n            gzh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 8, this.c.d()), wbytes(raw, raw.length - 4, this.l);\n        this.ondata(raw, f);\n    };\n    return Gzip;\n}());\nexport { Gzip };\n/**\n * Asynchronous streaming GZIP compression\n */\nvar AsyncGzip = /*#__PURE__*/ (function () {\n    function AsyncGzip(opts, cb) {\n        astrmify([\n            bDflt,\n            gze,\n            function () { return [astrm, Deflate, Gzip]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Gzip(ev.data);\n            onmessage = astrm(strm);\n        }, 8);\n    }\n    return AsyncGzip;\n}());\nexport { AsyncGzip };\nexport function gzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        gze,\n        function () { return [gzipSync]; }\n    ], function (ev) { return pbf(gzipSync(ev.data[0], ev.data[1])); }, 2, cb);\n}\n/**\n * Compresses data with GZIP\n * @param data The data to compress\n * @param opts The compression options\n * @returns The gzipped version of the data\n */\nexport function gzipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var c = crc(), l = data.length;\n    c.p(data);\n    var d = dopt(data, opts, gzhl(opts), 8), s = d.length;\n    return gzh(d, opts), wbytes(d, s - 8, c.d()), wbytes(d, s - 4, l), d;\n}\n/**\n * Streaming GZIP decompression\n */\nvar Gunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates a GUNZIP stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Gunzip(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be GUNZIPped\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Gunzip.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            var s = gzs(this.p);\n            if (s >= this.p.length && !final)\n                return;\n            this.p = this.p.subarray(s), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 8)\n                throw 'invalid gzip stream';\n            this.p = this.p.subarray(0, -8);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Gunzip;\n}());\nexport { Gunzip };\n/**\n * Asynchronous streaming GZIP decompression\n */\nvar AsyncGunzip = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous GUNZIP stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncGunzip(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            guze,\n            function () { return [astrm, Inflate, Gunzip]; }\n        ], this, 0, function () {\n            var strm = new Gunzip();\n            onmessage = astrm(strm);\n        }, 9);\n    }\n    return AsyncGunzip;\n}());\nexport { AsyncGunzip };\nexport function gunzip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        guze,\n        function () { return [gunzipSync]; }\n    ], function (ev) { return pbf(gunzipSync(ev.data[0])); }, 3, cb);\n}\n/**\n * Expands GZIP data\n * @param data The data to decompress\n * @param out Where to write the data. GZIP already encodes the output size, so providing this doesn't save memory.\n * @returns The decompressed version of the data\n */\nexport function gunzipSync(data, out) {\n    return inflt(data.subarray(gzs(data), -8), out || new u8(gzl(data)));\n}\n/**\n * Streaming Zlib compression\n */\nvar Zlib = /*#__PURE__*/ (function () {\n    function Zlib(opts, cb) {\n        this.c = adler();\n        this.v = 1;\n        Deflate.call(this, opts, cb);\n    }\n    /**\n     * Pushes a chunk to be zlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Zlib.prototype.push = function (chunk, final) {\n        Deflate.prototype.push.call(this, chunk, final);\n    };\n    Zlib.prototype.p = function (c, f) {\n        this.c.p(c);\n        var raw = dopt(c, this.o, this.v && 2, f && 4, !f);\n        if (this.v)\n            zlh(raw, this.o), this.v = 0;\n        if (f)\n            wbytes(raw, raw.length - 4, this.c.d());\n        this.ondata(raw, f);\n    };\n    return Zlib;\n}());\nexport { Zlib };\n/**\n * Asynchronous streaming Zlib compression\n */\nvar AsyncZlib = /*#__PURE__*/ (function () {\n    function AsyncZlib(opts, cb) {\n        astrmify([\n            bDflt,\n            zle,\n            function () { return [astrm, Deflate, Zlib]; }\n        ], this, AsyncCmpStrm.call(this, opts, cb), function (ev) {\n            var strm = new Zlib(ev.data);\n            onmessage = astrm(strm);\n        }, 10);\n    }\n    return AsyncZlib;\n}());\nexport { AsyncZlib };\nexport function zlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bDflt,\n        zle,\n        function () { return [zlibSync]; }\n    ], function (ev) { return pbf(zlibSync(ev.data[0], ev.data[1])); }, 4, cb);\n}\n/**\n * Compress data with Zlib\n * @param data The data to compress\n * @param opts The compression options\n * @returns The zlib-compressed version of the data\n */\nexport function zlibSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var a = adler();\n    a.p(data);\n    var d = dopt(data, opts, 2, 4);\n    return zlh(d, opts), wbytes(d, d.length - 4, a.d()), d;\n}\n/**\n * Streaming Zlib decompression\n */\nvar Unzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates a Zlib decompression stream\n     * @param cb The callback to call whenever data is inflated\n     */\n    function Unzlib(cb) {\n        this.v = 1;\n        Inflate.call(this, cb);\n    }\n    /**\n     * Pushes a chunk to be unzlibbed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Unzlib.prototype.push = function (chunk, final) {\n        Inflate.prototype.e.call(this, chunk);\n        if (this.v) {\n            if (this.p.length < 2 && !final)\n                return;\n            this.p = this.p.subarray(2), this.v = 0;\n        }\n        if (final) {\n            if (this.p.length < 4)\n                throw 'invalid zlib stream';\n            this.p = this.p.subarray(0, -4);\n        }\n        // necessary to prevent TS from using the closure value\n        // This allows for workerization to function correctly\n        Inflate.prototype.c.call(this, final);\n    };\n    return Unzlib;\n}());\nexport { Unzlib };\n/**\n * Asynchronous streaming Zlib decompression\n */\nvar AsyncUnzlib = /*#__PURE__*/ (function () {\n    /**\n     * Creates an asynchronous Zlib decompression stream\n     * @param cb The callback to call whenever data is deflated\n     */\n    function AsyncUnzlib(cb) {\n        this.ondata = cb;\n        astrmify([\n            bInflt,\n            zule,\n            function () { return [astrm, Inflate, Unzlib]; }\n        ], this, 0, function () {\n            var strm = new Unzlib();\n            onmessage = astrm(strm);\n        }, 11);\n    }\n    return AsyncUnzlib;\n}());\nexport { AsyncUnzlib };\nexport function unzlib(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return cbify(data, opts, [\n        bInflt,\n        zule,\n        function () { return [unzlibSync]; }\n    ], function (ev) { return pbf(unzlibSync(ev.data[0], gu8(ev.data[1]))); }, 5, cb);\n}\n/**\n * Expands Zlib data\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function unzlibSync(data, out) {\n    return inflt((zlv(data), data.subarray(2, -4)), out);\n}\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzip as compress, AsyncGzip as AsyncCompress };\n// Default algorithm for compression (used because having a known output size allows faster decompression)\nexport { gzipSync as compressSync, Gzip as Compress };\n/**\n * Streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar Decompress = /*#__PURE__*/ (function () {\n    /**\n     * Creates a decompression stream\n     * @param cb The callback to call whenever data is decompressed\n     */\n    function Decompress(cb) {\n        this.G = Gunzip;\n        this.I = Inflate;\n        this.Z = Unzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    Decompress.prototype.push = function (chunk, final) {\n        if (!this.ondata)\n            throw 'no stream handler';\n        if (!this.s) {\n            if (this.p && this.p.length) {\n                var n = new u8(this.p.length + chunk.length);\n                n.set(this.p), n.set(chunk, this.p.length);\n            }\n            else\n                this.p = chunk;\n            if (this.p.length > 2) {\n                var _this_1 = this;\n                var cb = function () { _this_1.ondata.apply(_this_1, arguments); };\n                this.s = (this.p[0] == 31 && this.p[1] == 139 && this.p[2] == 8)\n                    ? new this.G(cb)\n                    : ((this.p[0] & 15) != 8 || (this.p[0] >> 4) > 7 || ((this.p[0] << 8 | this.p[1]) % 31))\n                        ? new this.I(cb)\n                        : new this.Z(cb);\n                this.s.push(this.p, final);\n                this.p = null;\n            }\n        }\n        else\n            this.s.push(chunk, final);\n    };\n    return Decompress;\n}());\nexport { Decompress };\n/**\n * Asynchronous streaming GZIP, Zlib, or raw DEFLATE decompression\n */\nvar AsyncDecompress = /*#__PURE__*/ (function () {\n    /**\n   * Creates an asynchronous decompression stream\n   * @param cb The callback to call whenever data is decompressed\n   */\n    function AsyncDecompress(cb) {\n        this.G = AsyncGunzip;\n        this.I = AsyncInflate;\n        this.Z = AsyncUnzlib;\n        this.ondata = cb;\n    }\n    /**\n     * Pushes a chunk to be decompressed\n     * @param chunk The chunk to push\n     * @param final Whether this is the last chunk\n     */\n    AsyncDecompress.prototype.push = function (chunk, final) {\n        Decompress.prototype.push.call(this, chunk, final);\n    };\n    return AsyncDecompress;\n}());\nexport { AsyncDecompress };\nexport function decompress(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzip(data, opts, cb)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflate(data, opts, cb)\n            : unzlib(data, opts, cb);\n}\n/**\n * Expands compressed GZIP, Zlib, or raw DEFLATE data, automatically detecting the format\n * @param data The data to decompress\n * @param out Where to write the data. Saves memory if you know the decompressed size and provide an output buffer of that length.\n * @returns The decompressed version of the data\n */\nexport function decompressSync(data, out) {\n    return (data[0] == 31 && data[1] == 139 && data[2] == 8)\n        ? gunzipSync(data, out)\n        : ((data[0] & 15) != 8 || (data[0] >> 4) > 7 || ((data[0] << 8 | data[1]) % 31))\n            ? inflateSync(data, out)\n            : unzlibSync(data, out);\n}\n// flatten a directory structure\nvar fltn = function (d, p, t, o) {\n    for (var k in d) {\n        var val = d[k], n = p + k;\n        if (val instanceof u8)\n            t[n] = [val, o];\n        else if (Array.isArray(val))\n            t[n] = [val[0], mrg(o, val[1])];\n        else\n            fltn(val, n + '/', t, o);\n    }\n};\n/**\n * Converts a string into a Uint8Array for use with compression/decompression methods\n * @param str The string to encode\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless decoding a binary string.\n * @returns The string encoded in UTF-8/Latin-1 binary\n */\nexport function strToU8(str, latin1) {\n    var l = str.length;\n    if (!latin1 && typeof TextEncoder != 'undefined')\n        return new TextEncoder().encode(str);\n    var ar = new u8(str.length + (str.length >>> 1));\n    var ai = 0;\n    var w = function (v) { ar[ai++] = v; };\n    for (var i = 0; i < l; ++i) {\n        if (ai + 5 > ar.length) {\n            var n = new u8(ai + 8 + ((l - i) << 1));\n            n.set(ar);\n            ar = n;\n        }\n        var c = str.charCodeAt(i);\n        if (c < 128 || latin1)\n            w(c);\n        else if (c < 2048)\n            w(192 | (c >>> 6)), w(128 | (c & 63));\n        else if (c > 55295 && c < 57344)\n            c = 65536 + (c & 1023 << 10) | (str.charCodeAt(++i) & 1023),\n                w(240 | (c >>> 18)), w(128 | ((c >>> 12) & 63)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n        else\n            w(224 | (c >>> 12)), w(128 | ((c >>> 6) & 63)), w(128 | (c & 63));\n    }\n    return slc(ar, 0, ai);\n}\n/**\n * Converts a Uint8Array to a string\n * @param dat The data to decode to string\n * @param latin1 Whether or not to interpret the data as Latin-1. This should\n *               not need to be true unless encoding to binary string.\n * @returns The original UTF-8/Latin-1 string\n */\nexport function strFromU8(dat, latin1) {\n    var r = '';\n    if (!latin1 && typeof TextDecoder != 'undefined')\n        return new TextDecoder().decode(dat);\n    for (var i = 0; i < dat.length;) {\n        var c = dat[i++];\n        if (c < 128 || latin1)\n            r += String.fromCharCode(c);\n        else if (c < 224)\n            r += String.fromCharCode((c & 31) << 6 | (dat[i++] & 63));\n        else if (c < 240)\n            r += String.fromCharCode((c & 15) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63));\n        else\n            c = ((c & 15) << 18 | (dat[i++] & 63) << 12 | (dat[i++] & 63) << 6 | (dat[i++] & 63)) - 65536,\n                r += String.fromCharCode(55296 | (c >> 10), 56320 | (c & 1023));\n    }\n    return r;\n}\n;\n// skip local zip header\nvar slzh = function (d, b) { return b + 30 + b2(d, b + 26) + b2(d, b + 28); };\n// read zip header\nvar zh = function (d, b, z) {\n    var fnl = b2(d, b + 28), fn = strFromU8(d.subarray(b + 46, b + 46 + fnl), !(b2(d, b + 8) & 2048)), es = b + 46 + fnl;\n    var _a = z ? z64e(d, es) : [b4(d, b + 20), b4(d, b + 24), b4(d, b + 42)], sc = _a[0], su = _a[1], off = _a[2];\n    return [b2(d, b + 10), sc, su, fn, es + b2(d, b + 30) + b2(d, b + 32), off];\n};\n// read zip64 extra field\nvar z64e = function (d, b) {\n    for (; b2(d, b) != 1; b += 4 + b2(d, b + 2))\n        ;\n    return [b4(d, b + 12), b4(d, b + 4), b4(d, b + 20)];\n};\n// write zip header\nvar wzh = function (d, b, c, cmp, su, fn, u, o, ce, t) {\n    var fl = fn.length, l = cmp.length;\n    wbytes(d, b, ce != null ? 0x2014B50 : 0x4034B50), b += 4;\n    if (ce != null)\n        d[b] = 20, b += 2;\n    d[b] = 20, b += 2; // spec compliance? what's that?\n    d[b++] = (t == 8 && (o.level == 1 ? 6 : o.level < 6 ? 4 : o.level == 9 ? 2 : 0)), d[b++] = u && 8;\n    d[b] = t, b += 2;\n    var dt = new Date(o.mtime || Date.now()), y = dt.getFullYear() - 1980;\n    if (y < 0 || y > 119)\n        throw 'date not in range 1980-2099';\n    wbytes(d, b, ((y << 24) * 2) | ((dt.getMonth() + 1) << 21) | (dt.getDate() << 16) | (dt.getHours() << 11) | (dt.getMinutes() << 5) | (dt.getSeconds() >>> 1));\n    b += 4;\n    wbytes(d, b, c);\n    wbytes(d, b + 4, l);\n    wbytes(d, b + 8, su);\n    wbytes(d, b + 12, fl), b += 16; // skip extra field, comment\n    if (ce != null)\n        wbytes(d, b += 10, ce), b += 4;\n    d.set(fn, b);\n    b += fl;\n    if (ce == null)\n        d.set(cmp, b);\n};\n// write zip footer (end of central directory)\nvar wzf = function (o, b, c, d, e) {\n    wbytes(o, b, 0x6054B50); // skip disk\n    wbytes(o, b + 8, c);\n    wbytes(o, b + 10, c);\n    wbytes(o, b + 12, d);\n    wbytes(o, b + 16, e);\n};\nexport function zip(data, opts, cb) {\n    if (!cb)\n        cb = opts, opts = {};\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var r = {};\n    fltn(data, '', r, opts);\n    var k = Object.keys(r);\n    var lft = k.length, o = 0, tot = 0;\n    var slft = lft, files = new Array(lft);\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var cbf = function () {\n        var out = new u8(tot + 22), oe = o, cdl = tot - o;\n        tot = 0;\n        for (var i = 0; i < slft; ++i) {\n            var f = files[i];\n            try {\n                wzh(out, tot, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n                wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, tot, f.t), o += 46 + f.n.length, tot += 30 + f.n.length + f.d.length;\n            }\n            catch (e) {\n                return cb(e, null);\n            }\n        }\n        wzf(out, o, files.length, cdl, oe);\n        cb(null, out);\n    };\n    if (!lft)\n        cbf();\n    var _loop_1 = function (i) {\n        var fn = k[i];\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var c = crc(), m = file.length;\n        c.p(file);\n        var n = strToU8(fn), s = n.length;\n        var t = p.level == 0 ? 0 : 8;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                var l = d.length;\n                files[i] = {\n                    t: t,\n                    d: d,\n                    m: m,\n                    c: c.d(),\n                    u: fn.length != l,\n                    n: n,\n                    p: p\n                };\n                o += 30 + s + l;\n                tot += 76 + 2 * s + l;\n                if (!--lft)\n                    cbf();\n            }\n        };\n        if (n.length > 65535)\n            cbl('filename too long', null);\n        if (!t)\n            cbl(null, file);\n        else if (m < 160000) {\n            try {\n                cbl(null, deflateSync(file, p));\n            }\n            catch (e) {\n                cbl(e, null);\n            }\n        }\n        else\n            term.push(deflate(file, p, cbl));\n    };\n    // Cannot use lft because it can decrease\n    for (var i = 0; i < slft; ++i) {\n        _loop_1(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously creates a ZIP file. Prefer using `zip` for better performance\n * with more than one file.\n * @param data The directory structure for the ZIP archive\n * @param opts The main options, merged with per-file options\n * @returns The generated ZIP archive\n */\nexport function zipSync(data, opts) {\n    if (opts === void 0) { opts = {}; }\n    var r = {};\n    var files = [];\n    fltn(data, '', r, opts);\n    var o = 0;\n    var tot = 0;\n    for (var fn in r) {\n        var _a = r[fn], file = _a[0], p = _a[1];\n        var t = p.level == 0 ? 0 : 8;\n        var n = strToU8(fn), s = n.length;\n        if (n.length > 65535)\n            throw 'filename too long';\n        var d = t ? deflateSync(file, p) : file, l = d.length;\n        var c = crc();\n        c.p(file);\n        files.push({\n            t: t,\n            d: d,\n            m: file.length,\n            c: c.d(),\n            u: fn.length != s,\n            n: n,\n            o: o,\n            p: p\n        });\n        o += 30 + s + l;\n        tot += 76 + 2 * s + l;\n    }\n    var out = new u8(tot + 22), oe = o, cdl = tot - o;\n    for (var i = 0; i < files.length; ++i) {\n        var f = files[i];\n        wzh(out, f.o, f.c, f.d, f.m, f.n, f.u, f.p, null, f.t);\n        wzh(out, o, f.c, f.d, f.m, f.n, f.u, f.p, f.o, f.t), o += 46 + f.n.length;\n    }\n    wzf(out, o, files.length, cdl, oe);\n    return out;\n}\n/**\n * Asynchronously decompresses a ZIP archive\n * @param data The raw compressed ZIP file\n * @param cb The callback to call with the decompressed files\n * @returns A function that can be used to immediately terminate the unzipping\n */\nexport function unzip(data, cb) {\n    if (typeof cb != 'function')\n        throw 'no callback';\n    var term = [];\n    var tAll = function () {\n        for (var i = 0; i < term.length; ++i)\n            term[i]();\n    };\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558) {\n            cb('invalid zip file', null);\n            return;\n        }\n    }\n    ;\n    var lft = b2(data, e + 8);\n    if (!lft)\n        cb(null, {});\n    var c = lft;\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = lft = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    var _loop_2 = function (i) {\n        var _a = zh(data, o, z), c_1 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        var cbl = function (e, d) {\n            if (e) {\n                tAll();\n                cb(e, null);\n            }\n            else {\n                files[fn] = d;\n                if (!--lft)\n                    cb(null, files);\n            }\n        };\n        if (!c_1)\n            cbl(null, slc(data, b, b + sc));\n        else if (c_1 == 8) {\n            var infl = data.subarray(b, b + sc);\n            if (sc < 320000) {\n                try {\n                    cbl(null, inflateSync(infl, new u8(su)));\n                }\n                catch (e) {\n                    cbl(e, null);\n                }\n            }\n            else\n                term.push(inflate(infl, { size: su }, cbl));\n        }\n        else\n            cbl('unknown compression type ' + c_1, null);\n    };\n    for (var i = 0; i < c; ++i) {\n        _loop_2(i);\n    }\n    return tAll;\n}\n/**\n * Synchronously decompresses a ZIP archive. Prefer using `unzip` for better\n * performance with more than one file.\n * @param data The raw compressed ZIP file\n * @returns The decompressed files\n */\nexport function unzipSync(data) {\n    var files = {};\n    var e = data.length - 22;\n    for (; b4(data, e) != 0x6054B50; --e) {\n        if (!e || data.length - e > 65558)\n            throw 'invalid zip file';\n    }\n    ;\n    var c = b2(data, e + 8);\n    if (!c)\n        return {};\n    var o = b4(data, e + 16);\n    var z = o == 4294967295;\n    if (z) {\n        e = b4(data, e - 12);\n        if (b4(data, e) != 0x6064B50)\n            throw 'invalid zip file';\n        c = b4(data, e + 32);\n        o = b4(data, e + 48);\n    }\n    for (var i = 0; i < c; ++i) {\n        var _a = zh(data, o, z), c_2 = _a[0], sc = _a[1], su = _a[2], fn = _a[3], no = _a[4], off = _a[5], b = slzh(data, off);\n        o = no;\n        if (!c_2)\n            files[fn] = slc(data, b, b + sc);\n        else if (c_2 == 8)\n            files[fn] = inflateSync(data.subarray(b, b + sc), new u8(su));\n        else\n            throw 'unknown compression type ' + c_2;\n    }\n    return files;\n}\n","import { MaskInputOptions, SlimDOMOptions } from 'rrweb-snapshot'\nimport { PostHog } from './posthog-core'\nimport { CaptureMetrics } from './capture-metrics'\nimport { RetryQueue } from './retry-queue'\n\nexport type Property = any\nexport type Properties = Record<string, Property>\nexport interface CaptureResult {\n    event: string\n    properties: Properties\n    $set?: Properties\n    timestamp?: Date\n}\nexport type CaptureCallback = (response: any, data: any) => void\n\nexport type AutocaptureCompatibleElement = 'a' | 'button' | 'form' | 'input' | 'select' | 'textarea' | 'label'\nexport type DomAutocaptureEvents = 'click' | 'change' | 'submit'\n\n/**\n * If an array is passed for an allowlist, autocapture events will only be sent for elements matching\n * at least one of the elements in the array. Multiple allowlists can be used\n */\nexport interface AutocaptureConfig {\n    /**\n     * List of URLs to allow autocapture on, can be strings to match\n     * or regexes e.g. ['https://example.com', 'test.com/.*']\n     */\n    url_allowlist?: (string | RegExp)[]\n\n    /**\n     * List of DOM events to allow autocapture on  e.g. ['click', 'change', 'submit']\n     */\n    dom_event_allowlist?: DomAutocaptureEvents[]\n\n    /**\n     * List of DOM elements to allow autocapture on\n     * e.g. ['a', 'button', 'form', 'input', 'select', 'textarea', 'label']\n     */\n    element_allowlist?: AutocaptureCompatibleElement[]\n\n    /**\n     * List of CSS selectors to allow autocapture on\n     * e.g. ['[ph-capture]']\n     */\n    css_selector_allowlist?: string[]\n}\n\nexport interface PostHogConfig {\n    api_host: string\n    api_method: string\n    api_transport: string\n    ui_host: string | null\n    token: string\n    autocapture: boolean | AutocaptureConfig\n    rageclick: boolean\n    cross_subdomain_cookie: boolean\n    persistence: 'localStorage' | 'cookie' | 'memory' | 'localStorage+cookie'\n    persistence_name: string\n    cookie_name: string\n    loaded: (posthog_instance: PostHog) => void\n    store_google: boolean\n    save_referrer: boolean\n    test: boolean\n    verbose: boolean\n    img: boolean\n    capture_pageview: boolean\n    capture_pageleave: boolean\n    debug: boolean\n    cookie_expiration: number\n    upgrade: boolean\n    disable_session_recording: boolean\n    disable_persistence: boolean\n    disable_cookie: boolean\n    enable_recording_console_log?: boolean\n    secure_cookie: boolean\n    ip: boolean\n    opt_out_capturing_by_default: boolean\n    opt_out_persistence_by_default: boolean\n    opt_out_capturing_persistence_type: 'localStorage' | 'cookie'\n    opt_out_capturing_cookie_prefix: string | null\n    opt_in_site_apps: boolean\n    respect_dnt: boolean\n    property_blacklist: string[]\n    xhr_headers: { [header_name: string]: string }\n    on_xhr_error: (failedRequest: XMLHttpRequest) => void\n    inapp_protocol: string\n    inapp_link_new_window: boolean\n    request_batching: boolean\n    sanitize_properties: ((properties: Properties, event_name: string) => Properties) | null\n    properties_string_max_length: number\n    session_recording: SessionRecordingOptions\n    mask_all_element_attributes: boolean\n    mask_all_text: boolean\n    advanced_disable_decide: boolean\n    advanced_disable_toolbar_metrics: boolean\n    get_device_id: (uuid: string) => string\n    name: string\n    callback_fn: string\n    _onCapture: (eventName: string, eventData: CaptureResult) => void\n    _capture_metrics: boolean\n    capture_performance?: boolean\n    // Should only be used for testing. Could negatively impact performance.\n    disable_compression: boolean\n    bootstrap: {\n        distinctID?: string\n        isIdentifiedID?: boolean\n        featureFlags?: Record<string, boolean | string>\n    }\n    segment?: any\n}\n\nexport interface OptInOutCapturingOptions {\n    capture: (event: string, properties: Properties, options: CaptureOptions) => void\n    capture_event_name: string\n    capture_properties: Properties\n    enable_persistence: boolean\n    clear_persistence: boolean\n    persistence_type: string\n    cookie_prefix: string\n    cookie_expiration: number\n    cross_subdomain_cookie: boolean\n    secure_cookie: boolean\n}\n\nexport interface isFeatureEnabledOptions {\n    send_event: boolean\n}\n\nexport interface SessionRecordingOptions {\n    blockClass?: string | RegExp\n    blockSelector?: string | null\n    ignoreClass?: string\n    maskAllInputs?: boolean\n    maskInputOptions?: MaskInputOptions\n    maskInputFn?: ((text: string) => string) | null\n    slimDOMOptions?: SlimDOMOptions | 'all' | true\n    collectFonts?: boolean\n    inlineStylesheet?: boolean\n}\n\nexport enum Compression {\n    GZipJS = 'gzip-js',\n    LZ64 = 'lz64',\n    Base64 = 'base64',\n}\n\nexport interface XHROptions {\n    transport?: 'XHR' | 'sendBeacon'\n    method?: 'POST' | 'GET'\n    urlQueryArgs?: { compression: Compression }\n    verbose?: boolean\n    blob?: boolean\n    sendBeacon?: boolean\n}\n\nexport interface CaptureOptions extends XHROptions {\n    $set?: Properties /** used with $identify */\n    $set_once?: Properties /** used with $identify */\n    _batchKey?: string /** key of queue, e.g. 'sessionRecording' vs 'event' */\n    _metrics?: Properties\n    _noTruncate?: boolean /** if set, overrides and disables config.properties_string_max_length */\n    endpoint?: string /** defaults to '/e/' */\n    send_instantly?: boolean /** if set skips the batched queue */\n    timestamp?: Date\n}\n\nexport interface RetryQueueElement {\n    retryAt: Date\n    requestData: QueuedRequestData\n}\nexport interface QueuedRequestData {\n    url: string\n    data: Properties\n    options: CaptureOptions\n    headers?: Properties\n    callback?: RequestCallback\n    retriesPerformedSoFar?: number\n}\n\nexport interface XHRParams extends QueuedRequestData {\n    captureMetrics: CaptureMetrics\n    retryQueue: RetryQueue\n    onXHRError: (req: XMLHttpRequest) => void\n}\n\nexport interface DecideResponse {\n    status: number\n    supportedCompression: Compression[]\n    config: {\n        enable_collect_everything: boolean\n    }\n    custom_properties: AutoCaptureCustomProperty[] // TODO: delete, not sent\n    featureFlags: Record<string, string | boolean>\n    capturePerformance?: boolean\n    sessionRecording?: {\n        endpoint?: string\n        consoleLogRecordingEnabled?: boolean\n    }\n    toolbarParams: ToolbarParams\n    editorParams?: ToolbarParams /** @deprecated, renamed to toolbarParams, still present on older API responses */\n    toolbarVersion: 'toolbar' /** @deprecated, moved to toolbarParams */\n    isAuthenticated: boolean\n    siteApps: { id: number; url: string }[]\n}\n\nexport type FeatureFlagsCallback = (flags: string[], variants: Record<string, string | boolean>) => void\n\n// TODO: delete custom_properties after changeless typescript refactor\nexport interface AutoCaptureCustomProperty {\n    name: string\n    css_selector: string\n    event_selectors: string[]\n}\n\nexport interface CompressionData {\n    data: string\n    compression?: Compression\n}\n\nexport interface GDPROptions {\n    capture?: (\n        event: string,\n        properties: Properties,\n        options: CaptureOptions\n    ) => void /** function used for capturing a PostHog event to record the opt-in action */\n    captureEventName?: string /** event name to be used for capturing the opt-in action */\n    captureProperties?: Properties /** set of properties to be captured along with the opt-in action */\n    persistenceType?: string /** persistence mechanism used - cookie or localStorage */\n    persistencePrefix?: string /** [__ph_opt_in_out] - custom prefix to be used in the cookie/localstorage name */\n    cookieExpiration?: number /** number of days until the opt-in cookie expires */\n    crossSubdomainCookie?: boolean /** whether the opt-in cookie is set as cross-subdomain or not */\n    secureCookie?: boolean /** whether the opt-in cookie is set as secure or not */\n    respectDnt?: boolean\n    window?: Window\n}\n\nexport type RequestCallback = (response: Record<string, any>, data?: Properties) => void\n\nexport interface PersistentStore {\n    is_supported: () => boolean\n    error: (error: any) => void\n    parse: (name: string) => any\n    get: (name: string) => any\n    set: (name: string, value: any, expire_days?: number | null, cross_subdomain?: boolean, secure?: boolean) => void\n    remove: (name: string, cross_subdomain?: boolean) => void\n}\n\n// eslint-disable-next-line @typescript-eslint/ban-types\nexport type Breaker = {}\nexport type EventHandler = (event: Event) => boolean | void\n\nexport type ToolbarUserIntent = 'add-action' | 'edit-action'\nexport type ToolbarSource = 'url' | 'localstorage'\nexport type ToolbarVersion = 'toolbar'\n\n/* sync with posthog */\nexport interface ToolbarParams {\n    apiURL?: string\n    jsURL?: string\n    token?: string /** public posthog-js token */\n    temporaryToken?: string /** private temporary user token */\n    actionId?: number\n    userIntent?: ToolbarUserIntent\n    source?: ToolbarSource\n    toolbarVersion?: ToolbarVersion\n    instrument?: boolean\n    distinctId?: string\n    userEmail?: string\n    dataAttributes?: string[]\n    featureFlags?: Record<string, string | boolean>\n}\n\nexport interface PostData {\n    buffer?: BlobPart\n    compression?: Compression\n    data?: string\n}\n\nexport interface JSC {\n    (): void\n    [key: string]: (response: any) => void\n}\n\nexport type SnippetArrayItem = [method: string, ...args: any[]]\n","import { LZString } from './lz-string'\nimport { gzipSync, strToU8 } from 'fflate'\nimport { _base64Encode } from './utils'\nimport { Compression, CompressionData, XHROptions } from './types'\n\nexport function decideCompression(compressionSupport: Partial<Record<Compression, boolean>>): Compression {\n    if (compressionSupport[Compression.GZipJS]) {\n        return Compression.GZipJS\n    } else if (compressionSupport[Compression.LZ64]) {\n        return Compression.LZ64\n    } else {\n        return Compression.Base64\n    }\n}\n\nexport function compressData(\n    compression: Compression,\n    jsonData: string,\n    options: XHROptions\n): [CompressionData | Uint8Array, XHROptions] {\n    if (compression === Compression.LZ64) {\n        return [{ data: LZString.compressToBase64(jsonData), compression: Compression.LZ64 }, options]\n    } else if (compression === Compression.GZipJS) {\n        // :TRICKY: This returns an UInt8Array. We don't encode this to a string - returning a blob will do this for us.\n        return [\n            gzipSync(strToU8(jsonData), { mtime: 0 }),\n            { ...options, blob: true, urlQueryArgs: { compression: Compression.GZipJS } },\n        ]\n    } else {\n        return [{ data: _base64Encode(jsonData) }, options]\n    }\n}\n","import { _each, _HTTPBuildQuery, logger } from './utils'\nimport Config from './config'\nimport { PostData, XHROptions, XHRParams } from './types'\n\nexport const addParamsToURL = (\n    url: string,\n    urlQueryArgs: Record<string, any> | undefined,\n    parameterOptions: { ip?: boolean }\n): string => {\n    const args = urlQueryArgs || {}\n    args['ip'] = parameterOptions['ip'] ? 1 : 0\n    args['_'] = new Date().getTime().toString()\n    args['ver'] = Config.LIB_VERSION\n\n    const halves = url.split('?')\n    if (halves.length > 1) {\n        const params = halves[1].split('&')\n        for (const p of params) {\n            const key = p.split('=')[0]\n            if (args[key]) {\n                delete args[key]\n            }\n        }\n    }\n\n    const argSeparator = url.indexOf('?') > -1 ? '&' : '?'\n    return url + argSeparator + _HTTPBuildQuery(args)\n}\n\nexport const encodePostData = (data: PostData | Uint8Array, options: Partial<XHROptions>): string | BlobPart | null => {\n    if (options.blob && data.buffer) {\n        return new Blob([data.buffer], { type: 'text/plain' })\n    }\n\n    if (options.sendBeacon || options.blob) {\n        const body = encodePostData(data, { method: 'POST' }) as BlobPart\n        return new Blob([body], { type: 'application/x-www-form-urlencoded' })\n    }\n\n    if (options.method !== 'POST') {\n        return null\n    }\n\n    let body_data\n    const isUint8Array = (d: unknown): d is Uint8Array => Object.prototype.toString.call(d) === '[object Uint8Array]'\n    if (Array.isArray(data) || isUint8Array(data)) {\n        // TODO: eh? passing an Array here?\n        body_data = 'data=' + encodeURIComponent(data as any)\n    } else {\n        body_data = 'data=' + encodeURIComponent(data.data as string)\n    }\n\n    if ('compression' in data && data.compression) {\n        body_data += '&compression=' + data.compression\n    }\n\n    return body_data\n}\n\nexport const xhr = ({\n    url,\n    data,\n    headers,\n    options,\n    captureMetrics,\n    callback,\n    retriesPerformedSoFar,\n    retryQueue,\n    onXHRError,\n}: XHRParams) => {\n    const req = new XMLHttpRequest()\n    req.open(options.method || 'GET', url, true)\n\n    const body = encodePostData(data, options)\n\n    captureMetrics.incr('_send_request')\n    captureMetrics.incr('_send_request_inflight')\n\n    _each(headers, function (headerValue, headerName) {\n        req.setRequestHeader(headerName, headerValue)\n    })\n\n    if (options.method === 'POST' && !options.blob) {\n        req.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded')\n    }\n\n    // send the ph_optout cookie\n    // withCredentials cannot be modified until after calling .open on Android and Mobile Safari\n    req.withCredentials = true\n    req.onreadystatechange = () => {\n        if (req.readyState === 4) {\n            captureMetrics.incr(`xhr-response`)\n            captureMetrics.incr(`xhr-response-${req.status}`)\n            captureMetrics.decr('_send_request_inflight')\n\n            // XMLHttpRequest.DONE == 4, except in safari 4\n            if (req.status === 200) {\n                if (callback) {\n                    let response\n                    try {\n                        response = JSON.parse(req.responseText)\n                    } catch (e) {\n                        logger.error(e)\n                        return\n                    }\n                    callback(response)\n                }\n            } else {\n                if (typeof onXHRError === 'function') {\n                    onXHRError(req)\n                }\n\n                // don't retry certain errors\n                if ([401, 403, 404, 500].indexOf(req.status) < 0) {\n                    retryQueue.enqueue({\n                        url,\n                        data,\n                        options,\n                        headers,\n                        retriesPerformedSoFar: (retriesPerformedSoFar || 0) + 1,\n                        callback,\n                    })\n                }\n\n                if (callback) {\n                    callback({ status: 0 })\n                }\n            }\n        }\n    }\n    req.send(body)\n}\n","import { RequestQueueScaffold } from './base-request-queue'\nimport { encodePostData, xhr } from './send-request'\nimport { CaptureMetrics } from './capture-metrics'\nimport { QueuedRequestData, RetryQueueElement } from './types'\nimport Config from './config'\n\nexport class RetryQueue extends RequestQueueScaffold {\n    captureMetrics: CaptureMetrics\n    queue: RetryQueueElement[]\n    isPolling: boolean\n    areWeOnline: boolean\n    onXHRError: (failedRequest: XMLHttpRequest) => void\n\n    constructor(captureMetrics: CaptureMetrics, onXHRError: (failedRequest: XMLHttpRequest) => void) {\n        super()\n        this.captureMetrics = captureMetrics\n        this.isPolling = false\n        this.queue = []\n        this.areWeOnline = true\n        this.onXHRError = onXHRError\n\n        if ('onLine' in window.navigator) {\n            this.areWeOnline = window.navigator.onLine\n            window.addEventListener('online', () => {\n                this._handleWeAreNowOnline()\n            })\n            window.addEventListener('offline', () => {\n                this.areWeOnline = false\n            })\n        }\n    }\n\n    enqueue(requestData: QueuedRequestData): void {\n        const retriesPerformedSoFar = requestData.retriesPerformedSoFar || 0\n        if (retriesPerformedSoFar >= 10) {\n            return\n        }\n        const msToNextRetry = 3000 * 2 ** retriesPerformedSoFar\n        const retryAt = new Date(Date.now() + msToNextRetry)\n        console.warn(`Enqueued failed request for retry in ${msToNextRetry}`)\n        this.queue.push({ retryAt, requestData })\n        if (!this.isPolling) {\n            this.isPolling = true\n            this.poll()\n        }\n    }\n\n    poll(): void {\n        this._poller && clearTimeout(this._poller)\n        this._poller = setTimeout(() => {\n            if (this.areWeOnline && this.queue.length > 0) {\n                this.flush()\n            }\n            this.poll()\n        }, this._pollInterval) as any as number\n    }\n\n    flush(): void {\n        // using Date.now to make tests easier as recommended here https://codewithhugo.com/mocking-the-current-date-in-jest-tests/\n        const now = new Date(Date.now())\n        const toFlush = this.queue.filter(({ retryAt }) => retryAt < now)\n        if (toFlush.length > 0) {\n            this.queue = this.queue.filter(({ retryAt }) => retryAt >= now)\n            for (const { requestData } of toFlush) {\n                this._executeXhrRequest(requestData)\n            }\n        }\n    }\n\n    unload(): void {\n        if (this._poller) {\n            clearTimeout(this._poller)\n            this._poller = undefined\n        }\n        for (const { requestData } of this.queue) {\n            const { url, data, options } = requestData\n            try {\n                window.navigator.sendBeacon(url, encodePostData(data, { ...options, sendBeacon: true }))\n            } catch (e) {\n                // Note sendBeacon automatically retries, and after the first retry it will loose reference to contextual `this`.\n                // This means in some cases `this.getConfig` will be undefined.\n                if (Config.DEBUG) {\n                    console.error(e)\n                }\n            }\n        }\n        this.queue = []\n    }\n\n    _executeXhrRequest({ url, data, options, headers, callback, retriesPerformedSoFar }: QueuedRequestData): void {\n        xhr({\n            url,\n            data: data || {},\n            options: options || {},\n            headers: headers || {},\n            retriesPerformedSoFar: retriesPerformedSoFar || 0,\n            callback,\n            captureMetrics: this.captureMetrics,\n            retryQueue: this,\n            onXHRError: this.onXHRError,\n        })\n    }\n\n    _handleWeAreNowOnline(): void {\n        this.areWeOnline = true\n        this.flush()\n    }\n}\n","import { PostHogPersistence, SESSION_ID } from './posthog-persistence'\nimport { sessionStore } from './storage'\nimport { _UUID } from './utils'\nimport { PostHogConfig } from './types'\n\nconst SESSION_CHANGE_THRESHOLD = 30 * 60 * 1000 // 30 mins\nconst SESSION_LENGTH_LIMIT = 24 * 3600 * 1000 // 24 hours\n\nexport class SessionIdManager {\n    persistence: PostHogPersistence\n    _windowId: string | null | undefined\n    _sessionId: string | null | undefined\n    window_id_storage_key: string\n    primary_window_exists_storage_key: string\n    _sessionStartTimestamp: number | null\n    _sessionActivityTimestamp: number | null\n\n    constructor(config: Partial<PostHogConfig>, persistence: PostHogPersistence) {\n        this.persistence = persistence\n        this._windowId = undefined\n        this._sessionId = undefined\n        this._sessionStartTimestamp = null\n        this._sessionActivityTimestamp = null\n\n        const persistenceName = config['persistence_name'] || config['token']\n\n        this.window_id_storage_key = 'ph_' + persistenceName + '_window_id'\n        this.primary_window_exists_storage_key = 'ph_' + persistenceName + '_primary_window_exists'\n\n        // primary_window_exists is set when the DOM has been loaded and is cleared on unload\n        // if it exists here it means there was no unload which suggests this window is opened as a tab duplication, window.open, etc.\n        if (!this.persistence.disabled && sessionStore.is_supported()) {\n            const lastWindowId = sessionStore.parse(this.window_id_storage_key)\n\n            const primaryWindowExists = sessionStore.parse(this.primary_window_exists_storage_key)\n            if (lastWindowId && !primaryWindowExists) {\n                // Persist window from previous storage state\n                this._windowId = lastWindowId\n            } else {\n                // Wipe any reference to previous window id\n                sessionStore.remove(this.window_id_storage_key)\n            }\n            // Flag this session as having a primary window\n            sessionStore.set(this.primary_window_exists_storage_key, true)\n        }\n\n        this._listenToReloadWindow()\n    }\n\n    // Note: this tries to store the windowId in sessionStorage. SessionStorage is unique to the current window/tab,\n    // and persists page loads/reloads. So it's uniquely suited for storing the windowId. This function also respects\n    // when persistence is disabled (by user config) and when sessionStorage is not supported (it *should* be supported on all browsers),\n    // and in that case, it falls back to memory (which sadly, won't persist page loads)\n    _setWindowId(windowId: string): void {\n        if (windowId !== this._windowId) {\n            this._windowId = windowId\n            if (!this.persistence.disabled && sessionStore.is_supported()) {\n                sessionStore.set(this.window_id_storage_key, windowId)\n            }\n        }\n    }\n\n    _getWindowId(): string | null {\n        if (this._windowId) {\n            return this._windowId\n        }\n        if (!this.persistence.disabled && sessionStore.is_supported()) {\n            return sessionStore.parse(this.window_id_storage_key)\n        }\n        // New window id will be generated\n        return null\n    }\n\n    // Note: 'this.persistence.register' can be disabled in the config.\n    // In that case, this works by storing sessionId and the timestamp in memory.\n    _setSessionId(\n        sessionId: string | null,\n        sessionActivityTimestamp: number | null,\n        sessionStartTimestamp: number | null\n    ): void {\n        if (\n            sessionId !== this._sessionId ||\n            sessionActivityTimestamp !== this._sessionActivityTimestamp ||\n            sessionStartTimestamp !== this._sessionStartTimestamp\n        ) {\n            this._sessionStartTimestamp = sessionStartTimestamp\n            this._sessionActivityTimestamp = sessionActivityTimestamp\n            this._sessionId = sessionId\n            this.persistence.register({\n                [SESSION_ID]: [sessionActivityTimestamp, sessionId, sessionStartTimestamp],\n            })\n        }\n    }\n\n    _getSessionId(): [number, string, number] {\n        if (this._sessionId && this._sessionActivityTimestamp && this._sessionStartTimestamp) {\n            return [this._sessionActivityTimestamp, this._sessionId, this._sessionStartTimestamp]\n        }\n        const sessionId = this.persistence.props[SESSION_ID]\n\n        if (Array.isArray(sessionId) && sessionId.length === 2) {\n            // Storage does not yet have a session start time. Add the last activity timestamp as the start time\n            sessionId.push(sessionId[0])\n        }\n\n        return sessionId || [0, null, 0]\n    }\n\n    // Resets the session id by setting it to null. On the subsequent call to checkAndGetSessionAndWindowId,\n    // new ids will be generated.\n    resetSessionId(): void {\n        this._setSessionId(null, null, null)\n    }\n\n    /*\n     * Listens to window unloads and removes the primaryWindowExists key from sessionStorage.\n     * Reloaded or fresh tabs created after a DOM unloads (reloading the same tab) WILL NOT have this primaryWindowExists flag in session storage.\n     * Cloned sessions (new tab, tab duplication, window.open(), ...) WILL have this primaryWindowExists flag in their copied session storage.\n     * We conditionally check the primaryWindowExists value in the constructor to decide if the window id in the last session storage should be carried over.\n     */\n    _listenToReloadWindow(): void {\n        window.addEventListener('beforeunload', () => {\n            if (!this.persistence.disabled && sessionStore.is_supported()) {\n                sessionStore.remove(this.primary_window_exists_storage_key)\n            }\n        })\n    }\n\n    /*\n     * This function returns the current sessionId and windowId. It should be used to\n     * access these values over directly calling `._sessionId` or `._windowId`. In addition\n     * to returning the sessionId and windowId, this function also manages cycling the\n     * sessionId and windowId when appropriate by doing the following:\n     *\n     * 1. If the sessionId or windowId is not set, it will generate a new one and store it.\n     * 2. If the readOnly param is set to false, it will:\n     *    a. Check if it has been > SESSION_CHANGE_THRESHOLD since the last call with this flag set.\n     *       If so, it will generate a new sessionId and store it.\n     *    b. Update the timestamp stored with the sessionId to ensure the current session is extended\n     *       for the appropriate amount of time.\n     *\n     * @param {boolean} readOnly (optional) Defaults to False. Should be set to True when the call to the function should not extend or cycle the session (e.g. being called for non-user generated events)\n     * @param {Number} timestamp (optional) Defaults to the current time. The timestamp to be stored with the sessionId (used when determining if a new sessionId should be generated)\n     */\n    checkAndGetSessionAndWindowId(readOnly = false, _timestamp: number | null = null) {\n        const timestamp = _timestamp || new Date().getTime()\n\n        // eslint-disable-next-line prefer-const\n        let [lastTimestamp, sessionId, startTimestamp] = this._getSessionId()\n        let windowId = this._getWindowId()\n\n        const sessionPastMaximumLength =\n            startTimestamp && startTimestamp > 0 && Math.abs(timestamp - startTimestamp) > SESSION_LENGTH_LIMIT\n\n        if (\n            !sessionId ||\n            (!readOnly && Math.abs(timestamp - lastTimestamp) > SESSION_CHANGE_THRESHOLD) ||\n            sessionPastMaximumLength\n        ) {\n            sessionId = _UUID()\n            windowId = _UUID()\n            startTimestamp = timestamp\n        } else if (!windowId) {\n            windowId = _UUID()\n        }\n\n        const newTimestamp = lastTimestamp === 0 || !readOnly || sessionPastMaximumLength ? timestamp : lastTimestamp\n        const sessionStartTimestamp = startTimestamp === 0 ? new Date().getTime() : startTimestamp\n\n        this._setWindowId(windowId)\n        this._setSessionId(sessionId, newTimestamp, sessionStartTimestamp)\n\n        return {\n            sessionId: sessionId,\n            windowId: windowId,\n        }\n    }\n}\n","/**\n * Integrate Sentry with PostHog. This will add a direct link to the person in Sentry, and an $exception event in PostHog\n *\n * ### Usage\n *\n *     Sentry.init({\n *          dsn: 'https://example',\n *          integrations: [\n *              new posthog.SentryIntegration(posthog)\n *          ]\n *     })\n *\n * @param {Object} [posthog] The posthog object\n * @param {string} [organization] Optional: The Sentry organization, used to send a direct link from PostHog to Sentry\n * @param {Number} [projectId] Optional: The Sentry project id, used to send a direct link from PostHog to Sentry\n * @param {string} [prefix] Optional: Url of a self-hosted sentry instance (default: https://sentry.io/organizations/)\n */\nimport { Event, EventProcessor, Hub, Integration } from '@sentry/types'\nimport { Properties } from '../types'\nimport { PostHog } from '../posthog-core'\n\nexport class SentryIntegration implements Integration {\n    name: string\n\n    setupOnce: (addGlobalEventProcessor: (callback: EventProcessor) => void, getCurrentHub: () => Hub) => void\n\n    constructor(_posthog: PostHog, organization?: string, projectId?: number, prefix?: string) {\n        // setupOnce gets called by Sentry when it intializes the plugin\n        // 'this' is not this: PostHogLib object, but the new class that's created.\n        // TODO: refactor to a real class. The types\n        this.name = 'posthog-js'\n        this.setupOnce = function (addGlobalEventProcessor: (callback: EventProcessor) => void) {\n            addGlobalEventProcessor((event: Event) => {\n                if (event.level !== 'error' || !_posthog.__loaded) return event\n                if (!event.tags) event.tags = {}\n                const host = _posthog.config.ui_host || _posthog.config.api_host\n                event.tags['PostHog Person URL'] = host + '/person/' + _posthog.get_distinct_id()\n                if (_posthog.sessionRecordingStarted()) {\n                    event.tags['PostHog Recording URL'] =\n                        host +\n                        '/recordings/#sessionRecordingId=' +\n                        _posthog.sessionManager.checkAndGetSessionAndWindowId(true).sessionId\n                }\n                const exceptions = event.exception?.values || []\n                const data: Properties = {\n                    $sentry_event_id: event.event_id,\n                    $sentry_exception: event.exception,\n                    $sentry_exception_message: exceptions[0]?.value,\n                    $sentry_exception_type: exceptions[0]?.type,\n                    $sentry_tags: event.tags,\n                }\n                if (organization && projectId)\n                    data['$sentry_url'] =\n                        (prefix || 'https://sentry.io/organizations/') +\n                        organization +\n                        '/issues/?project=' +\n                        projectId +\n                        '&query=' +\n                        event.event_id\n                _posthog.capture('$exception', data)\n                return event\n            })\n        }\n    }\n}\n","/**\n * Extend Segment with extra PostHog JS functionality. Required for things like Recordings and feature flags to work correctly.\n *\n * ### Usage\n *\n *  ```js\n *  // After your standard segment anyalytics install\n *  analytics.load(\"GOEDfA21zZTtR7clsBuDvmBKAtAdZ6Np\");\n *\n *  analytics.ready(() => {\n *    posthog.init('<posthog-api-key>', {\n *      capture_pageview: false,\n *      segment: window.analytics, // NOTE: Be sure to use window.analytics here!\n *    });\n *    window.analytics.page();\n *  })\n *  ```\n */\nimport { PostHog } from '../posthog-core'\n\n// Loosely based on https://github.com/segmentio/analytics-next/blob/master/packages/core/src/plugins/index.ts\ninterface SegmentPluginContext {\n    event: {\n        event: string\n        userId?: string\n        anonymousId?: string\n        properties: any\n    }\n}\n\ninterface SegmentPlugin {\n    name: string\n    version: string\n    type: 'enrichment'\n    isLoaded: () => boolean\n    load: (ctx: SegmentPluginContext, instance: any, config?: any) => Promise<unknown>\n    unload?: (ctx: SegmentPluginContext, instance: any) => Promise<unknown> | unknown\n    ready?: () => Promise<unknown>\n    track?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n    identify?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n    page?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n    group?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n    alias?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n    screen?: (ctx: SegmentPluginContext) => Promise<SegmentPluginContext> | SegmentPluginContext\n}\n\nexport const createSegmentIntegration = (posthog: PostHog): SegmentPlugin => {\n    const enrichEvent = (ctx: SegmentPluginContext, eventName: string) => {\n        if (!ctx.event.userId && ctx.event.anonymousId !== posthog.get_distinct_id()) {\n            // This is our only way of detecting that segment's analytics.reset() has been called so we also call it\n            posthog.reset()\n        }\n        if (ctx.event.userId && ctx.event.userId !== posthog.get_distinct_id()) {\n            posthog.register({\n                distinct_id: ctx.event.userId,\n            })\n            posthog.reloadFeatureFlags()\n        }\n\n        const additionalProperties = posthog._calculate_event_properties(eventName, ctx.event.properties)\n        ctx.event.properties = Object.assign({}, additionalProperties, ctx.event.properties)\n        return ctx\n    }\n\n    return {\n        name: 'PostHog JS',\n        type: 'enrichment',\n        version: '1.0.0',\n        isLoaded: () => true,\n        load: () => Promise.resolve(),\n        track: (ctx) => enrichEvent(ctx, ctx.event.event),\n        page: (ctx) => enrichEvent(ctx, '$pageview'),\n        identify: (ctx) => enrichEvent(ctx, '$identify'),\n        screen: (ctx) => enrichEvent(ctx, '$screen'),\n    }\n}\n","import { _UUID } from './utils'\n\nexport class PageViewIdManager {\n    _pageViewId: string | undefined\n\n    _seenFirstPageView = false\n\n    onPageview(): void {\n        // As the first $pageview event may come after a different event,\n        // we only reset the ID _after_ the second $pageview event.\n        if (this._seenFirstPageView) {\n            this._pageViewId = _UUID()\n        }\n        this._seenFirstPageView = true\n    }\n\n    getPageViewId(): string {\n        if (!this._pageViewId) {\n            this._pageViewId = _UUID()\n        }\n\n        return this._pageViewId\n    }\n}\n","import { LZString } from './lz-string'\nimport Config from './config'\nimport {\n    logger,\n    document,\n    userAgent,\n    window,\n    _isUndefined,\n    _extend,\n    _each,\n    _isObject,\n    _isBlockedUA,\n    _copyAndTruncateStrings,\n    _isArray,\n    _safewrap_class,\n    _register_event,\n    _UUID,\n    _info,\n    _eachArray,\n} from './utils'\nimport { autocapture } from './autocapture'\nimport { PostHogPeople } from './posthog-people'\nimport { PostHogFeatureFlags } from './posthog-featureflags'\nimport { ALIAS_ID_KEY, PEOPLE_DISTINCT_ID_KEY, PostHogPersistence } from './posthog-persistence'\nimport { SessionRecording } from './extensions/sessionrecording'\nimport { WebPerformanceObserver } from './extensions/web-performance'\nimport { Decide } from './decide'\nimport { Toolbar } from './extensions/toolbar'\nimport { clearOptInOut, hasOptedIn, hasOptedOut, optIn, optOut, userOptedOut } from './gdpr-utils'\nimport { cookieStore, localStore } from './storage'\nimport { RequestQueue } from './request-queue'\nimport { CaptureMetrics } from './capture-metrics'\nimport { compressData, decideCompression } from './compression'\nimport { addParamsToURL, encodePostData, xhr } from './send-request'\nimport { RetryQueue } from './retry-queue'\nimport { SessionIdManager } from './sessionid'\nimport {\n    CaptureOptions,\n    CaptureResult,\n    Compression,\n    ToolbarParams,\n    GDPROptions,\n    isFeatureEnabledOptions,\n    JSC,\n    OptInOutCapturingOptions,\n    PostHogConfig,\n    Properties,\n    Property,\n    RequestCallback,\n    SnippetArrayItem,\n    XHROptions,\n    AutocaptureConfig,\n} from './types'\nimport { SentryIntegration } from './extensions/sentry-integration'\nimport { createSegmentIntegration } from './extensions/segment-integration'\nimport { PageViewIdManager } from './page-view-id'\n\n/*\nSIMPLE STYLE GUIDE:\n\nthis.x === public function\nthis._x === internal - only use within this file\nthis.__x === private - only use within the class\n\nGlobals should be all caps\n*/\n\nenum InitType {\n    INIT_MODULE = 0,\n    INIT_SNIPPET = 1,\n}\n\nlet init_type: InitType\n\n// TODO: the type of this is very loose. Sometimes it's also PostHogLib itself\nlet posthog_master: Record<string, PostHog> & {\n    init: (token: string, config: Partial<PostHogConfig>, name: string) => void\n}\n\n// some globals for comparisons\nconst __NOOP = () => {}\nconst __NOOPTIONS = {}\n\nconst PRIMARY_INSTANCE_NAME = 'posthog'\n\n/*\n * Dynamic... constants? Is that an oxymoron?\n */\n// http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n// https://developer.mozilla.org/en-US/docs/DOM/XMLHttpRequest#withCredentials\nconst USE_XHR = window.XMLHttpRequest && 'withCredentials' in new XMLHttpRequest()\n\n// IE<10 does not support cross-origin XHR's but script tags\n// with defer won't block window.onload; ENQUEUE_REQUESTS\n// should only be true for Opera<12\nlet ENQUEUE_REQUESTS = !USE_XHR && userAgent.indexOf('MSIE') === -1 && userAgent.indexOf('Mozilla') === -1\n\nconst defaultConfig = (): PostHogConfig => ({\n    api_host: 'https://app.posthog.com',\n    api_method: 'POST',\n    api_transport: 'XHR',\n    ui_host: null,\n    token: '',\n    autocapture: true,\n    rageclick: true,\n    cross_subdomain_cookie: document?.location?.hostname?.indexOf('herokuapp.com') === -1,\n    persistence: 'cookie',\n    persistence_name: '',\n    cookie_name: '',\n    loaded: __NOOP,\n    store_google: true,\n    save_referrer: true,\n    test: false,\n    verbose: false,\n    img: false,\n    capture_pageview: true,\n    capture_pageleave: true, // We'll only capture pageleave events if capture_pageview is also true\n    debug: false,\n    cookie_expiration: 365,\n    upgrade: false,\n    disable_session_recording: false,\n    disable_persistence: false,\n    disable_cookie: false,\n    enable_recording_console_log: undefined, // When undefined, it falls back to the server-side setting\n    secure_cookie: window?.location?.protocol === 'https:',\n    ip: true,\n    opt_out_capturing_by_default: false,\n    opt_out_persistence_by_default: false,\n    opt_out_capturing_persistence_type: 'localStorage',\n    opt_out_capturing_cookie_prefix: null,\n    opt_in_site_apps: false,\n    property_blacklist: [],\n    respect_dnt: false,\n    sanitize_properties: null,\n    xhr_headers: {}, // { header: value, header2: value }\n    inapp_protocol: '//',\n    inapp_link_new_window: false,\n    request_batching: true,\n    properties_string_max_length: 65535,\n    session_recording: {\n        // select set of rrweb config options we expose to our users\n        // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n        blockClass: 'ph-no-capture',\n        blockSelector: null,\n        ignoreClass: 'ph-ignore-input',\n        maskAllInputs: true,\n        maskInputOptions: {},\n        maskInputFn: null,\n        slimDOMOptions: {},\n        collectFonts: false,\n        inlineStylesheet: true,\n    },\n    mask_all_element_attributes: false,\n    mask_all_text: false,\n    advanced_disable_decide: false,\n    advanced_disable_toolbar_metrics: false,\n    on_xhr_error: (req) => {\n        const error = 'Bad HTTP status: ' + req.status + ' ' + req.statusText\n        console.error(error)\n    },\n    get_device_id: (uuid) => uuid,\n    // Used for internal testing\n    _onCapture: __NOOP,\n    _capture_metrics: false,\n    capture_performance: undefined,\n    name: 'posthog',\n    callback_fn: 'posthog._jsc',\n    bootstrap: {},\n    disable_compression: false,\n})\n\n/**\n * create_mplib(token:string, config:object, name:string)\n *\n * This function is used by the init method of PostHogLib objects\n * as well as the main initializer at the end of the JSLib (that\n * initializes document.posthog as well as any additional instances\n * declared before this file has loaded).\n */\nconst create_mplib = function (token: string, config?: Partial<PostHogConfig>, name?: string): PostHog {\n    let instance: PostHog\n    const target =\n        name === PRIMARY_INSTANCE_NAME || !posthog_master ? posthog_master : name ? posthog_master[name] : undefined\n\n    if (target && init_type === InitType.INIT_MODULE) {\n        instance = target as any\n    } else {\n        if (target && !_isArray(target)) {\n            console.error('You have already initialized ' + name)\n            // TODO: throw something instead?\n            // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n            // @ts-ignore\n            return\n        }\n        instance = new PostHog()\n    }\n\n    instance._init(token, config, name)\n    instance.toolbar.maybeLoadToolbar()\n\n    instance.sessionRecording = new SessionRecording(instance)\n    instance.sessionRecording.startRecordingIfEnabled()\n\n    instance.webPerformance = new WebPerformanceObserver(instance)\n    instance.webPerformance.startObservingIfEnabled()\n\n    instance.__autocapture = instance.get_config('autocapture')\n    if (instance.get_config('autocapture')) {\n        instance.__autocapture = instance.get_config('autocapture')\n        const num_buckets = 100\n        const num_enabled_buckets = 100\n        if (!autocapture.enabledForProject(instance.get_config('token'), num_buckets, num_enabled_buckets)) {\n            instance.__autocapture = false\n            logger.log('Not in active bucket: disabling Automatic Event Collection.')\n        } else if (!autocapture.isBrowserSupported()) {\n            instance.__autocapture = false\n            logger.log('Disabling Automatic Event Collection because this browser is not supported')\n        } else {\n            autocapture.init(instance)\n        }\n    }\n\n    // if any instance on the page has debug = true, we set the\n    // global debug to be true\n    Config.DEBUG = Config.DEBUG || instance.get_config('debug')\n\n    // if target is not defined, we called init after the lib already\n    // loaded, so there won't be an array of things to execute\n    if (typeof target !== 'undefined' && _isArray(target)) {\n        // Crunch through the people queue first - we queue this data up &\n        // flush on identify, so it's better to do all these operations first\n        instance._execute_array.call(instance.people, (target as any).people)\n        instance._execute_array(target)\n    }\n\n    return instance\n}\n\n/**\n * PostHog Library Object\n * @constructor\n */\nexport class PostHog {\n    __loaded: boolean\n    config: PostHogConfig\n\n    persistence: PostHogPersistence\n    sessionManager: SessionIdManager\n    pageViewIdManager: PageViewIdManager\n    people: PostHogPeople\n    featureFlags: PostHogFeatureFlags\n    feature_flags: PostHogFeatureFlags\n    toolbar: Toolbar\n    sessionRecording: SessionRecording | undefined\n    webPerformance: WebPerformanceObserver | undefined\n\n    _captureMetrics: CaptureMetrics\n    _requestQueue: RequestQueue\n    _retryQueue: RetryQueue\n\n    _triggered_notifs: any\n    compression: Partial<Record<Compression, boolean>>\n    _jsc: JSC\n    __captureHooks: ((eventName: string) => void)[]\n    __request_queue: [url: string, data: Record<string, any>, options: XHROptions, callback?: RequestCallback][]\n    __autocapture: boolean | AutocaptureConfig | undefined\n    decideEndpointWasHit: boolean\n\n    SentryIntegration: typeof SentryIntegration\n    segmentIntegration: () => any\n\n    constructor() {\n        this.config = defaultConfig()\n        this.compression = {}\n        this.decideEndpointWasHit = false\n        this.SentryIntegration = SentryIntegration\n        this.segmentIntegration = () => createSegmentIntegration(this)\n        this.__captureHooks = []\n        this.__request_queue = []\n        this.__loaded = false\n        this.__autocapture = undefined\n        this._jsc = function () {} as JSC\n        this.people = new PostHogPeople(this)\n        this.featureFlags = new PostHogFeatureFlags(this)\n        this.feature_flags = this.featureFlags\n        this.toolbar = new Toolbar(this)\n        this.pageViewIdManager = new PageViewIdManager()\n\n        // these are created in _init() after we have the config\n        this._captureMetrics = undefined as any\n        this._requestQueue = undefined as any\n        this._retryQueue = undefined as any\n        this.persistence = undefined as any\n        this.sessionManager = undefined as any\n    }\n\n    // Initialization methods\n\n    /**\n     * This function initializes a new instance of the PostHog capturing object.\n     * All new instances are added to the main posthog object as sub properties (such as\n     * posthog.library_name) and also returned by this function. To define a\n     * second instance on the page, you would call:\n     *\n     *     posthog.init('new token', { your: 'config' }, 'library_name');\n     *\n     * and use it like so:\n     *\n     *     posthog.library_name.capture(...);\n     *\n     * @param {String} token   Your PostHog API token\n     * @param {Object} [config]  A dictionary of config options to override. <a href=\"https://github.com/posthog/posthog-js/blob/6e0e873/src/posthog-core.js#L57-L91\">See a list of default config options</a>.\n     * @param {String} [name]    The name for the new posthog instance that you want created\n     */\n    init(token: string, config?: Partial<PostHogConfig>, name?: string): PostHog | void {\n        if (_isUndefined(name)) {\n            console.error('You must name your new library: init(token, config, name)')\n            return\n        }\n        if (name === PRIMARY_INSTANCE_NAME) {\n            console.error('You must initialize the main posthog object right after you include the PostHog js snippet')\n            return\n        }\n\n        const instance: PostHog = create_mplib(token, config, name)\n        posthog_master[name] = instance\n        instance._loaded()\n\n        return instance\n    }\n\n    // posthog._init(token:string, config:object, name:string)\n    //\n    // This function sets up the current instance of the posthog\n    // library.  The difference between this method and the init(...)\n    // method is this one initializes the actual instance, whereas the\n    // init(...) method sets up a new library and calls _init on it.\n    //\n    _init(token: string, config: Partial<PostHogConfig> = {}, name?: string): void {\n        this.__loaded = true\n        this.config = {} as PostHogConfig // will be set right below\n        this._triggered_notifs = []\n\n        this.set_config(\n            _extend({}, defaultConfig(), config, {\n                name: name,\n                token: token,\n                callback_fn: (name === PRIMARY_INSTANCE_NAME ? name : PRIMARY_INSTANCE_NAME + '.' + name) + '._jsc',\n            })\n        )\n\n        this._jsc = function () {} as JSC\n\n        this._captureMetrics = new CaptureMetrics(this.get_config('_capture_metrics'))\n        this._requestQueue = new RequestQueue(this._captureMetrics, this._handle_queued_event.bind(this))\n        this._retryQueue = new RetryQueue(this._captureMetrics, this.get_config('on_xhr_error'))\n        this.__captureHooks = []\n        this.__request_queue = []\n\n        this.persistence = new PostHogPersistence(this.config)\n        this.sessionManager = new SessionIdManager(this.config, this.persistence)\n\n        this._gdpr_init()\n\n        if (config.segment) {\n            // Use segments anonymousId instead\n            this.config.get_device_id = () => config.segment.user().anonymousId()\n\n            // If a segment user ID exists, set it as the distinct_id\n            if (config.segment.user().id()) {\n                this.register({\n                    distinct_id: config.segment.user().id(),\n                })\n            }\n\n            config.segment.register(this.segmentIntegration())\n        }\n\n        if (config.bootstrap?.distinctID !== undefined) {\n            const uuid = this.get_config('get_device_id')(_UUID())\n            const deviceID = config.bootstrap?.isIdentifiedID ? uuid : config.bootstrap.distinctID\n            this.register({\n                distinct_id: config.bootstrap.distinctID,\n                $device_id: deviceID,\n            })\n        }\n\n        if (this._hasBootstrappedFeatureFlags()) {\n            const activeFlags = Object.keys(config.bootstrap?.featureFlags || {})\n                .filter((flag) => !!config.bootstrap?.featureFlags?.[flag])\n                .reduce(\n                    (res: Record<string, string | boolean>, key) => (\n                        (res[key] = config.bootstrap?.featureFlags?.[key] || false), res\n                    ),\n                    {}\n                )\n\n            this.featureFlags.receivedFeatureFlags({ featureFlags: activeFlags })\n        }\n\n        if (!this.get_distinct_id()) {\n            // There is no need to set the distinct id\n            // or the device id if something was already stored\n            // in the persitence\n            const uuid = this.get_config('get_device_id')(_UUID())\n            this.register_once(\n                {\n                    distinct_id: uuid,\n                    $device_id: uuid,\n                },\n                ''\n            )\n        }\n        // Set up event handler for pageleave\n        // Use `onpagehide` if available, see https://calendar.perfplanet.com/2020/beaconing-in-practice/#beaconing-reliability-avoiding-abandons\n        window.addEventListener &&\n            window.addEventListener('onpagehide' in self ? 'pagehide' : 'unload', this._handle_unload.bind(this))\n    }\n\n    // Private methods\n\n    _loaded(): void {\n        // Pause `reloadFeatureFlags` calls in config.loaded callback.\n        // These feature flags are loaded in the decide call made right afterwards\n        this.featureFlags.setReloadingPaused(true)\n\n        try {\n            this.get_config('loaded')(this)\n        } catch (err) {\n            console.error('`loaded` function failed', err)\n        }\n\n        this._start_queue_if_opted_in()\n\n        // this happens after so a user can call identify in\n        // the loaded callback\n        if (this.get_config('capture_pageview')) {\n            this.capture('$pageview', {}, { send_instantly: true })\n        }\n\n        // Call decide to get what features are enabled and other settings.\n        // As a reminder, if the /decide endpoint is disabled, feature flags, toolbar, session recording, autocapture,\n        // and compression will not be available.\n        if (!this.get_config('advanced_disable_decide')) {\n            new Decide(this).call()\n        }\n\n        this.featureFlags.resetRequestQueue()\n        this.featureFlags.setReloadingPaused(false)\n    }\n\n    _start_queue_if_opted_in(): void {\n        if (!this.has_opted_out_capturing()) {\n            if (this.get_config('request_batching')) {\n                this._requestQueue.poll()\n            }\n        }\n    }\n\n    _dom_loaded(): void {\n        if (!this.has_opted_out_capturing()) {\n            _eachArray(this.__request_queue, (item) => {\n                this._send_request(...item)\n            })\n        }\n\n        this.__request_queue = []\n\n        this._start_queue_if_opted_in()\n    }\n\n    /**\n     * _prepare_callback() should be called by callers of _send_request for use\n     * as the callback argument.\n     *\n     * If there is no callback, this returns null.\n     * If we are going to make XHR/XDR requests, this returns a function.\n     * If we are going to use script tags, this returns a string to use as the\n     * callback GET param.\n     */\n    // TODO: get rid of the \"| string\"\n    _prepare_callback(callback?: RequestCallback, data?: Properties): RequestCallback | null | string {\n        if (_isUndefined(callback)) {\n            return null\n        }\n\n        if (USE_XHR) {\n            return function (response) {\n                callback(response, data)\n            }\n        } else {\n            // if the user gives us a callback, we store as a random\n            // property on this instances jsc function and update our\n            // callback string to reflect that.\n            const jsc = this._jsc\n            const randomized_cb = '' + Math.floor(Math.random() * 100000000)\n            const callback_string = this.get_config('callback_fn') + '[' + randomized_cb + ']'\n            jsc[randomized_cb] = function (response: any) {\n                delete jsc[randomized_cb]\n                callback(response, data)\n            }\n            return callback_string\n        }\n    }\n\n    _handle_unload(): void {\n        if (!this.get_config('request_batching')) {\n            if (this.get_config('capture_pageview') && this.get_config('capture_pageleave')) {\n                this.capture('$pageleave', null, { transport: 'sendBeacon' })\n            }\n            return\n        }\n\n        if (this.get_config('capture_pageview') && this.get_config('capture_pageleave')) {\n            this.capture('$pageleave')\n        }\n        if (this.get_config('_capture_metrics')) {\n            this._requestQueue.updateUnloadMetrics()\n            this.capture('$capture_metrics', this._captureMetrics.metrics)\n        }\n        this._requestQueue.unload()\n        this._retryQueue.unload()\n    }\n\n    _handle_queued_event(url: string, data: Record<string, any>, options?: XHROptions): void {\n        const jsonData = JSON.stringify(data)\n        this.__compress_and_send_json_request(url, jsonData, options || __NOOPTIONS, __NOOP)\n    }\n\n    __compress_and_send_json_request(\n        url: string,\n        jsonData: string,\n        options: XHROptions,\n        callback?: RequestCallback\n    ): void {\n        const [data, _options] = compressData(decideCompression(this.compression), jsonData, options)\n        this._send_request(url, data, _options, callback)\n    }\n\n    _send_request(url: string, data: Record<string, any>, options: XHROptions, callback?: RequestCallback): void {\n        if (ENQUEUE_REQUESTS) {\n            this.__request_queue.push([url, data, options, callback])\n            return\n        }\n\n        const DEFAULT_OPTIONS = {\n            method: this.get_config('api_method'),\n            transport: this.get_config('api_transport'),\n            verbose: this.get_config('verbose'),\n        }\n\n        options = _extend(DEFAULT_OPTIONS, options || {})\n        if (!USE_XHR) {\n            options.method = 'GET'\n        }\n\n        const useSendBeacon = 'sendBeacon' in window.navigator && options.transport === 'sendBeacon'\n        url = addParamsToURL(url, options.urlQueryArgs || {}, {\n            ip: this.get_config('ip'),\n        })\n\n        if (_isObject(data) && this.get_config('img')) {\n            const img = document.createElement('img')\n            img.src = url\n            document.body.appendChild(img)\n        } else if (useSendBeacon) {\n            // beacon documentation https://w3c.github.io/beacon/\n            // beacons format the message and use the type property\n            // also no need to try catch as sendBeacon does not report errors\n            //   and is defined as best effort attempt\n            try {\n                window.navigator.sendBeacon(url, encodePostData(data, { ...options, sendBeacon: true }))\n            } catch (e) {\n                if (this.get_config('debug')) {\n                    console.error(e)\n                }\n            }\n        } else if (USE_XHR) {\n            try {\n                xhr({\n                    url: url,\n                    data: data,\n                    headers: this.get_config('xhr_headers'),\n                    options: options,\n                    captureMetrics: this._captureMetrics,\n                    callback,\n                    retriesPerformedSoFar: 0,\n                    retryQueue: this._retryQueue,\n                    onXHRError: this.get_config('on_xhr_error'),\n                })\n            } catch (e) {\n                console.error(e)\n            }\n        } else {\n            const script = document.createElement('script')\n            script.type = 'text/javascript'\n            script.async = true\n            script.defer = true\n            script.src = url\n            const s = document.getElementsByTagName('script')[0]\n            s.parentNode?.insertBefore(script, s)\n        }\n    }\n\n    /**\n     * _execute_array() deals with processing any posthog function\n     * calls that were called before the PostHog library were loaded\n     * (and are thus stored in an array so they can be called later)\n     *\n     * Note: we fire off all the posthog function calls && user defined\n     * functions BEFORE we fire off posthog capturing calls. This is so\n     * identify/register/set_config calls can properly modify early\n     * capturing calls.\n     *\n     * @param {Array} array\n     */\n    _execute_array(array: SnippetArrayItem[]): void {\n        let fn_name\n        const alias_calls: SnippetArrayItem[] = []\n        const other_calls: SnippetArrayItem[] = []\n        const capturing_calls: SnippetArrayItem[] = []\n        _eachArray(array, (item) => {\n            if (item) {\n                fn_name = item[0]\n                if (_isArray(fn_name)) {\n                    capturing_calls.push(item) // chained call e.g. posthog.get_group().set()\n                } else if (typeof item === 'function') {\n                    ;(item as any).call(this)\n                } else if (_isArray(item) && fn_name === 'alias') {\n                    alias_calls.push(item)\n                } else if (\n                    _isArray(item) &&\n                    fn_name.indexOf('capture') !== -1 &&\n                    typeof (this as any)[fn_name] === 'function'\n                ) {\n                    capturing_calls.push(item)\n                } else {\n                    other_calls.push(item)\n                }\n            }\n        })\n\n        const execute = function (calls: SnippetArrayItem[], thisArg: any) {\n            _eachArray(\n                calls,\n                function (item) {\n                    if (_isArray(item[0])) {\n                        // chained call\n                        let caller = thisArg\n                        _each(item, function (call) {\n                            caller = caller[call[0]].apply(caller, call.slice(1))\n                        })\n                    } else {\n                        // eslint-disable-next-line @typescript-eslint/ban-ts-comment\n                        // @ts-ignore\n                        this[item[0]].apply(this, item.slice(1))\n                    }\n                },\n                thisArg\n            )\n        }\n\n        execute(alias_calls, this)\n        execute(other_calls, this)\n        execute(capturing_calls, this)\n    }\n\n    _hasBootstrappedFeatureFlags(): boolean {\n        return (\n            (this.config.bootstrap?.featureFlags && Object.keys(this.config.bootstrap?.featureFlags).length > 0) ||\n            false\n        )\n    }\n\n    /**\n     * push() keeps the standard async-array-push\n     * behavior around after the lib is loaded.\n     * This is only useful for external integrations that\n     * do not wish to rely on our convenience methods\n     * (created in the snippet).\n     *\n     * ### Usage:\n     *     posthog.push(['register', { a: 'b' }]);\n     *\n     * @param {Array} item A [function_name, args...] array to be executed\n     */\n    push(item: SnippetArrayItem): void {\n        this._execute_array([item])\n    }\n\n    /**\n     * Capture an event. This is the most important and\n     * frequently used PostHog function.\n     *\n     * ### Usage:\n     *\n     *     // capture an event named 'Registered'\n     *     posthog.capture('Registered', {'Gender': 'Male', 'Age': 21});\n     *\n     *     // capture an event using navigator.sendBeacon\n     *     posthog.capture('Left page', {'duration_seconds': 35}, {transport: 'sendBeacon'});\n     *\n     * @param {String} event_name The name of the event. This can be anything the user does - 'Button Click', 'Sign Up', 'Item Purchased', etc.\n     * @param {Object} [properties] A set of properties to include with the event you're sending. These describe the user who did the event or details about the event itself.\n     * @param {Object} [options] Optional configuration for this capture request.\n     * @param {String} [options.transport] Transport method for network request ('XHR' or 'sendBeacon').\n     * @param {Date} [options.timestamp] Timestamp is a Date object. If not set, it'll automatically be set to the current time.\n     */\n    capture(\n        event_name: string,\n        properties?: Properties | null,\n        options: CaptureOptions = __NOOPTIONS\n    ): CaptureResult | void {\n        // While developing, a developer might purposefully _not_ call init(),\n        // in this case, we would like capture to be a noop.\n        if (!this.__loaded) {\n            return\n        }\n\n        if (userOptedOut(this, false)) {\n            return\n        }\n\n        this._captureMetrics.incr('capture')\n        if (event_name === '$snapshot') {\n            this._captureMetrics.incr('snapshot')\n        }\n\n        options = options || __NOOPTIONS\n        const transport = options['transport'] // external API, don't minify 'transport' prop\n        if (transport) {\n            options.transport = transport // 'transport' prop name can be minified internally\n        }\n\n        // typing doesn't prevent interesting data\n        if (_isUndefined(event_name) || typeof event_name !== 'string') {\n            console.error('No event name provided to posthog.capture')\n            return\n        }\n\n        if (_isBlockedUA(userAgent)) {\n            return\n        }\n\n        // update persistence\n        this.persistence.update_search_keyword(document.referrer)\n\n        if (this.get_config('store_google')) {\n            this.persistence.update_campaign_params()\n        }\n        if (this.get_config('save_referrer')) {\n            this.persistence.update_referrer_info(document.referrer)\n        }\n\n        let data: CaptureResult = {\n            event: event_name,\n            properties: this._calculate_event_properties(event_name, properties || {}),\n        }\n\n        if (event_name === '$identify' && options.$set) {\n            data['$set'] = options['$set']\n        }\n\n        data = _copyAndTruncateStrings(\n            data,\n            options._noTruncate ? null : this.get_config('properties_string_max_length')\n        )\n        data.timestamp = options.timestamp || new Date()\n\n        if (this.get_config('debug')) {\n            logger.log('PostHog.js send', data)\n        }\n        const jsonData = JSON.stringify(data)\n\n        const url = this.get_config('api_host') + (options.endpoint || '/e/')\n\n        const has_unique_traits = options !== __NOOPTIONS\n\n        if (\n            this.get_config('request_batching') &&\n            (!has_unique_traits || options._batchKey) &&\n            !options.send_instantly\n        ) {\n            this._requestQueue.enqueue(url, data, options)\n        } else {\n            this.__compress_and_send_json_request(url, jsonData, options)\n        }\n\n        this._invokeCaptureHooks(event_name, data)\n\n        return data\n    }\n\n    _addCaptureHook(callback: (eventName: string) => void): void {\n        this.__captureHooks.push(callback)\n    }\n\n    _invokeCaptureHooks(eventName: string, eventData: CaptureResult): void {\n        this.config._onCapture(eventName, eventData)\n        _each(this.__captureHooks, (callback) => callback(eventName))\n    }\n\n    _calculate_event_properties(event_name: string, event_properties: Properties): Properties {\n        // set defaults\n        const start_timestamp = this.persistence.remove_event_timer(event_name)\n        let properties = { ...event_properties }\n        properties['token'] = this.get_config('token')\n\n        if (event_name === '$snapshot') {\n            const persistenceProps = this.persistence.properties()\n            properties['distinct_id'] = persistenceProps.distinct_id\n            return properties\n        }\n\n        const infoProperties = _info.properties()\n\n        if (this.sessionManager) {\n            const { sessionId, windowId } = this.sessionManager.checkAndGetSessionAndWindowId()\n            properties['$session_id'] = sessionId\n            properties['$window_id'] = windowId\n        }\n\n        if (this.webPerformance?.isEnabled) {\n            if (event_name === '$pageview') {\n                this.pageViewIdManager.onPageview()\n            }\n            properties = _extend(properties, { $pageview_id: this.pageViewIdManager.getPageViewId() })\n        }\n\n        if (event_name === '$performance_event') {\n            const persistenceProps = this.persistence.properties()\n            // Early exit for $performance_event as we only need session and $current_url\n            properties['distinct_id'] = persistenceProps.distinct_id\n            properties['$current_url'] = infoProperties.$current_url\n            return properties\n        }\n\n        // set $duration if time_event was previously called for this event\n        if (typeof start_timestamp !== 'undefined') {\n            const duration_in_ms = new Date().getTime() - start_timestamp\n            properties['$duration'] = parseFloat((duration_in_ms / 1000).toFixed(3))\n        }\n\n        // note: extend writes to the first object, so lets make sure we\n        // don't write to the persistence properties object and info\n        // properties object by passing in a new object\n\n        // update properties with pageview info and super-properties\n        properties = _extend({}, infoProperties, this.persistence.properties(), properties)\n\n        const property_blacklist = this.get_config('property_blacklist')\n        if (_isArray(property_blacklist)) {\n            _each(property_blacklist, function (blacklisted_prop) {\n                delete properties[blacklisted_prop]\n            })\n        } else {\n            console.error('Invalid value for property_blacklist config: ' + property_blacklist)\n        }\n\n        const sanitize_properties = this.get_config('sanitize_properties')\n        if (sanitize_properties) {\n            properties = sanitize_properties(properties, event_name)\n        }\n\n        return properties\n    }\n\n    /**\n     * Register a set of super properties, which are included with all\n     * events. This will overwrite previous super property values.\n     *\n     * ### Usage:\n     *\n     *     // register 'Gender' as a super property\n     *     posthog.register({'Gender': 'Female'});\n     *\n     *     // register several super properties when a user signs up\n     *     posthog.register({\n     *         'Email': 'jdoe@example.com',\n     *         'Account Type': 'Free'\n     *     });\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     * @param {Number} [days] How many days since the user's last visit to store the super properties\n     */\n    register(properties: Properties, days?: number): void {\n        this.persistence.register(properties, days)\n    }\n\n    /**\n     * Register a set of super properties only once. This will not\n     * overwrite previous super property values, unlike register().\n     *\n     * ### Usage:\n     *\n     *     // register a super property for the first time only\n     *     posthog.register_once({\n     *         'First Login Date': new Date().toISOString()\n     *     });\n     *\n     * ### Notes:\n     *\n     * If default_value is specified, current super properties\n     * with that value will be overwritten.\n     *\n     * @param {Object} properties An associative array of properties to store about the user\n     * @param {*} [default_value] Value to override if already set in super properties (ex: 'False') Default: 'None'\n     * @param {Number} [days] How many days since the users last visit to store the super properties\n     */\n    register_once(properties: Properties, default_value?: Property, days?: number): void {\n        this.persistence.register_once(properties, default_value, days)\n    }\n\n    /**\n     * Delete a super property stored with the current user.\n     *\n     * @param {String} property The name of the super property to remove\n     */\n    unregister(property: string): void {\n        this.persistence.unregister(property)\n    }\n\n    _register_single(prop: string, value: Property) {\n        this.register({ [prop]: value })\n    }\n\n    /*\n     * Get feature flag value for user (supports multivariate flags).\n     *\n     * ### Usage:\n     *\n     *     if(posthog.getFeatureFlag('beta-feature') === 'some-value') { // do something }\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    getFeatureFlag(key: string, options?: { send_event?: boolean }): boolean | string | undefined {\n        return this.featureFlags.getFeatureFlag(key, options)\n    }\n\n    /*\n     * See if feature flag is enabled for user.\n     *\n     * ### Usage:\n     *\n     *     if(posthog.isFeatureEnabled('beta-feature')) { // do something }\n     *\n     * @param {Object|String} prop Key of the feature flag.\n     * @param {Object|String} options (optional) If {send_event: false}, we won't send an $feature_flag_call event to PostHog.\n     */\n    isFeatureEnabled(key: string, options?: isFeatureEnabledOptions): boolean {\n        return this.featureFlags.isFeatureEnabled(key, options)\n    }\n\n    reloadFeatureFlags(): void {\n        this.featureFlags.reloadFeatureFlags()\n    }\n\n    /*\n     * Register an event listener that runs when feature flags become available or when they change.\n     * If there are flags, the listener is called immediately in addition to being called on future changes.\n     *\n     * ### Usage:\n     *\n     *     posthog.onFeatureFlags(function(featureFlags) { // do something })\n     *\n     * @param {Function} [callback] The callback function will be called once the feature flags are ready or when they are updated.\n     *                              It'll return a list of feature flags enabled for the user.\n     */\n    onFeatureFlags(callback: (flags: string[], variants: Record<string, boolean | string>) => void): void {\n        return this.featureFlags.onFeatureFlags(callback)\n    }\n\n    /**\n     * Identify a user with a unique ID instead of a PostHog\n     * randomly generated distinct_id. If the method is never called,\n     * then unique visitors will be identified by a UUID generated\n     * the first time they visit the site.\n     *\n     * If user properties are passed, they are also sent to posthog.\n     *\n     * ### Usage:\n     *\n     *      posthog.identify('[user unique id]')\n     *      posthog.identify('[user unique id]', { email: 'john@example.com' })\n     *      posthog.identify('[user unique id]', {}, { referral_code: '12345' })\n     *\n     * ### Notes:\n     *\n     * You can call this function to overwrite a previously set\n     * unique ID for the current user. PostHog cannot translate\n     * between IDs at this time, so when you change a user's ID\n     * they will appear to be a new user.\n     *\n     * When used alone, posthog.identify will change the user's\n     * distinct_id to the unique ID provided. When used in tandem\n     * with posthog.alias, it will allow you to identify based on\n     * unique ID and map that back to the original, anonymous\n     * distinct_id given to the user upon her first arrival to your\n     * site (thus connecting anonymous pre-signup activity to\n     * post-signup activity). Though the two work together, do not\n     * call identify() at the same time as alias(). Calling the two\n     * at the same time can cause a race condition, so it is best\n     * practice to call identify on the original, anonymous ID\n     * right after you've aliased it.\n     *\n     * @param {String} [new_distinct_id] A string that uniquely identifies a user. If not provided, the distinct_id currently in the persistent store (cookie or localStorage) will be used.\n     * @param {Object} [userPropertiesToSet] Optional: An associative array of properties to store about the user\n     * @param {Object} [userPropertiesToSetOnce] Optional: An associative array of properties to store about the user. If property is previously set, this does not override that value.\n     */\n    identify(new_distinct_id?: string, userPropertiesToSet?: Properties, userPropertiesToSetOnce?: Properties): void {\n        //if the new_distinct_id has not been set ignore the identify event\n        if (!new_distinct_id) {\n            console.error('Unique user id has not been set in posthog.identify')\n            return\n        }\n\n        this._captureMetrics.incr('identify')\n\n        const previous_distinct_id = this.get_distinct_id()\n        this.register({ $user_id: new_distinct_id })\n\n        if (!this.get_property('$device_id')) {\n            // The persisted distinct id might not actually be a device id at all\n            // it might be a distinct id of the user from before\n            const device_id = previous_distinct_id\n            this.register_once(\n                {\n                    $had_persisted_distinct_id: true,\n                    $device_id: device_id,\n                },\n                ''\n            )\n        }\n\n        // identify only changes the distinct id if it doesn't match either the existing or the alias;\n        // if it's new, blow away the alias as well.\n        if (new_distinct_id !== previous_distinct_id && new_distinct_id !== this.get_property(ALIAS_ID_KEY)) {\n            this.unregister(ALIAS_ID_KEY)\n            this.register({ distinct_id: new_distinct_id })\n        }\n\n        // send an $identify event any time the distinct_id is changing and the old ID is an anoymous ID\n        // - logic on the server will determine whether or not to do anything with it.\n        if (\n            new_distinct_id !== previous_distinct_id &&\n            (!this.get_property('$device_id') || previous_distinct_id === this.get_property('$device_id'))\n        ) {\n            this.capture(\n                '$identify',\n                {\n                    distinct_id: new_distinct_id,\n                    $anon_distinct_id: previous_distinct_id,\n                },\n                { $set: userPropertiesToSet || {}, $set_once: userPropertiesToSetOnce || {} }\n            )\n            // let the reload feature flag request know to send this previous distinct id\n            // for flag consistency\n            this.featureFlags.setAnonymousDistinctId(previous_distinct_id)\n        } else {\n            if (userPropertiesToSet) {\n                this.people.set(userPropertiesToSet)\n            }\n            if (userPropertiesToSetOnce) {\n                this.people.set_once(userPropertiesToSetOnce)\n            }\n        }\n\n        // Reload active feature flags if the user identity changes.\n        // Note we don't reload this on property changes as these get processed async\n        if (new_distinct_id !== previous_distinct_id) {\n            this.reloadFeatureFlags()\n        }\n    }\n\n    /**\n     * Alpha feature: don't use unless you know what you're doing!\n     *\n     * Sets group analytics information for subsequent events and reloads feature flags.\n     *\n     * @param {String} groupType Group type (example: 'organization')\n     * @param {String} groupKey Group key (example: 'org::5')\n     * @param {Object} groupPropertiesToSet Optional properties to set for group\n     */\n    group(groupType: string, groupKey: string, groupPropertiesToSet?: Properties): void {\n        if (!groupType || !groupKey) {\n            console.error('posthog.group requires a group type and group key')\n            return\n        }\n\n        this._captureMetrics.incr('group')\n\n        const existingGroups = this.getGroups()\n\n        this.register({ $groups: { ...existingGroups, [groupType]: groupKey } })\n\n        if (groupPropertiesToSet) {\n            this.capture('$groupidentify', {\n                $group_type: groupType,\n                $group_key: groupKey,\n                $group_set: groupPropertiesToSet,\n            })\n        }\n\n        // If groups change, reload feature flags.\n        if (existingGroups[groupType] !== groupKey) {\n            this.reloadFeatureFlags()\n        }\n    }\n\n    /**\n     * Resets only the group properties of the user currently logged in.\n     */\n    resetGroups(): void {\n        this.register({ $groups: {} })\n\n        // If groups changed, reload feature flags.\n        this.reloadFeatureFlags()\n    }\n\n    /**\n     * Clears super properties and generates a new random distinct_id for this instance.\n     * Useful for clearing data when a user logs out.\n     */\n    reset(reset_device_id?: boolean): void {\n        const device_id = this.get_property('$device_id')\n        this.persistence.clear()\n        this.sessionManager.resetSessionId()\n        const uuid = this.get_config('get_device_id')(_UUID())\n        this.register_once(\n            {\n                distinct_id: uuid,\n                $device_id: reset_device_id ? uuid : device_id,\n            },\n            ''\n        )\n    }\n\n    /**\n     * Returns the current distinct id of the user. This is either the id automatically\n     * generated by the library or the id that has been passed by a call to identify().\n     *\n     * ### Notes:\n     *\n     * get_distinct_id() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically. For example:\n     *\n     *     // set distinct_id after the posthog library has loaded\n     *     posthog.init('YOUR PROJECT TOKEN', {\n     *         loaded: function(posthog) {\n     *             distinct_id = posthog.get_distinct_id();\n     *         }\n     *     });\n     */\n    get_distinct_id(): string {\n        return this.get_property('distinct_id')\n    }\n\n    getGroups(): Record<string, any> {\n        return this.get_property('$groups') || {}\n    }\n\n    /**\n     * Create an alias, which PostHog will use to link two distinct_ids going forward (not retroactively).\n     * Multiple aliases can map to the same original ID, but not vice-versa. Aliases can also be chained - the\n     * following is a valid scenario:\n     *\n     *     posthog.alias('new_id', 'existing_id');\n     *     ...\n     *     posthog.alias('newer_id', 'new_id');\n     *\n     * If the original ID is not passed in, we will use the current distinct_id - probably the auto-generated GUID.\n     *\n     * ### Notes:\n     *\n     * The best practice is to call alias() when a unique ID is first created for a user\n     * (e.g., when a user first registers for an account and provides an email address).\n     * alias() should never be called more than once for a given user, except to\n     * chain a newer ID to a previously new ID, as described above.\n     *\n     * @param {String} alias A unique identifier that you want to use for this user in the future.\n     * @param {String} [original] The current identifier being used for this user.\n     */\n    alias(alias: string, original?: string): CaptureResult | void | number {\n        // If the $people_distinct_id key exists in persistence, there has been a previous\n        // posthog.people.identify() call made for this user. It is VERY BAD to make an alias with\n        // this ID, as it will duplicate users.\n        if (alias === this.get_property(PEOPLE_DISTINCT_ID_KEY)) {\n            logger.critical('Attempting to create alias for existing People user - aborting.')\n            return -2\n        }\n\n        if (_isUndefined(original)) {\n            original = this.get_distinct_id()\n        }\n        if (alias !== original) {\n            this._register_single(ALIAS_ID_KEY, alias)\n            return this.capture('$create_alias', { alias: alias, distinct_id: original })\n        } else {\n            console.error('alias matches current distinct_id - skipping api call.')\n            this.identify(alias)\n            return -1\n        }\n    }\n\n    /**\n     * Update the configuration of a posthog library instance.\n     *\n     * The default config is:\n     *\n     *     {\n     *       // PostHog API host\n     *       api_host: 'https://app.posthog.com',\n     *\n     *       // HTTP method for capturing requests\n     *       api_method: 'POST'\n     *\n     *       // PostHog web app host, currently only used by the Sentry integration.\n     *       // This will only be different from api_host when using a reverse-proxied API host  in that case\n     *       // the original web app host needs to be passed here so that links to the web app are still convenient.\n     *       ui_host: 'https://app.posthog.com',\n     *\n     *       // Automatically capture clicks, form submissions and change events\n     *       autocapture: true\n     *\n     *       // Capture rage clicks\n     *       rageclick: true\n     *\n     *       // transport for sending requests ('XHR' or 'sendBeacon')\n     *       // NB: sendBeacon should only be used for scenarios such as\n     *       // page unload where a \"best-effort\" attempt to send is\n     *       // acceptable; the sendBeacon API does not support callbacks\n     *       // or any way to know the result of the request. PostHog\n     *       // capturing via sendBeacon will not support any event-\n     *       // batching or retry mechanisms.\n     *       api_transport: 'XHR'\n     *\n     *       // super properties cookie expiration (in days)\n     *       cookie_expiration: 365\n     *\n     *       // super properties span subdomains\n     *       cross_subdomain_cookie: true\n     *\n     *       // debug mode\n     *       debug: false\n     *\n     *       // if this is true, the posthog cookie or localStorage entry\n     *       // will be deleted, and no user persistence will take place\n     *       disable_persistence: false\n     *\n     *       // if this is true, PostHog will automatically determine\n     *       // City, Region and Country data using the IP address of\n     *       //the client\n     *       ip: true\n     *\n     *       // opt users out of capturing by this PostHog instance by default\n     *       opt_out_capturing_by_default: false\n     *\n     *       // opt users out of browser data storage by this PostHog instance by default\n     *       opt_out_persistence_by_default: false\n     *\n     *       // persistence mechanism used by opt-in/opt-out methods - cookie\n     *       // or localStorage - falls back to cookie if localStorage is unavailable\n     *       opt_out_capturing_persistence_type: 'localStorage'\n     *\n     *       // customize the name of cookie/localStorage set by opt-in/opt-out methods\n     *       opt_out_capturing_cookie_prefix: null\n     *\n     *       // type of persistent store for super properties (cookie/\n     *       // localStorage) if set to 'localStorage', any existing\n     *       // posthog cookie value with the same persistence_name\n     *       // will be transferred to localStorage and deleted\n     *       persistence: 'cookie'\n     *\n     *       // name for super properties persistent store\n     *       persistence_name: ''\n     *\n     *       // names of properties/superproperties which should never\n     *       // be sent with capture() calls\n     *       property_blacklist: []\n     *\n     *       // if this is true, posthog cookies will be marked as\n     *       // secure, meaning they will only be transmitted over https\n     *       secure_cookie: false\n     *\n     *       // should we capture a page view on page load\n     *       capture_pageview: true\n     *\n     *       // if you set upgrade to be true, the library will check for\n     *       // a cookie from our old js library and import super\n     *       // properties from it, then the old cookie is deleted\n     *       // The upgrade config option only works in the initialization,\n     *       // so make sure you set it when you create the library.\n     *       upgrade: false\n     *\n     *       // if this is true, session recording is always disabled.\n     *       disable_session_recording: false,\n     *\n     *       // extra HTTP request headers to set for each API request, in\n     *       // the format {'Header-Name': value}\n     *       xhr_headers: {}\n     *\n     *       // protocol for fetching in-app message resources, e.g.\n     *       // 'https://' or 'http://'; defaults to '//' (which defers to the\n     *       // current page's protocol)\n     *       inapp_protocol: '//'\n     *\n     *       // whether to open in-app message link in new tab/window\n     *       inapp_link_new_window: false\n     *\n     *      // a set of rrweb config options that PostHog users can configure\n     *      // see https://github.com/rrweb-io/rrweb/blob/master/guide.md\n     *      session_recording: {\n     *         blockClass: 'ph-no-capture',\n     *         blockSelector: null,\n     *         ignoreClass: 'ph-ignore-input',\n     *         maskAllInputs: true,\n     *         maskInputOptions: {},\n     *         maskInputFn: null,\n     *         slimDOMOptions: {},\n     *         collectFonts: false\n     *      }\n     *\n     *      // prevent autocapture from capturing any attribute names on elements\n     *      mask_all_element_attributes: false\n     *\n     *      // prevent autocapture from capturing textContent on all elements\n     *      mask_all_text: false\n     *\n     *      // Anonymous users get a random UUID as their device by default.\n     *      // This option allows overriding that option.\n     *      get_device_id: (uuid) => uuid\n     *     }\n     *\n     *\n     * @param {Object} config A dictionary of new configuration values to update\n     */\n\n    set_config(config: Partial<PostHogConfig>): void {\n        const oldConfig = { ...this.config }\n        if (_isObject(config)) {\n            _extend(this.config, config)\n\n            if (!this.get_config('persistence_name')) {\n                this.config.persistence_name = this.config.cookie_name\n            }\n            if (!this.get_config('disable_persistence')) {\n                this.config.disable_persistence = this.config.disable_cookie\n            }\n\n            if (this.persistence) {\n                this.persistence.update_config(this.config)\n            }\n\n            if (localStore.is_supported() && localStore.get('ph_debug') === 'true') {\n                this.config.debug = true\n            }\n            if (this.get_config('debug')) {\n                Config.DEBUG = true\n            }\n\n            if (this.sessionRecording && typeof config.disable_session_recording !== 'undefined') {\n                if (oldConfig.disable_session_recording !== config.disable_session_recording) {\n                    if (config.disable_session_recording) {\n                        this.sessionRecording.stopRecording()\n                    } else {\n                        this.sessionRecording.startRecordingIfEnabled()\n                    }\n                }\n            }\n        }\n    }\n\n    /**\n     * turns session recording on, and updates the config option\n     * disable_session_recording to false\n     */\n    startSessionRecording(): void {\n        this.set_config({ disable_session_recording: false })\n    }\n\n    /**\n     * turns session recording off, and updates the config option\n     * disable_session_recording to true\n     */\n    stopSessionRecording(): void {\n        this.set_config({ disable_session_recording: true })\n    }\n\n    /**\n     * returns a boolean indicating whether session recording\n     * is currently running\n     */\n    sessionRecordingStarted(): boolean {\n        return !!this.sessionRecording?.started()\n    }\n\n    /**\n     * returns a boolean indicating whether the toolbar loaded\n     * @param toolbarParams\n     */\n\n    loadToolbar(params: ToolbarParams): boolean {\n        return this.toolbar.loadToolbar(params)\n    }\n\n    /**\n     * returns the current config object for the library.\n     */\n    get_config<K extends keyof PostHogConfig>(prop_name: K): PostHogConfig[K] {\n        return this.config?.[prop_name]\n    }\n\n    /**\n     * Returns the value of the super property named property_name. If no such\n     * property is set, get_property() will return the undefined value.\n     *\n     * ### Notes:\n     *\n     * get_property() can only be called after the PostHog library has finished loading.\n     * init() has a loaded function available to handle this automatically. For example:\n     *\n     *     // grab value for 'user_id' after the posthog library has loaded\n     *     posthog.init('YOUR PROJECT TOKEN', {\n     *         loaded: function(posthog) {\n     *             user_id = posthog.get_property('user_id');\n     *         }\n     *     });\n     *\n     * @param {String} property_name The name of the super property you want to retrieve\n     */\n    get_property(property_name: string): Property | undefined {\n        return this.persistence['props'][property_name]\n    }\n\n    toString(): string {\n        let name = this.get_config('name') ?? PRIMARY_INSTANCE_NAME\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            name = PRIMARY_INSTANCE_NAME + '.' + name\n        }\n        return name\n    }\n\n    // perform some housekeeping around GDPR opt-in/out state\n    _gdpr_init(): void {\n        const is_localStorage_requested = this.get_config('opt_out_capturing_persistence_type') === 'localStorage'\n\n        // try to convert opt-in/out cookies to localStorage if possible\n        if (is_localStorage_requested && localStore.is_supported()) {\n            if (!this.has_opted_in_capturing() && this.has_opted_in_capturing({ persistence_type: 'cookie' })) {\n                this.opt_in_capturing({ enable_persistence: false })\n            }\n            if (!this.has_opted_out_capturing() && this.has_opted_out_capturing({ persistence_type: 'cookie' })) {\n                this.opt_out_capturing({ clear_persistence: false })\n            }\n            this.clear_opt_in_out_capturing({\n                persistence_type: 'cookie',\n                enable_persistence: false,\n            })\n        }\n\n        // check whether the user has already opted out - if so, clear & disable persistence\n        if (this.has_opted_out_capturing()) {\n            this._gdpr_update_persistence({ clear_persistence: true })\n\n            // check whether we should opt out by default\n            // note: we don't clear persistence here by default since opt-out default state is often\n            //       used as an initial state while GDPR information is being collected\n        } else if (\n            !this.has_opted_in_capturing() &&\n            (this.get_config('opt_out_capturing_by_default') || cookieStore.get('ph_optout'))\n        ) {\n            cookieStore.remove('ph_optout')\n            this.opt_out_capturing({\n                clear_persistence: this.get_config('opt_out_persistence_by_default'),\n            })\n        }\n    }\n\n    /**\n     * Enable or disable persistence based on options\n     * only enable/disable if persistence is not already in this state\n     * @param {boolean} [options.clear_persistence] If true, will delete all data stored by the sdk in persistence and disable it\n     * @param {boolean} [options.enable_persistence] If true, will re-enable sdk persistence\n     */\n    _gdpr_update_persistence(options: Partial<OptInOutCapturingOptions>): void {\n        let disabled\n        if (options && options['clear_persistence']) {\n            disabled = true\n        } else if (options && options['enable_persistence']) {\n            disabled = false\n        } else {\n            return\n        }\n\n        if (!this.get_config('disable_persistence') && this.persistence.disabled !== disabled) {\n            this.persistence.set_disabled(disabled)\n        }\n    }\n\n    // call a base gdpr function after constructing the appropriate token and options args\n    _gdpr_call_func<R = any>(\n        func: (token: string, options: GDPROptions) => R,\n        options?: Partial<OptInOutCapturingOptions>\n    ): R {\n        options = _extend(\n            {\n                capture: this.capture.bind(this),\n                persistence_type: this.get_config('opt_out_capturing_persistence_type'),\n                cookie_prefix: this.get_config('opt_out_capturing_cookie_prefix'),\n                cookie_expiration: this.get_config('cookie_expiration'),\n                cross_subdomain_cookie: this.get_config('cross_subdomain_cookie'),\n                secure_cookie: this.get_config('secure_cookie'),\n            },\n            options || {}\n        )\n\n        // check if localStorage can be used for recording opt out status, fall back to cookie if not\n        if (!localStore.is_supported() && options['persistence_type'] === 'localStorage') {\n            options['persistence_type'] = 'cookie'\n        }\n\n        return func(this.get_config('token'), {\n            capture: options['capture'],\n            captureEventName: options['capture_event_name'],\n            captureProperties: options['capture_properties'],\n            persistenceType: options['persistence_type'],\n            persistencePrefix: options['cookie_prefix'],\n            cookieExpiration: options['cookie_expiration'],\n            crossSubdomainCookie: options['cross_subdomain_cookie'],\n            secureCookie: options['secure_cookie'],\n        })\n    }\n\n    /**\n     * Opt the user in to data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // opt user in\n     *     posthog.opt_in_capturing();\n     *\n     *     // opt user in with specific event name, properties, cookie configuration\n     *     posthog.opt_in_capturing({\n     *         capture_event_name: 'User opted in',\n     *         capture_event_properties: {\n     *             'Email': 'jdoe@example.com'\n     *         },\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {function} [options.capture] Function used for capturing a PostHog event to record the opt-in action (default is this PostHog instance's capture method)\n     * @param {string} [options.capture_event_name=$opt_in] Event name to be used for capturing the opt-in action\n     * @param {Object} [options.capture_properties] Set of properties to be captured along with the opt-in action\n     * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    opt_in_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        options = _extend(\n            {\n                enable_persistence: true,\n            },\n            options || {}\n        )\n\n        this._gdpr_call_func(optIn, options)\n        this._gdpr_update_persistence(options)\n    }\n\n    /**\n     * Opt the user out of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // opt user out\n     *     posthog.opt_out_capturing();\n     *\n     *     // opt user out with different cookie configuration from PostHog instance\n     *     posthog.opt_out_capturing({\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {boolean} [options.clear_persistence=true] If true, will delete all data stored by the sdk in persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    opt_out_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        const _options = _extend(\n            {\n                clear_persistence: true,\n            },\n            options || {}\n        )\n\n        this._gdpr_call_func(optOut, _options)\n        this._gdpr_update_persistence(_options)\n    }\n\n    /**\n     * Check whether the user has opted in to data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     const has_opted_in = posthog.has_opted_in_capturing();\n     *     // use has_opted_in value\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @returns {boolean} current opt-in status\n     */\n    has_opted_in_capturing(options?: Partial<OptInOutCapturingOptions>): boolean {\n        return this._gdpr_call_func(hasOptedIn, options)\n    }\n\n    /**\n     * Check whether the user has opted out of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     const has_opted_out = posthog.has_opted_out_capturing();\n     *     // use has_opted_out value\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @returns {boolean} current opt-out status\n     */\n    has_opted_out_capturing(options?: Partial<OptInOutCapturingOptions>): boolean {\n        return this._gdpr_call_func(hasOptedOut, options)\n    }\n\n    /**\n     * Clear the user's opt in/out status of data capturing and cookies/localstorage for this PostHog instance\n     *\n     * ### Usage\n     *\n     *     // clear user's opt-in/out status\n     *     posthog.clear_opt_in_out_capturing();\n     *\n     *     // clear user's opt-in/out status with specific cookie configuration - should match\n     *     // configuration used when opt_in_capturing/opt_out_capturing methods were called.\n     *     posthog.clear_opt_in_out_capturing({\n     *         cookie_expiration: 30,\n     *         secure_cookie: true\n     *     });\n     *\n     * @param {Object} [options] A dictionary of config options to override\n     * @param {boolean} [options.enable_persistence=true] If true, will re-enable sdk persistence\n     * @param {string} [options.persistence_type=localStorage] Persistence mechanism used - cookie or localStorage - falls back to cookie if localStorage is unavailable\n     * @param {string} [options.cookie_prefix=__ph_opt_in_out] Custom prefix to be used in the cookie/localstorage name\n     * @param {Number} [options.cookie_expiration] Number of days until the opt-in cookie expires (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.cross_subdomain_cookie] Whether the opt-in cookie is set as cross-subdomain or not (overrides value specified in this PostHog instance's config)\n     * @param {boolean} [options.secure_cookie] Whether the opt-in cookie is set as secure or not (overrides value specified in this PostHog instance's config)\n     */\n    clear_opt_in_out_capturing(options?: Partial<OptInOutCapturingOptions>): void {\n        const _options: Partial<OptInOutCapturingOptions> = _extend(\n            {\n                enable_persistence: true,\n            },\n            options ?? {}\n        )\n        this._gdpr_call_func(clearOptInOut, _options)\n        this._gdpr_update_persistence(_options)\n    }\n\n    debug(debug?: boolean): void {\n        if (debug === false) {\n            window.console.log(\"You've disabled debug mode.\")\n            localStorage && localStorage.removeItem('ph_debug')\n            this.set_config({ debug: false })\n        } else {\n            window.console.log(\n                \"You're now in debug mode. All calls to PostHog will be logged in your console.\\nYou can disable this with `posthog.debug(false)`.\"\n            )\n            localStorage && localStorage.setItem('ph_debug', 'true')\n            this.set_config({ debug: true })\n        }\n    }\n\n    decodeLZ64(input: string | null | undefined): string | null {\n        return LZString.decompressFromBase64(input || null)\n    }\n}\n\n_safewrap_class(PostHog, ['identify'])\n\nconst instances: Record<string, PostHog> = {}\nconst extend_mp = function () {\n    // add all the sub posthog instances\n    _each(instances, function (instance, name) {\n        if (name !== PRIMARY_INSTANCE_NAME) {\n            posthog_master[name] = instance\n        }\n    })\n}\n\nconst override_ph_init_func = function () {\n    // we override the snippets init function to handle the case where a\n    // user initializes the posthog library after the script loads & runs\n    posthog_master['init'] = function (token?: string, config?: Partial<PostHogConfig>, name?: string) {\n        if (name) {\n            // initialize a sub library\n            if (!posthog_master[name]) {\n                posthog_master[name] = instances[name] = create_mplib(token || '', config || {}, name)\n                posthog_master[name]._loaded()\n            }\n            return posthog_master[name]\n        } else {\n            let instance: PostHog = posthog_master as any as PostHog\n\n            if (instances[PRIMARY_INSTANCE_NAME]) {\n                // main posthog lib already initialized\n                instance = instances[PRIMARY_INSTANCE_NAME]\n            } else if (token) {\n                // intialize the main posthog lib\n                instance = create_mplib(token, config || {}, PRIMARY_INSTANCE_NAME)\n                instance._loaded()\n                instances[PRIMARY_INSTANCE_NAME] = instance\n            }\n\n            ;(posthog_master as any) = instance\n            if (init_type === InitType.INIT_SNIPPET) {\n                ;(window as any)[PRIMARY_INSTANCE_NAME] = posthog_master\n            }\n            extend_mp()\n            return instance\n        }\n    }\n}\n\nconst add_dom_loaded_handler = function () {\n    // Cross browser DOM Loaded support\n    function dom_loaded_handler() {\n        // function flag since we only want to execute this once\n        if ((dom_loaded_handler as any).done) {\n            return\n        }\n        ;(dom_loaded_handler as any).done = true\n\n        ENQUEUE_REQUESTS = false\n\n        _each(instances, function (inst: PostHog) {\n            inst._dom_loaded()\n        })\n    }\n\n    if (document.addEventListener) {\n        if (document.readyState === 'complete') {\n            // safari 4 can fire the DOMContentLoaded event before loading all\n            // external JS (including this file). you will see some copypasta\n            // on the internet that checks for 'complete' and 'loaded', but\n            // 'loaded' is an IE thing\n            dom_loaded_handler()\n        } else {\n            document.addEventListener('DOMContentLoaded', dom_loaded_handler, false)\n        }\n    }\n\n    // fallback handler, always will work\n    _register_event(window, 'load', dom_loaded_handler, true)\n}\n\nexport function init_from_snippet(): void {\n    init_type = InitType.INIT_SNIPPET\n    if (_isUndefined((window as any).posthog)) {\n        ;(window as any).posthog = []\n    }\n    posthog_master = (window as any).posthog\n\n    if (posthog_master['__loaded'] || (posthog_master['config'] && posthog_master['persistence'])) {\n        // lib has already been loaded at least once; we don't want to override the global object this time so bomb early\n        console.error('PostHog library has already been downloaded at least once.')\n        return\n    }\n\n    // Load instances of the PostHog Library\n    _each(posthog_master['_i'], function (item: [token: string, config: Partial<PostHogConfig>, name: string]) {\n        if (item && _isArray(item)) {\n            instances[item[2]] = create_mplib(...item)\n        }\n    })\n\n    override_ph_init_func()\n    ;(posthog_master['init'] as any)()\n\n    // Fire loaded events after updating the window's posthog object\n    _each(instances, function (instance) {\n        instance._loaded()\n    })\n\n    add_dom_loaded_handler()\n}\n\nexport function init_as_module(): PostHog {\n    init_type = InitType.INIT_MODULE\n    ;(posthog_master as any) = new PostHog()\n\n    override_ph_init_func()\n    ;(posthog_master['init'] as any)()\n    add_dom_loaded_handler()\n\n    return posthog_master as any\n}\n","import { init_as_module } from './posthog-core'\nexport { PostHog } from './posthog-core'\nexport * from './types'\nexport const posthog = init_as_module()\nexport default posthog\n"],"names":["f","String","fromCharCode","keyStrBase64","keyStrUriSafe","baseReverseDic","getBaseValue","alphabet","character","i","length","charAt","LZString","compressToBase64","input","res","_compress","a","decompressFromBase64","_decompress","index","compressToUTF16","decompressFromUTF16","compressed","charCodeAt","compressToUint8Array","uncompressed","compress","buf","Uint8Array","TotalLen","current_value","decompressFromUint8Array","undefined","decompress","Array","result","forEach","c","push","join","compressToEncodedURIComponent","decompressFromEncodedURIComponent","replace","bitsPerChar","getCharFromInt","value","context_c","context_wc","context_w","context_enlargeIn","context_dictSize","context_numBits","context_data_val","context_data_position","ii","context_dictionary","context_dictionaryToCreate","context_data","Object","prototype","hasOwnProperty","call","Math","pow","resetValue","getNextValue","dictionary","data","val","position","enlargeIn","dictSize","numBits","entry","w","bits","resb","maxpower","power","Config","DEBUG","LIB_VERSION","version","ArrayProto","ObjProto","toString","win","window","navigator","userAgent","document","nativeForEach","nativeIndexOf","indexOf","nativeIsArray","isArray","breaker","logger","log","_isUndefined","console","args","apply","err","_eachArray","arg","error","_args","critical","_trim","str","_bind_instance_methods","obj","func","bind","_each","iterator","thisArg","l","key","_extend","source","prop","_isArray","_isFunction","test","x","_include","target","found","_includes","needle","_isObject","_isString","_isDate","_isNumber","_encodeDates","v","k","_formatDate","_timestamp","Date","now","d","pad","n","getUTCFullYear","getUTCMonth","getUTCDate","getUTCHours","getUTCMinutes","getUTCSeconds","_safewrap","e","_safewrap_class","klass","functions","_safewrap_instance_methods","_strip_empty_properties","p","ret","deepCircularCopy","customizer","COPY_IN_PROGRESS_SET","Set","internalDeepCircularCopy","has","add","it","LONG_STRINGS_ALLOW_LIST","_copyAndTruncateStrings","object","maxStringLength","slice","_base64Encode","b64","o1","o2","o3","h1","h2","h3","h4","ac","enc","tmp_arr","_utf8Encode","string","utftext","start","end","stringl","c1","substring","_UUID","T","valueOf","R","random","UA","ua","ch","buffer","xor","byte_array","j","tmp","unshift","se","screen","height","width","_isBlockedUA","_HTTPBuildQuery","formdata","arg_separator","use_val","use_key","tph_arr","encodeURIComponent","_getQueryParam","url","param","cleanParam","regexS","regex","RegExp","results","exec","decodeURIComponent","_getHashParam","hash","matches","match","_register_event","register_event","element","type","handler","oldSchool","useCapture","addEventListener","ontype","old_handler","makeHandler","new_handler","old_handlers","event","fixEvent","old_result","new_result","preventDefault","stopPropagation","returnValue","cancelBubble","_info","campaignParams","campaign_keywords","split","params","kwkey","kw","URL","searchEngine","referrer","search","searchInfo","keyword","browser","user_agent","vendor","opera","browserVersion","versionRegexs","Chrome","Safari","Opera","Firefox","Konqueror","BlackBerry","Mozilla","parseFloat","browserLanguage","language","userLanguage","os","device","deviceType","referringDomain","properties","$os","$browser","$device","$device_type","$current_url","location","href","$host","host","$pathname","pathname","$browser_version","$browser_language","$screen_height","$screen_width","$viewport_height","innerHeight","$viewport_width","innerWidth","$lib","$lib_version","$insert_id","$time","people_properties","getClassName","el","className","baseVal","getAttribute","getSafeText","elText","shouldCaptureElement","isSensitiveElement","childNodes","child","isTextNode","textContent","filter","shouldCaptureValue","isElementNode","nodeType","isTag","tag","tagName","toLowerCase","isDocumentFragment","autocaptureCompatibleElements","shouldCaptureDomEvent","autocaptureConfig","url_allowlist","allowlist","some","dom_event_allowlist","eventType","element_allowlist","elementType","css_selector_allowlist","selector","parentIsUsefulElement","targetElementList","parentNode","curEl","compStyles","getComputedStyle","getPropertyValue","classes","name","id","sensitiveNameRegex","allowedInputTypes","includes","ccRegex","ssnRegex","isAngularStyleAttr","attributeName","loadScript","scriptUrlToLoad","callback","scriptTag","createElement","src","onload","scripts","getElementsByTagName","insertBefore","body","appendChild","RAGE_CLICK_THRESHOLD_PX","RAGE_CLICK_TIMEOUT_MS","RAGE_CLICK_CLICK_COUNT","RageClick","instance","enabled","get_config","clicks","y","timestamp","lastClick","abs","capture","autocapture","_initializedTokens","_previousElementSibling","previousElementSibling","_el","previousSibling","_getPropertiesFromElement","elem","maskInputs","maskText","tag_name","props","attributes","attr","nthChild","nthOfType","currentElem","_getDefaultProperties","$event_type","$ce_version","_extractCustomPropertyValue","customProperty","propValues","querySelectorAll","matchedElem","_getCustomProperties","_customProperties","eventSelector","eventElements","eventElement","_getEventTarget","srcElement","shadowRoot","composedPath","_captureEvent","MouseEvent","rageclicks","click","clientX","clientY","getTime","config","elementsJson","explicitNoCapture","shouldCaptureEl","$elements","_navigate","_addDomEventHandlers","init","__autocapture","map","afterDecideResponse","response","token","enabledForProject","numBuckets","numEnabledBuckets","charCodeSum","isBrowserSupported","DOMAIN_MATCH_REGEX","cookieStore","is_supported","msg","get","nameEQ","ca","cookie","parse","JSON","set","days","cross_subdomain","is_secure","cdomain","expires","secure","hostname","domain","date","setTime","toUTCString","new_cookie_val","stringify","remove","_localStorage_supported","localStore","supported","localStorage","getItem","setItem","removeItem","localPlusCookieStore","_objectSpread","extend","distinct_id","memoryStorage","memoryStore","sessionStorageSupported","sessionStore","sessionStorage","GDPR_DEFAULT_PERSISTENCE_PREFIX","optIn","options","_optInOut","optOut","hasOptedIn","_getStorageValue","hasOptedOut","_hasDoNotTrackFlagOn","clearOptInOut","_getStorage","_getStorageKey","crossSubdomainCookie","persistenceType","persistencePrefix","respectDnt","nav","hasDntOn","dntValue","optValue","cookieExpiration","secureCookie","captureEventName","captureProperties","send_instantly","userOptedOut","posthog","silenceErrors","optedOut","addOptOutCheck","method","SET_ACTION","SET_ONCE_ACTION","PostHogPeople","_posthog","to","set_action","_get_config","persistence","update_referrer_info","get_referrer_info","_send_request","set_once","set_once_action","get_distinct_id","device_id","get_property","user_id","had_persisted_distinct_id","date_encoded_data","truncated_data","json_data","encoded_data","_prepare_callback","conf_var","apiActionParser","actionType","_is_reserved_property","parseFeatureFlagDecideResponse","flags","$enabled_feature_flags","register","$active_feature_flags","keys","unregister","PostHogFeatureFlags","_override_warning","flagCallReported","featureFlagEventHandlers","reloadFeatureFlagsQueued","reloadFeatureFlagsInAction","getFlagVariants","enabledFlags","overriddenFlags","finalFlags","overriddenKeys","warn","_startReloadTimer","anon_distinct_id","$anon_distinct_id","isPaused","setTimeout","_reloadFeatureFlagsRequest","setReloadingPaused","groups","getGroups","receivedFeatureFlags","getFlags","flagValue","send_event","$feature_flag","$feature_flag_response","getFeatureFlag","decideEndpointWasHit","variants","flagsObj","$override_feature_flags","addFeatureFlagsHandler","flagVariants","SET_QUEUE_KEY","SET_ONCE_QUEUE_KEY","UNSET_QUEUE_KEY","ADD_QUEUE_KEY","APPEND_QUEUE_KEY","REMOVE_QUEUE_KEY","UNION_QUEUE_KEY","PEOPLE_DISTINCT_ID_KEY","ALIAS_ID_KEY","CAMPAIGN_IDS_KEY","EVENT_TIMERS_KEY","SESSION_RECORDING_ENABLED_SERVER_SIDE","CONSOLE_LOG_RECORDING_ENABLED_SERVER_SIDE","SESSION_ID","ENABLED_FEATURE_FLAGS","RESERVED_PROPERTIES","PostHogPersistence","campaign_params_saved","storage_type","storage","load","update_config","save","disabled","expire_days","default_value","default_expiry","hasChanges","$referrer","$referring_domain","set_disabled","set_cross_subdomain","set_secure","event_name","timers","replacementImageURI","filterDataURLsFromLargeDataObjects","stringifiedData","dataURIRegex","matchAll","toLocaleLowerCase","CONSOLE_LOG_PLUGIN_NAME","truncateLargeConsoleLogs","MAX_STRING_SIZE","MAX_STRINGS_PER_LOG","PLUGIN_EVENT_TYPE","plugin","payload","updatedPayload","BASE_ENDPOINT","FULL_SNAPSHOT_EVENT_TYPE","META_EVENT_TYPE","INCREMENTAL_SNAPSHOT_EVENT_TYPE","MUTATION_SOURCE_TYPE","SessionRecording","captureStarted","snapshots","emit","endpoint","stopRrweb","windowId","sessionId","receivedDecide","isRecordingEnabled","startCaptureAndTrySendingQueuedSnapshots","stopRecording","enabled_server_side","enabled_client_side","sessionRecording","consoleLogRecordingEnabled","startRecordingIfEnabled","_captureSnapshot","_startCapture","assign","_onScriptLoaded","isNotUserInteraction","sessionManager","checkAndGetSessionAndWindowId","rrwebRecord","takeFullSnapshot","sessionRecordingOptions","blockClass","blockSelector","ignoreClass","maskAllInputs","maskInputOptions","maskInputFn","slimDOMOptions","collectFonts","inlineStylesheet","rrweb","record","userSessionRecordingOptions","entries","_updateWindowAndSessionIds","$snapshot_data","$session_id","$window_id","_captureMetrics","incr","plugins","rrwebConsoleRecord","isConsoleLogCaptureEnabled","getRecordConsolePlugin","_addCaptureHook","eventName","addCustomEvent","transport","_noTruncate","_batchKey","_metrics","rrweb_full_snapshot","PERFORMANCE_EVENTS_MAPPING","entryType","timeOrigin","startTime","redirectStart","redirectEnd","workerStart","fetchStart","domainLookupStart","domainLookupEnd","connectStart","secureConnectionStart","connectEnd","requestStart","responseStart","responseEnd","decodedBodySize","encodedBodySize","initiatorType","nextHopProtocol","renderBlockingStatus","responseStatus","transferSize","renderTime","loadTime","size","domComplete","domContentLoadedEvent","domInteractive","loadEventEnd","loadEventStart","redirectCount","navigationType","unloadEventEnd","unloadEventStart","duration","ENTRY_TYPES_TO_OBSERVE","PERFORMANCE_INGESTION_ENDPOINT","POSTHOG_PATHS_TO_IGNORE","WebPerformanceObserver","isEnabled","startObserving","stopObserving","observer","PerformanceObserver","list","getEntries","_capturePerformanceEvent","entryTypes","supportedEntryTypes","observe","buffered","disconnect","remoteEnabled","capturePerformance","startsWith","path","find","eventJson","toJSON","floor","performance","capturePerformanceEvent","exposesServerTiming","serverTiming","timing","Decide","_hasBootstrappedFeatureFlags","verbose","parseDecideResponse","status","toolbar","webPerformance","featureFlags","compression","apiHost","script","onerror","POSTHOG_MANAGED_HOSTS","Toolbar","toolbarParams","toolbarVersion","loadToolbar","apiURL","history","stateHash","state","parseFromUrl","replaceState","title","userIntent","toolbarUrl","endsWith","disableToolbarMetrics","jsURL","instrument","paramsToPersist","maybeLoadToolbar","RequestQueueScaffold","pollInterval","isPolling","_event_queue","_empty_queue_count","_poller","_pollInterval","interval","poll","RequestQueue","captureMetrics","handlePollRequest","clearTimeout","requests","formatQueue","_","dataKey","requestValues","values","sortedRequests","r","request","CaptureMetrics","metrics","by","u8","u16","Uint16Array","u32","Uint32Array","fleb","fdeb","clim","freb","eb","b","_a","fl","revfl","_b","revfd","rev","hMap","cd","mb","s","le","co","rvb","sv","r_1","m","flt","fdt","flm","fdm","shft","slc","subarray","wbits","o","wbits16","hTree","t","t2","sort","i0","i1","i2","maxSym","tr","mbt","ln","dt","lft","cst","i2_1","i2_2","i2_3","max","lc","cl","cli","cln","cls","clen","cf","wfblk","out","pos","dat","wblk","final","syms","lf","df","li","bs","bl","dlt","mlb","ddt","mdb","_c","lclt","nlc","_d","lcdt","ndc","lcfreq","_e","lct","mlcb","nlcc","flen","ftlen","dtlen","lm","ll","dm","dl","llm","lcts","clct","len","dst","deo","et","dflt","lvl","plvl","pre","post","lst","opt","msk_1","prev","head","bs1_1","ceil","bs2_1","hsh","lc_1","wi","hv","imod","pimod","rem","ch_1","dif","maxn","min","maxd","ml","nl","mmd","md","ti","pti","lin","din","crct","crc","cr","dopt","st","level","mem","wbytes","gzh","fn","filename","mtime","gzhl","gzipSync","opts","strToU8","latin1","TextEncoder","encode","ar","ai","Compression","decideCompression","compressionSupport","GZipJS","LZ64","Base64","compressData","jsonData","blob","urlQueryArgs","addParamsToURL","parameterOptions","halves","argSeparator","encodePostData","Blob","sendBeacon","body_data","isUint8Array","xhr","headers","retriesPerformedSoFar","retryQueue","onXHRError","req","XMLHttpRequest","open","headerValue","headerName","setRequestHeader","withCredentials","onreadystatechange","readyState","decr","responseText","enqueue","send","RetryQueue","queue","areWeOnline","onLine","_handleWeAreNowOnline","requestData","msToNextRetry","retryAt","flush","toFlush","_executeXhrRequest","SESSION_CHANGE_THRESHOLD","SESSION_LENGTH_LIMIT","SessionIdManager","_windowId","_sessionId","_sessionStartTimestamp","_sessionActivityTimestamp","persistenceName","window_id_storage_key","primary_window_exists_storage_key","lastWindowId","primaryWindowExists","_listenToReloadWindow","sessionActivityTimestamp","sessionStartTimestamp","_setSessionId","readOnly","_getSessionId","lastTimestamp","startTimestamp","_getWindowId","sessionPastMaximumLength","newTimestamp","_setWindowId","SentryIntegration","organization","projectId","prefix","setupOnce","addGlobalEventProcessor","__loaded","tags","ui_host","api_host","sessionRecordingStarted","exceptions","exception","$sentry_event_id","event_id","$sentry_exception","$sentry_exception_message","$sentry_exception_type","$sentry_tags","createSegmentIntegration","enrichEvent","ctx","userId","anonymousId","reset","reloadFeatureFlags","additionalProperties","_calculate_event_properties","isLoaded","Promise","resolve","track","page","identify","PageViewIdManager","_seenFirstPageView","_pageViewId","InitType","init_type","posthog_master","__NOOP","__NOOPTIONS","PRIMARY_INSTANCE_NAME","USE_XHR","ENQUEUE_REQUESTS","defaultConfig","api_method","api_transport","rageclick","cross_subdomain_cookie","persistence_name","cookie_name","loaded","store_google","save_referrer","img","capture_pageview","capture_pageleave","debug","cookie_expiration","upgrade","disable_session_recording","disable_persistence","disable_cookie","enable_recording_console_log","secure_cookie","protocol","ip","opt_out_capturing_by_default","opt_out_persistence_by_default","opt_out_capturing_persistence_type","opt_out_capturing_cookie_prefix","opt_in_site_apps","property_blacklist","respect_dnt","sanitize_properties","xhr_headers","inapp_protocol","inapp_link_new_window","request_batching","properties_string_max_length","session_recording","mask_all_element_attributes","mask_all_text","advanced_disable_decide","advanced_disable_toolbar_metrics","on_xhr_error","statusText","get_device_id","uuid","_onCapture","_capture_metrics","capture_performance","callback_fn","bootstrap","disable_compression","create_mplib","INIT_MODULE","PostHog","_init","startObservingIfEnabled","num_buckets","num_enabled_buckets","_execute_array","people","segmentIntegration","__captureHooks","__request_queue","_jsc","feature_flags","pageViewIdManager","_requestQueue","_retryQueue","_loaded","_triggered_notifs","set_config","_handle_queued_event","_gdpr_init","segment","user","distinctID","deviceID","isIdentifiedID","$device_id","activeFlags","flag","reduce","register_once","self","_handle_unload","_start_queue_if_opted_in","resetRequestQueue","has_opted_out_capturing","item","jsc","randomized_cb","callback_string","updateUnloadMetrics","unload","__compress_and_send_json_request","_options","DEFAULT_OPTIONS","useSendBeacon","async","defer","array","fn_name","alias_calls","other_calls","capturing_calls","execute","calls","caller","update_search_keyword","update_campaign_params","$set","has_unique_traits","_invokeCaptureHooks","eventData","event_properties","start_timestamp","remove_event_timer","persistenceProps","infoProperties","onPageview","$pageview_id","getPageViewId","duration_in_ms","toFixed","blacklisted_prop","property","isFeatureEnabled","onFeatureFlags","new_distinct_id","userPropertiesToSet","userPropertiesToSetOnce","previous_distinct_id","$user_id","$had_persisted_distinct_id","$set_once","setAnonymousDistinctId","groupType","groupKey","groupPropertiesToSet","existingGroups","$groups","$group_type","$group_key","$group_set","reset_device_id","clear","resetSessionId","alias","original","_register_single","oldConfig","started","prop_name","property_name","is_localStorage_requested","has_opted_in_capturing","persistence_type","opt_in_capturing","enable_persistence","opt_out_capturing","clear_persistence","clear_opt_in_out_capturing","_gdpr_update_persistence","cookie_prefix","_gdpr_call_func","instances","extend_mp","override_ph_init_func","INIT_SNIPPET","add_dom_loaded_handler","dom_loaded_handler","done","inst","_dom_loaded","init_as_module"],"mappings":"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"}